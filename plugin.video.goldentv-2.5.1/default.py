import base64;exec base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KaW1wb3J0IHVybGxpYgppbXBvcnQgdXJsbGliMgppbXBvcnQgcmUKaW1wb3J0IG9zCmltcG9ydCB4Ym1jcGx1Z2luCmltcG9ydCB4Ym1jZ3VpCmltcG9ydCB4Ym1jYWRkb24KaW1wb3J0IHhibWN2ZnMKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgY29va2llbGliICwgYmFzZTY0CmZyb20gQmVhdXRpZnVsU291cCBpbXBvcnQgQmVhdXRpZnVsU3RvbmVTb3VwICwgQmVhdXRpZnVsU291cCAsIEJlYXV0aWZ1bFNPQVAKb28wMDAgPSBOb25lCnRyeSA6CiBmcm9tIHhtbCAuIHNheCAuIHNheHV0aWxzIGltcG9ydCBlc2NhcGUKZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQp0cnkgOgogaW1wb3J0IGpzb24KZXhjZXB0IDoKIGltcG9ydCBzaW1wbGVqc29uIGFzIGpzb24KaW1wb3J0IFNpbXBsZURvd25sb2FkZXIgYXMgZG93bmxvYWRlcgppbXBvcnQgdGltZQppZiA5IC0gOTogSWkgLiBvMG8wME9vME8gLSBpSTExSTFJSTFJMUkKdHJ5IDoKIGltcG9ydCBzc2wKIHNzbCAuIF9jcmVhdGVfZGVmYXVsdF9odHRwc19jb250ZXh0ID0gc3NsIC4gX2NyZWF0ZV91bnZlcmlmaWVkX2NvbnRleHQKZXhjZXB0IDoKIHBhc3MKIGlmIDcxIC0gNzE6IGlpCmltcG9ydCB6aXBmaWxlCmlmIDExIC0gMTE6IGlpMUkgLSBvb08wT08wMDBvCmRlZiBpaTExaSAoIF9pbiAsIF9vdXQgKSA6CiB0cnkgOgogIG9Pb29Pb08wT28wTyA9IHppcGZpbGUgLiBaaXBGaWxlICggX2luICwgJ3InICkKICBvT29vT29PME9vME8gLiBleHRyYWN0YWxsICggX291dCApCiBleGNlcHQgRXhjZXB0aW9uICwgaUkxIDoKICBwcmludCBzdHIgKCBpSTEgKQogIHJldHVybiBGYWxzZQogIGlmIDQzIC0gNDM6IEkxMWkxMUlpCiByZXR1cm4gVHJ1ZQogaWYgNjUgLSA2NTogaTFpSWkxMWlJSWkxSQogaWYgNzggLSA3ODogaTExaWkxMWlJaTExaSAuIG9Pb08wb28wT09PbyArIElpaUkgLyBJaWkxaWkxSUkxMWkKZGVmIGlJMTExaUkgKCApIDoKIHByaW50ICJTcG9ydHNEZXZpbCIKIElpSUkgPSAiaHR0cDovL2ZyZWVtZWRpYWVudGVydGFpbm1lbnQuY29tL0ZyZWUuQWRkb25zL3BsdWdpbi52aWRlby5TcG9ydHNEZXZpbC0yMDE2LTA4LTIyLnppcCIKIGlJMUlpMTExMTFpSWkgPSB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoIG9zIC4gcGF0aCAuIGpvaW4gKCAnc3BlY2lhbDovL2hvbWUnICwgJ2FkZG9ucycgKSApIC4gZGVjb2RlICggInV0Zi04IiApCiBpMWkxSUkgPSBvcyAuIHBhdGggLiBqb2luICggaUkxSWkxMTExMWlJaSAsICdwYWNrYWdlcycgLCAnc3BkLnppcCcgKQogaWYgOTYgLSA5NjogbzBPTzAgLSBPbzBvb08wb28wb08gLiBJMWkxaUkxaSAtIG8wMG9vbzAgLyBvMDAgKiBPbzBvTzBvb28KIHVybGxpYiAuIHVybHJldHJpZXZlICggSWlJSSAsIGkxaTFJSSApCiBpaTExaSAoIGkxaTFJSSAsIGlJMUlpMTExMTFpSWkgKQogaWYgNTYgLSA1Njogb29PMDBvT29vIC0gTzBPT28KIHRyeSA6CiAgb3MgLiByZW1vdmUgKCBpMWkxSUkgKQogZXhjZXB0IDoKICBwYXNzCiAgaWYgOCAtIDg6IElpaUkgKiBJaWkxaWkxSUkxMWkgKiBpSTExSTFJSTFJMUkgLiBPbzBvTzBvb28gLyBPbzBvTzBvb28gJSBPbzBvTzBvb28KIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJVcGRhdGVMb2NhbEFkZG9ucyIgKQogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlVwZGF0ZUFkZG9uUmVwb3MiICkKIGlmIDIyIC0gMjI6IG8wMG9vbzAgLiBPbzBvTzBvb28KIGlmIDQxIC0gNDE6IG9vTzAwb09vbyAuIE8wT09vICogT28wb08wb29vICUgSWkKZGVmIG8wMDBvMG8wMG8wT28gKCApIDoKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9zIC4gcGF0aCAuIGpvaW4gKCB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoICJzcGVjaWFsOi8vaG9tZS9hZGRvbnMvIiApIC4gZGVjb2RlICggInV0Zi04IiApICwgJ3JlcG9zaXRvcnkuZHNzJyApICkgOgogIHJldHVybgogIGlmIDgwIC0gODA6IGlpIC4gSTExaTExSWkKIElpSUkgPSAiaHR0cDovL2ZyZWVtZWRpYWVudGVydGFpbm1lbnQuY29tL0ZyZWUuQWRkb25zLnppcCIKIGlJMUlpMTExMTFpSWkgPSB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoIG9zIC4gcGF0aCAuIGpvaW4gKCAnc3BlY2lhbDovL2hvbWUnICwgJ2FkZG9ucycgKSApIC4gZGVjb2RlICggInV0Zi04IiApCiBpMWkxSUkgPSBvcyAuIHBhdGggLiBqb2luICggaUkxSWkxMTExMWlJaSAsICdwYWNrYWdlcycgLCAnaXNyLnppcCcgKQogaWYgODcgLSA4NzogbzBPTzAgLyBPME9PbyArIG9vTzAwb09vbyAtIE8wT09vIC4gTzBPT28gLyBvb08wT08wMDBvCiB1cmxsaWIgLiB1cmxyZXRyaWV2ZSAoIElpSUkgLCBpMWkxSUkgKQogaWkxMWkgKCBpMWkxSUkgLCBpSTFJaTExMTExaUlpICkKIGlmIDExIC0gMTE6IEkxMWkxMUlpICUgSWlpSSAtIGkxaUlpMTFpSUlpMUkKIHRyeSA6CiAgb3MgLiByZW1vdmUgKCBpMWkxSUkgKQogZXhjZXB0IDoKICBwYXNzCiAgaWYgNTggLSA1ODogSWkgJSBvb08wMG9Pb28KIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJVcGRhdGVMb2NhbEFkZG9ucyIgKQogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlVwZGF0ZUFkZG9uUmVwb3MiICkKIGlmIDU0IC0gNTQ6IE9vMG9vTzBvbzBvTyAlIG8wbzAwT28wTyArIEkxMWkxMUlpIC0gbzAwIC8gSTFpMWlJMWkKIGlmIDMxIC0gMzE6IGkxMWlpMTFpSWkxMWkgKyBvb08wT08wMDBvCmRlZiBpMTFJaUlpaUlJSUlJICggKSA6CiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBvcyAuIHBhdGggLiBqb2luICggeGJtYyAuIHRyYW5zbGF0ZVBhdGggKCAic3BlY2lhbDovL2hvbWUvYWRkb25zLyIgKSAuIGRlY29kZSAoICJ1dGYtOCIgKSAsICdyZXBvc2l0b3J5LmRvY3NoYWRyYWNoJyApICkgOgogIHJldHVybgogIGlmIDIyIC0gMjI6IG8wMG9vbzAgKiBvMG8wME9vME8gLyBJaWlJCiBJaUlJID0gImh0dHBzOi8vZ2l0aHViLmNvbS9YQk1DU3BvdC9kb2NzaGFkcmFjaC5yZXBvc2l0b3J5L3Jhdy9tYXN0ZXIvemlwcy9yZXBvc2l0b3J5LmRvY3NoYWRyYWNoLTEuMC56aXAiCiBpSTFJaTExMTExaUlpID0geGJtYyAuIHRyYW5zbGF0ZVBhdGggKCBvcyAuIHBhdGggLiBqb2luICggJ3NwZWNpYWw6Ly9ob21lJyAsICdhZGRvbnMnICkgKSAuIGRlY29kZSAoICJ1dGYtOCIgKQogaTFpMUlJID0gb3MgLiBwYXRoIC4gam9pbiAoIGlJMUlpMTExMTFpSWkgLCAncGFja2FnZXMnICwgJ2lzci56aXAnICkKIGlmIDY0IC0gNjQ6IG8wMG9vbzAgJSBpaTFJICUgaWkKIHVybGxpYiAuIHVybHJldHJpZXZlICggSWlJSSAsIGkxaTFJSSApCiBpaTExaSAoIGkxaTFJSSAsIGlJMUlpMTExMTFpSWkgKQogaWYgMyAtIDM6IG8wMCArIG8wbzAwT28wTwogdHJ5IDoKICBvcyAuIHJlbW92ZSAoIGkxaTFJSSApCiBleGNlcHQgOgogIHBhc3MKICBpZiA0MiAtIDQyOiBPbzBvb08wb28wb08gLyBpaTFJICsgSWkgLSBvMDBvb28wCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiVXBkYXRlTG9jYWxBZGRvbnMiICkKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJVcGRhdGVBZGRvblJlcG9zIiApCiBpZiA3OCAtIDc4OiBpMTFpaTExaUlpMTFpCiBpZiAxOCAtIDE4OiBvMG8wME9vME8gLSBvMDAgLyBvMDAgKyBPME9PbyAlIE8wT09vIC0gT28wb08wb29vCmkxMUlpSWlpSUlJSUkgKCApCmlmIDYyIC0gNjI6IG8wMCAtIE9vMG9PMG9vbyAtIG9Pb08wb28wT09PbyAlIGlpMUkgLyBvME9PMAppZiA3NyAtIDc3OiBvb08wT08wMDBvIC0gb29PME9PMDAwbyAuIEkxMWkxMUlpIC8gSWlpSQppMWlJSUlpSTFJID0gRmFsc2UKaWYgNzAgLSA3MDogaTFpSWkxMWlJSWkxSSAlIGkxaUlpMTFpSUlpMUkgLiBPbzBvTzBvb28gJSBpMTFpaTExaUlpMTFpICogSWlpSSAlIG8wT08wCmlpSTFJaUkgPSBbICcxODB1cGxvYWQuY29tJyAsICdhbGxteXZpZGVvcy5uZXQnICwgJ2Jlc3RyZWFtcy5uZXQnICwgJ2NsaWNrbnVwbG9hZC5jb20nICwgJ2Nsb3VkemlsbGEudG8nICwgJ21vdnNoYXJlLm5ldCcgLCAnbm92YW1vdi5jb20nICwgJ25vd3ZpZGVvLnN4JyAsICd2aWRlb3dlZWQuZXMnICwgJ2RhY2xpcHMuaW4nICwgJ2RhdGVtdWxlLmNvbScgLCAnZmFzdHZpZGVvLmluJyAsICdmYXN0c3RyZWFtLmluJyAsICdmaWxlaG9vdC5jb20nICwgJ2ZpbGVudWtlLmNvbScgLCAnc2hhcmVzaXguY29tJyAsICdwbHVzLmdvb2dsZS5jb20nICwgJ3BpY2FzYXdlYi5nb29nbGUuY29tJyAsICdnb3JpbGxhdmlkLmNvbScgLCAnZ29yaWxsYXZpZC5pbicgLCAnZ3JpZnRob3N0LmNvbScgLCAnaHVnZWZpbGVzLm5ldCcgLCAnaXBpdGhvcy50bycgLCAnaXNoYXJlZC5ldScgLCAna2luZ2ZpbGVzLm5ldCcgLCAnbWFpbC5ydScgLCAnbXkubWFpbC5ydScgLCAndmlkZW9hcGkubXkubWFpbC5ydScgLCAnbWlnaHR5dXBsb2FkLmNvbScgLCAnbW9vc2hhcmUuYml6JyAsICdtb3ZkaXZ4LmNvbScgLCAnbW92cG9kLm5ldCcgLCAnbW92cG9kLmluJyAsICdtb3ZyZWVsLmNvbScgLCAnbXJmaWxlLm1lJyAsICdub3N2aWRlby5jb20nICwgJ29wZW5sb2FkLmlvJyAsICdwbGF5ZWQudG8nICwgJ2JpdHNoYXJlLmNvbScgLCAnZmlsZWZhY3RvcnkuY29tJyAsICdrMnMuY2MnICwgJ29ib29tLmNvbScgLCAncmFwaWRnYXRvci5uZXQnICwgJ3VwbG9hZGVkLm5ldCcgLCAncHJpbWVzaGFyZS50dicgLCAnYml0c2hhcmUuY29tJyAsICdmaWxlZmFjdG9yeS5jb20nICwgJ2sycy5jYycgLCAnb2Jvb20uY29tJyAsICdyYXBpZGdhdG9yLm5ldCcgLCAndXBsb2FkZWQubmV0JyAsICdzaGFyZXJlcG8uY29tJyAsICdzdGFnZXZ1LmNvbScgLCAnc3RyZWFtY2xvdWQuZXUnICwgJ3N0cmVhbWluLnRvJyAsICd0aGVmaWxlLm1lJyAsICd0aGV2aWRlby5tZScgLCAndHVzZmlsZXMubmV0JyAsICd1cGxvYWRjLmNvbScgLCAnemFsYWEuY29tJyAsICd1cGxvYWRyb2NrZXQubmV0JyAsICd1cHRvYm94LmNvbScgLCAndi12aWRzLmNvbScgLCAndmVlaGQuY29tJyAsICd2aWRidWxsLmNvbScgLCAndmlkZW9tZWdhLnR2JyAsICd2aWRwbGF5Lm5ldCcgLCAndmlkc3BvdC5uZXQnICwgJ3ZpZHRvLm1lJyAsICd2aWR6aS50dicgLCAndmltZW8uY29tJyAsICd2ay5jb20nICwgJ3ZvZGxvY2tlci5jb20nICwgJ3hmaWxlbG9hZC5jb20nICwgJ3h2aWRzdGFnZS5jb20nICwgJ3pldHRhaG9zdC50dicgXQpJSSA9IFsgJ3BsdWdpbi52aWRlby5kcmFtYXNvbmxpbmUnICwgJ3BsdWdpbi52aWRlby5mNG1UZXN0ZXInICwgJ3BsdWdpbi52aWRlby5zaGFoaWRtYmNuZXQnICwgJ3BsdWdpbi52aWRlby5TcG9ydHNEZXZpbCcgLCAncGx1Z2luLnN0cmVhbS52YXVnaG5saXZlLnR2JyAsICdwbHVnaW4udmlkZW8uWmVtVFYtc2hhbmknIF0KaWYgNTcgLSA1NzogbzBPTzAKY2xhc3MgaUkgKCB1cmxsaWIyIC4gSFRUUEVycm9yUHJvY2Vzc29yICkgOgogZGVmIGh0dHBfcmVzcG9uc2UgKCBzZWxmICwgcmVxdWVzdCAsIHJlc3BvbnNlICkgOgogIHJldHVybiByZXNwb25zZQogaHR0cHNfcmVzcG9uc2UgPSBodHRwX3Jlc3BvbnNlCiBpZiAyMiAtIDIyOiBpMWlJaTExaUlJaTFJICUgbzAwb29vMApvbyA9IEZhbHNlIDsKaWYgb28gOgogaWYgNTQgLSA1NDogT28wb29PMG9vMG9PICsgT28wb29PMG9vMG9PICUgb29PMDBvT29vICUgSWkgLyBpSTExSTFJSTFJMUkgLiBPbzBvb08wb28wb08KIGlmIDU3IC0gNTc6IG8wMG9vbzAgJSBpaQogdHJ5IDoKICBpbXBvcnQgcHlzcmMgLiBweWRldmQgYXMgcHlkZXZkCiAgaWYgNjEgLSA2MTogbzAwIC4gaUkxMUkxSUkxSTFJICogSTExaTExSWkgLiBPME9PbyAlIGkxaUlpMTFpSUlpMUkKICBweWRldmQgLiBzZXR0cmFjZSAoICdsb2NhbGhvc3QnICwgc3Rkb3V0VG9TZXJ2ZXIgPSBUcnVlICwgc3RkZXJyVG9TZXJ2ZXIgPSBUcnVlICkKIGV4Y2VwdCBJbXBvcnRFcnJvciA6CiAgc3lzIC4gc3RkZXJyIC4gd3JpdGUgKCAiRXJyb3I6ICIgKwogIllvdSBtdXN0IGFkZCBvcmcucHl0aG9uLnB5ZGV2LmRlYnVnLnB5c3JjIHRvIHlvdXIgUFlUSE9OUEFUSC4iICkKICBzeXMgLiBleGl0ICggMSApCiAgaWYgNzIgLSA3MjogT28wb29PMG9vMG9PCiAgaWYgNjMgLSA2MzogbzAwb29vMApPMDAgPSB4Ym1jYWRkb24gLiBBZGRvbiAoICdwbHVnaW4udmlkZW8uZ29sZGVudHYnICkKaUlJMTFpID0gTzAwIC4gZ2V0QWRkb25JbmZvICggJ3ZlcnNpb24nICkKTzBPMDBvME9PTzAgPSB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoIE8wMCAuIGdldEFkZG9uSW5mbyAoICdwcm9maWxlJyApIC4gZGVjb2RlICggJ3V0Zi04JyApICkKSWkxaUlJSWkxaWkgPSB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoIE8wMCAuIGdldEFkZG9uSW5mbyAoICdwYXRoJyApIC4gZGVjb2RlICggJ3V0Zi04JyApICkKbzBvbzBvME8wME9PID0gb3MgLiBwYXRoIC4gam9pbiAoIE8wTzAwbzBPT08wICwgJ2Zhdm9yaXRlcycgKQpvMG9PID0gb3MgLiBwYXRoIC4gam9pbiAoIE8wTzAwbzBPT08wICwgJ2hpc3RvcnknICkKSTFpMWlpaSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPME8wMG8wT09PMCAsICdsaXN0X3JldmlzaW9uJyApCmkxaWlJMTFJID0gb3MgLiBwYXRoIC4gam9pbiAoIElpMWlJSUlpMWlpICwgJ2ljb24ucG5nJyApCmlpaWkgPSBvcyAuIHBhdGggLiBqb2luICggSWkxaUlJSWkxaWkgLCAnZmFuYXJ0LmpwZycgKQpvTzBvME8wT09Pb28wID0gb3MgLiBwYXRoIC4gam9pbiAoIE8wTzAwbzBPT08wICwgJ3NvdXJjZV9maWxlJyApCklpSWlpSSA9IE8wTzAwbzBPT08wCkkxSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPME8wMG8wT09PMCAsICdMaXZld2ViVFYnICkKZG93bmxvYWRlciA9IGRvd25sb2FkZXIgLiBTaW1wbGVEb3dubG9hZGVyICggKQpvT08wMG9PTyA9IE8wMCAuIGdldFNldHRpbmcgKCAnZGVidWcnICkKaWYgNzUgLSA3NTogaWkxSSAvIGlpIC0gbzBvMDBPbzBPIC8gb09vTzBvbzBPT09vIC4gb29PME9PMDAwbyAtIGlpMUkKaWYgb3MgLiBwYXRoIC4gZXhpc3RzICggbzBvbzBvME8wME9PICkgPT0gVHJ1ZSA6CiBPMDAwT08wID0gb3BlbiAoIG8wb28wbzBPMDBPTyApIC4gcmVhZCAoICkKZWxzZSA6IE8wMDBPTzAgPSBbIF0KaWYgNDMgLSA0Mzogb29PMDBvT29vIC0gbzBvMDBPbzBPICUgSTExaTExSWkgLiBJMWkxaUkxaQpvMDBPb29Pb29vID0gWyB7ICJ1cmwiIDogImh0dHA6Ly9sZWdpb253b3JsZHR2LmNvbS9zZWN1cmUvZ29sZGVubWFpbi50eHQiICwgImZhbmFydCIgOiAiaHR0cHM6Ly9pbWcuZm90b3IuY29tL3NoYXJlLzE0ODM1ODIwMDQyNTNpcEouanBnIiB9IF0KaWYgOTcgLSA5NzogTzBPT28gLSBPbzBvb08wb28wb08gKiBJaSAvIG9Pb08wb28wT09PbyAlIG9vTzAwb09vbyAtIGlpCmlmIDU5IC0gNTk6IG8wbzAwT28wTyArIEkxMWkxMUlpICsgT28wb08wb29vICUgSTExaTExSWkKaWYgNzAgLSA3MDogbzAwICogSWlpMWlpMUlJMTFpCmRlZiBpMUlJMSAoIHN0cmluZyApIDoKIGlmIG9PTzAwb09PID09ICd0cnVlJyA6CiAgeGJtYyAuIGxvZyAoICJbYWRkb24ubGl2ZS5zdHJlYW1zcHJvLSVzXTogJXMiICUgKCBpSUkxMWkgLCBzdHJpbmcgKSApCiAgaWYgNjYgLSA2NjogaWkgKyBvMDBvb28wICsgbzAwb29vMCAtIGlpMUkKICBpZiA1NSAtIDU1OiBPbzBvb08wb28wb08gKyBPME9PbyAuIGlpMUkgLSBJaWkxaWkxSUkxMWkgLiBvMG8wME9vME8gLSBPME9PbwpkZWYgbzBPICggdXJsICwgaGVhZGVycyA9IE5vbmUgKSA6CiB0cnkgOgogIGlmIGhlYWRlcnMgaXMgTm9uZSA6CiAgIGhlYWRlcnMgPSB7ICdVc2VyLWFnZW50JyA6ICdUSEVIT09EJyB9CiAgTzAwb08gPSB1cmxsaWIyIC4gUmVxdWVzdCAoIHVybCAsIE5vbmUgLCBoZWFkZXJzICkKICBJMTFpMUkxSSA9IHVybGxpYjIgLiB1cmxvcGVuICggTzAwb08gKQogIG9PME9vID0gSTExaTFJMUkgLiByZWFkICggKQogIEkxMWkxSTFJIC4gY2xvc2UgKCApCiAgcmV0dXJuIG9PME9vCiBleGNlcHQgdXJsbGliMiAuIFVSTEVycm9yICwgaUkxIDoKICBpMUlJMSAoICdVUkw6ICcgKyB1cmwgKQogIGlmIGhhc2F0dHIgKCBpSTEgLCAnY29kZScgKSA6CiAgIGkxSUkxICggJ1dlIGZhaWxlZCB3aXRoIGVycm9yIGNvZGUgLSAlcy4nICUgaUkxIC4gY29kZSApCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihnb2xkZW50dixXZSBmYWlsZWQgd2l0aCBlcnJvciBjb2RlIC0gIiArIHN0ciAoIGlJMSAuIGNvZGUgKSArICIsMTAwMDAsIiArIGkxaWlJMTFJICsgIikiICkKICBlbGlmIGhhc2F0dHIgKCBpSTEgLCAncmVhc29uJyApIDoKICAgaTFJSTEgKCAnV2UgZmFpbGVkIHRvIHJlYWNoIGEgc2VydmVyLicgKQogICBpMUlJMSAoICdSZWFzb246ICVzJyAlIGlJMSAuIHJlYXNvbiApCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihnb2xkZW50dixXZSBmYWlsZWQgdG8gcmVhY2ggYSBzZXJ2ZXIuIC0gIiArIHN0ciAoIGlJMSAuIHJlYXNvbiApICsgIiwxMDAwMCwiICsgaTFpaUkxMUkgKyAiKSIgKQogICBpZiA1NCAtIDU0OiBJaWlJIC0gSTExaTExSWkgKyBpaQogICBpZiA3MCAtIDcwOiBvMDBvb28wIC8gSTFpMWlJMWkgLiBvMDAgJSBpMWlJaTExaUlJaTFJCmRlZiBPT29PTzAwT09PME9PICggKSA6CiB0cnkgOgogIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG8wb28wbzBPMDBPTyApID09IFRydWUgOgogICBPMDAwT08wID0gb3BlbiAoIG8wb28wbzBPMDBPTyApIC4gcmVhZCAoICkKICAgaWYgTzAwME9PMCA9PSAiW10iIDoKICAgIG9zIC4gcmVtb3ZlICggbzBvbzBvME8wME9PICkKICAgZWxzZSA6CiAgICBpSTFJMTExSWkxMTFpICggJ1tDT0xPUiB5ZWxsb3ddW0JdLSBNSVMgQ0FOQUxFUyBGQVZPUklUT1NbL0NPTE9SXVsvQl0nICwgJ3VybCcgLCA0ICwgb3MgLiBwYXRoIC4gam9pbiAoIElpMWlJSUlpMWlpICwgJ3Jlc291cmNlcycgLCAnZmF2b3JpdGUucG5nJyApICwgaWlpaSAsICcnICwgJycgLCAnJyAsICcnICkKICAgIGlJMUkxMTFJaTExMWkgKCAnJyAsICcnICwgMTAwICwgJycgLCBpaWlpICwgJycgLCAnJyAsICcnICwgJycgKQogICAgaWYgNyAtIDc6IE8wT09vICogaTExaWkxMWlJaTExaSAlIG8wT08wIC4gT28wb08wb29vCiAgSWkxaUlpSUkxaWkxID0gbzAwT29vT29vbwogIGlmIGxlbiAoIElpMWlJaUlJMWlpMSApID4gMSA6CiAgIGZvciBvb09vb28wMDBvT08gaW4gSWkxaUlpSUkxaWkxIDoKICAgIHRyeSA6CiAgICAgaWYgNTkgLSA1OTogb29PME9PMDAwbyArIGlpICogb09vTzBvbzBPT09vICsgaWkxSQogICAgIGlmIGlzaW5zdGFuY2UgKCBvb09vb28wMDBvT08gLCBsaXN0ICkgOgogICAgICBpSTFJMTExSWkxMTFpICggb29Pb29vMDAwb09PIFsgMCBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgb29Pb29vMDAwb09PIFsgMSBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIGkxaWlJMTFJICwgaWlpaSAsICcnICwgJycgLCAnJyAsICcnICwgJ3NvdXJjZScgKQogICAgIGVsc2UgOgogICAgICBPbzBPb08wMG9PTzBvID0gaTFpaUkxMUkKICAgICAgT09PMDBPID0gaWlpaQogICAgICBPT29PTzBvbzBvb08gPSAnJwogICAgICBPMG8wTzAwT28wbzAgPSAnJwogICAgICBjcmVkaXRzID0gJycKICAgICAgTzAwTzBvT08wME8wMCA9ICcnCiAgICAgIGlmIG9vT29vbzAwMG9PTyAuIGhhc19rZXkgKCAndGh1bWJuYWlsJyApIDoKICAgICAgIE9vME9vTzAwb09PMG8gPSBvb09vb28wMDBvT08gWyAndGh1bWJuYWlsJyBdCiAgICAgIGlmIG9vT29vbzAwMG9PTyAuIGhhc19rZXkgKCAnZmFuYXJ0JyApIDoKICAgICAgIE9PTzAwTyA9IG9vT29vbzAwMG9PTyBbICdmYW5hcnQnIF0KICAgICAgaWYgb29Pb29vMDAwb09PIC4gaGFzX2tleSAoICdkZXNjcmlwdGlvbicgKSA6CiAgICAgICBPT29PTzBvbzBvb08gPSBvb09vb28wMDBvT08gWyAnZGVzY3JpcHRpb24nIF0KICAgICAgaWYgb29Pb29vMDAwb09PIC4gaGFzX2tleSAoICdkYXRlJyApIDoKICAgICAgIE8wbzBPMDBPbzBvMCA9IG9vT29vbzAwMG9PTyBbICdkYXRlJyBdCiAgICAgIGlmIG9vT29vbzAwMG9PTyAuIGhhc19rZXkgKCAnZ2VucmUnICkgOgogICAgICAgTzAwTzBvT08wME8wMCA9IG9vT29vbzAwMG9PTyBbICdnZW5yZScgXQogICAgICBpZiBvb09vb28wMDBvT08gLiBoYXNfa2V5ICggJ2NyZWRpdHMnICkgOgogICAgICAgY3JlZGl0cyA9IG9vT29vbzAwMG9PTyBbICdjcmVkaXRzJyBdCiAgICAgIGlJMUkxMTFJaTExMWkgKCBvb09vb28wMDBvT08gWyAndGl0bGUnIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBvb09vb28wMDBvT08gWyAndXJsJyBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIE9vME9vTzAwb09PMG8gLCBPT08wME8gLCBPT29PTzBvbzBvb08gLCBPMDBPMG9PTzAwTzAwICwgTzBvME8wME9vMG8wICwgY3JlZGl0cyAsICdzb3VyY2UnICkKICAgIGV4Y2VwdCA6IHRyYWNlYmFjayAuIHByaW50X2V4YyAoICkKICBlbHNlIDoKICAgaWYgbGVuICggSWkxaUlpSUkxaWkxICkgPT0gMSA6CiAgICBpZiBpc2luc3RhbmNlICggSWkxaUlpSUkxaWkxIFsgMCBdICwgbGlzdCApIDoKICAgICBpMSAoIElpMWlJaUlJMWlpMSBbIDAgXSBbIDEgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIGlpaWkgKQogICAgZWxzZSA6CiAgICAgaTEgKCBJaTFpSWlJSTFpaTEgWyAwIF0gWyAndXJsJyBdICwgSWkxaUlpSUkxaWkxIFsgMCBdIFsgJ2ZhbmFydCcgXSApCiBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCApCiBpZiA1NyAtIDU3OiBvMG8wME9vME8gLyBvb08wMG9Pb28gJSBpMTFpaTExaUlpMTFpIC8gb29PMDBvT29vIC4gb09vTzBvbzBPT09vIC8gbzBvMDBPbzBPCiBpZiA4OSAtIDg5OiBvT29PMG9vME9PT28KZGVmIE9PMG9Pb09PMG9PTzAgKCB1cmwgPSBOb25lICkgOgogaWYgdXJsIGlzIE5vbmUgOgogIGlmIG5vdCBPMDAgLiBnZXRTZXR0aW5nICggIm5ld19maWxlX3NvdXJjZSIgKSA9PSAiIiA6CiAgIG9PME9Pb28wT08gPSBPMDAgLiBnZXRTZXR0aW5nICggJ25ld19maWxlX3NvdXJjZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKQogIGVsaWYgbm90IE8wMCAuIGdldFNldHRpbmcgKCAibmV3X3VybF9zb3VyY2UiICkgPT0gIiIgOgogICBvTzBPT29vME9PID0gTzAwIC4gZ2V0U2V0dGluZyAoICduZXdfdXJsX3NvdXJjZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKQogZWxzZSA6CiAgb08wT09vbzBPTyA9IHVybAogaWYgb08wT09vbzBPTyA9PSAnJyBvciBvTzBPT29vME9PIGlzIE5vbmUgOgogIHJldHVybgogaTFJSTEgKCAnQWRkaW5nIE5ldyBTb3VyY2U6ICcgKyBvTzBPT29vME9PIC4gZW5jb2RlICggJ3V0Zi04JyApICkKIGlmIDY1IC0gNjU6IG8wMG9vbzAgLiBpSTExSTFJSTFJMUkgLyBvMG8wME9vME8gLSBvMDBvb28wCiBpaWkxaTFpaWlpSWkgPSBOb25lCiBpZiAyIC0gMjogSTExaTExSWkgLyBvMG8wME9vME8gLyBJaWlJICUgb09vTzBvbzBPT09vICUgbzAwb29vMAogb08wT28gPSBvMG8wME9PMCAoIG9PME9Pb28wT08gKQogaWYgNyAtIDc6IE9vMG9vTzBvbzBvTyArIG9vTzAwb09vbyArIG8wbzAwT28wTwogaWYgaXNpbnN0YW5jZSAoIG9PME9vICwgQmVhdXRpZnVsU09BUCApIDoKICBpZiBvTzBPbyAuIGZpbmQgKCAnY2hhbm5lbHNfaW5mbycgKSA6CiAgIGlpaTFpMWlpaWlJaSA9IG9PME9vIC4gY2hhbm5lbHNfaW5mbwogIGVsaWYgb08wT28gLiBmaW5kICggJ2l0ZW1zX2luZm8nICkgOgogICBpaWkxaTFpaWlpSWkgPSBvTzBPbyAuIGl0ZW1zX2luZm8KIGlmIGlpaTFpMWlpaWlJaSA6CiAgSWlPME9PTyA9IHsgfQogIElpTzBPT08gWyAndXJsJyBdID0gb08wT09vbzBPTwogIHRyeSA6IElpTzBPT08gWyAndGl0bGUnIF0gPSBpaWkxaTFpaWlpSWkgLiB0aXRsZSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBJaU8wT09PIFsgJ3RodW1ibmFpbCcgXSA9IGlpaTFpMWlpaWlJaSAuIHRodW1ibmFpbCAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBJaU8wT09PIFsgJ2ZhbmFydCcgXSA9IGlpaTFpMWlpaWlJaSAuIGZhbmFydCAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBJaU8wT09PIFsgJ2dlbnJlJyBdID0gaWlpMWkxaWlpaUlpIC4gZ2VucmUgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogSWlPME9PTyBbICdkZXNjcmlwdGlvbicgXSA9IGlpaTFpMWlpaWlJaSAuIGRlc2NyaXB0aW9uIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IElpTzBPT08gWyAnZGF0ZScgXSA9IGlpaTFpMWlpaWlJaSAuIGRhdGUgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogSWlPME9PTyBbICdjcmVkaXRzJyBdID0gaWlpMWkxaWlpaUlpIC4gY3JlZGl0cyAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKIGVsc2UgOgogIGlmICcvJyBpbiBvTzBPT29vME9PIDoKICAgSUkxMWlJaUlJSWlJID0gb08wT09vbzBPTyAuIHNwbGl0ICggJy8nICkgWyAtIDEgXSAuIHNwbGl0ICggJy4nICkgWyAwIF0KICBpZiAnXFwnIGluIG9PME9Pb28wT08gOgogICBJSTExaUlpSUlJaUkgPSBvTzBPT29vME9PIC4gc3BsaXQgKCAnXFwnICkgWyAtIDEgXSAuIHNwbGl0ICggJy4nICkgWyAwIF0KICBpZiAnJScgaW4gSUkxMWlJaUlJSWlJIDoKICAgSUkxMWlJaUlJSWlJID0gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggSUkxMWlJaUlJSWlJICkKICBvMG8gPSB4Ym1jIC4gS2V5Ym9hcmQgKCBJSTExaUlpSUlJaUkgLCAnRGlzcGxheWVkIE5hbWUsIFJlbmFtZT8nICkKICBvMG8gLiBkb01vZGFsICggKQogIGlmICggbzBvIC4gaXNDb25maXJtZWQgKCApID09IEZhbHNlICkgOgogICByZXR1cm4KICBvMDBPb29PTzAwMCA9IG8wbyAuIGdldFRleHQgKCApCiAgaWYgbGVuICggbzAwT29vT08wMDAgKSA9PSAwIDoKICAgcmV0dXJuCiAgSWlPME9PTyA9IHsgfQogIElpTzBPT08gWyAndGl0bGUnIF0gPSBvMDBPb29PTzAwMAogIElpTzBPT08gWyAndXJsJyBdID0gb08wT09vbzBPTwogIElpTzBPT08gWyAnZmFuYXJ0JyBdID0gT09PMDBPCiAgaWYgOTcgLSA5NzogSWlpMWlpMUlJMTFpICsgT28wb29PMG9vMG9PIC8gaUkxMUkxSUkxSTFJIC8gbzAwCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBvTzBvME8wT09Pb28wICkgPT0gRmFsc2UgOgogIEkxMTExSUlpID0gWyBdCiAgSTExMTFJSWkgLiBhcHBlbmQgKCBJaU8wT09PICkKICBPbzBvTyA9IG9wZW4gKCBvTzBvME8wT09Pb28wICwgInciICkKICBPbzBvTyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggSTExMTFJSWkgKSApCiAgT28wb08gLiBjbG9zZSAoICkKIGVsc2UgOgogIElpMWlJaUlJMWlpMSA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBvTzBvME8wT09Pb28wICwgInIiICkgLiByZWFkICggKSApCiAgSWkxaUlpSUkxaWkxIC4gYXBwZW5kICggSWlPME9PTyApCiAgT28wb08gPSBvcGVuICggb08wbzBPME9PT29vMCAsICJ3IiApCiAgT28wb08gLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIElpMWlJaUlJMWlpMSApICkKICBPbzBvTyAuIGNsb3NlICggKQogTzAwIC4gc2V0U2V0dGluZyAoICduZXdfdXJsX3NvdXJjZScgLCAiIiApCiBPMDAgLiBzZXRTZXR0aW5nICggJ25ld19maWxlX3NvdXJjZScgLCAiIiApCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oQWRyeWFuTGlzdCxOZXcgc291cmNlIGFkZGVkLiw1MDAwLCIgKyBpMWlpSTExSSArICIpIiApCiBpZiBub3QgdXJsIGlzIE5vbmUgOgogIGlmICd4Ym1jcGx1cy54Yi5mdW5waWMuZGUnIGluIHVybCA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5VcGRhdGUoJXM/bW9kZT0xNCxyZXBsYWNlKSIgJSBzeXMgLiBhcmd2IFsgMCBdICkKICBlbGlmICdjb21tdW5pdHktbGlua3MnIGluIHVybCA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5VcGRhdGUoJXM/bW9kZT0xMCxyZXBsYWNlKSIgJSBzeXMgLiBhcmd2IFsgMCBdICkKIGVsc2UgOiBPMDAgLiBvcGVuU2V0dGluZ3MgKCApCiBpZiAxIC0gMTogaTExaWkxMWlJaTExaSAtIG8wT08wIC4gSTFpMWlJMWkgLiBpMTFpaTExaUlpMTFpIC8gaTFpSWkxMWlJSWkxSSArIEkxaTFpSTFpCiBpZiA3OCAtIDc4OiBvMG8wME9vME8gLiBvME9PMCAuIG9vTzBPTzAwMG8gJSBPbzBvb08wb28wb08KZGVmIGkxaUlpICggbmFtZSApIDoKIElpMWlJaUlJMWlpMSA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBvTzBvME8wT09Pb28wICwgInIiICkgLiByZWFkICggKSApCiBmb3Igb29PT29vb29vbyBpbiByYW5nZSAoIGxlbiAoIElpMWlJaUlJMWlpMSApICkgOgogIGlmIGlzaW5zdGFuY2UgKCBJaTFpSWlJSTFpaTEgWyBvb09Pb29vb29vIF0gLCBsaXN0ICkgOgogICBpZiBJaTFpSWlJSTFpaTEgWyBvb09Pb29vb29vIF0gWyAwIF0gPT0gbmFtZSA6CiAgICBkZWwgSWkxaUlpSUkxaWkxIFsgb29PT29vb29vbyBdCiAgICBPbzBvTyA9IG9wZW4gKCBvTzBvME8wT09Pb28wICwgInciICkKICAgIE9vMG9PIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBJaTFpSWlJSTFpaTEgKSApCiAgICBPbzBvTyAuIGNsb3NlICggKQogICAgYnJlYWsKICBlbHNlIDoKICAgaWYgSWkxaUlpSUkxaWkxIFsgb29PT29vb29vbyBdIFsgJ3RpdGxlJyBdID09IG5hbWUgOgogICAgZGVsIElpMWlJaUlJMWlpMSBbIG9vT09vb29vb28gXQogICAgT28wb08gPSBvcGVuICggb08wbzBPME9PT29vMCAsICJ3IiApCiAgICBPbzBvTyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggSWkxaUlpSUkxaWkxICkgKQogICAgT28wb08gLiBjbG9zZSAoICkKICAgIGJyZWFrCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Db250YWluZXIuUmVmcmVzaCIgKQogaWYgMSAtIDE6IGkxaUlpMTFpSUlpMUkgLyBJaWlJICUgbzAwICogT28wb08wb29vIC4gSWkKIGlmIDIgLSAyOiBJaWkxaWkxSUkxMWkgKiBJMWkxaUkxaSAtIGlJMTFJMUlJMUkxSSArIEkxMWkxMUlpIC4gbzBPTzAgJSBvMDAKZGVmIG9vT09Pb09vb09vTyAoIHVybCAsIGJyb3dzZSA9IEZhbHNlICkgOgogaWYgdXJsIGlzIE5vbmUgOgogIHVybCA9ICdodHRwOi8veGJtY3BsdXMueGIuZnVucGljLmRlL3d3dy1kYXRhL2ZpbGVzeXN0ZW0vJwogbzAwb29vTzBPbyA9IEJlYXV0aWZ1bFNvdXAgKCBvME8gKCB1cmwgKSAsIGNvbnZlcnRFbnRpdGllcyA9IEJlYXV0aWZ1bFNvdXAgLiBIVE1MX0VOVElUSUVTICkKIGZvciBvb09vb28wMDBvT08gaW4gbzAwb29vTzBPbyAoICdhJyApIDoKICBvME8wT09PME9vbyA9IG9vT29vbzAwMG9PTyBbICdocmVmJyBdCiAgaWYgbm90IG8wTzBPT08wT29vIC4gc3RhcnRzd2l0aCAoICc/JyApIDoKICAgaWlJaUkgPSBvb09vb28wMDBvT08gLiBzdHJpbmcKICAgaWYgaWlJaUkgbm90IGluIFsgJ1BhcmVudCBEaXJlY3RvcnknICwgJ3JlY3ljbGVfYmluLycgXSA6CiAgICBpZiBvME8wT09PME9vbyAuIGVuZHN3aXRoICggJy8nICkgOgogICAgIGlmIGJyb3dzZSA6CiAgICAgIGlJMUkxMTFJaTExMWkgKCBpaUlpSSAsIHVybCArIG8wTzBPT08wT29vICwgMTUgLCBpMWlpSTExSSAsIE9PTzAwTyAsICcnICwgJycgLCAnJyApCiAgICAgZWxzZSA6CiAgICAgIGlJMUkxMTFJaTExMWkgKCBpaUlpSSAsIHVybCArIG8wTzBPT08wT29vICwgMTQgLCBpMWlpSTExSSAsIE9PTzAwTyAsICcnICwgJycgLCAnJyApCiAgICBlbGlmIG8wTzBPT08wT29vIC4gZW5kc3dpdGggKCAnLnhtbCcgKSA6CiAgICAgaWYgYnJvd3NlIDoKICAgICAgaUkxSTExMUlpMTExaSAoIGlpSWlJICwgdXJsICsgbzBPME9PTzBPb28gLCAxICwgaTFpaUkxMUkgLCBPT08wME8gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICAgIGVsc2UgOgogICAgICBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBvTzBvME8wT09Pb28wICkgPT0gVHJ1ZSA6CiAgICAgICBpZiBpaUlpSSBpbiBvMDBPb29Pb29vIDoKICAgICAgICBpSTFJMTExSWkxMTFpICggaWlJaUkgKyAnIChpbiB1c2UpJyAsIHVybCArIG8wTzBPT08wT29vICwgMTEgLCBpMWlpSTExSSAsIE9PTzAwTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgICBlbHNlIDoKICAgICAgICBpSTFJMTExSWkxMTFpICggaWlJaUkgLCB1cmwgKyBvME8wT09PME9vbyAsIDExICwgaTFpaUkxMUkgLCBPT08wME8gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICAgICBlbHNlIDoKICAgICAgIGlJMUkxMTFJaTExMWkgKCBpaUlpSSAsIHVybCArIG8wTzBPT08wT29vICwgMTEgLCBpMWlpSTExSSAsIE9PTzAwTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgICBpZiA2IC0gNjogT28wb08wb29vIC4gbzBPTzAgKiBvT29PMG9vME9PT28gLSBvMDBvb28wIC0gT28wb08wb29vCiAgICAgICBpZiA0NSAtIDQ1OiBJMTFpMTFJaSAtIGlpICsgaUkxMUkxSUkxSTFJIC4gSTExaTExSWkgKiBJMWkxaUkxaQpkZWYgb09PTyAoIGJyb3dzZSA9IEZhbHNlICkgOgogSWlJSSA9ICdodHRwOi8vY29tbXVuaXR5LWxpbmtzLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay8nCiBvMDBvb29PME9vID0gQmVhdXRpZnVsU291cCAoIG8wTyAoIElpSUkgKSAsIGNvbnZlcnRFbnRpdGllcyA9IEJlYXV0aWZ1bFNvdXAgLiBIVE1MX0VOVElUSUVTICkKIGlJSUkxID0gbzAwb29vTzBPbyAoICd1bCcgKSBbIDAgXSAoICdsaScgKSBbIDEgOiBdCiBmb3Igb29Pb29vMDAwb09PIGluIGlJSUkxIDoKICBpaUlpSSA9IG9vT29vbzAwMG9PTyAoICdhJyApIFsgMCBdIFsgJ2hyZWYnIF0KICBpZiBicm93c2UgOgogICBpSTFJMTExSWkxMTFpICggaWlJaUkgLCBJaUlJICsgaWlJaUkgLCAxICwgaTFpaUkxMUkgLCBPT08wME8gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogIGVsc2UgOgogICBpSTFJMTExSWkxMTFpICggaWlJaUkgLCBJaUlJICsgaWlJaUkgLCAxMSAsIGkxaWlJMTFJICwgT09PMDBPICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgaWYgNjUgLSA2NTogbzBvMDBPbzBPCiAgIGlmIDY4IC0gNjg6IE9vMG9vTzBvbzBvTyAlIG9vTzAwb09vbwpkZWYgbzBvMDBPTzAgKCB1cmwgLCBkYXRhID0gTm9uZSApIDoKIGdsb2JhbCBvbzAwMCAsIGkxaUlJSWlJMUkKIGkxaUlJSWlJMUkgPSBGYWxzZQogaWYgdXJsIC4gc3RhcnRzd2l0aCAoICdodHRwOi8vJyApIG9yIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cHM6Ly8nICkgOgogIG9vTzAwT08wID0gRmFsc2UKICBpZiAnJCRUU0RPV05MT0FERVIkJCcgaW4gdXJsIDoKICAgaTFpSUlJaUkxSSA9IFRydWUKICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICIkJFRTRE9XTkxPQURFUiQkIiAsICIiICkKICBpZiAnJCRMU1Byb0VuY0tleT0nIGluIHVybCA6CiAgIG9vTzAwT08wID0gdXJsIC4gc3BsaXQgKCAnJCRMU1Byb0VuY0tleT0nICkgWyAxIF0gLiBzcGxpdCAoICckJCcgKSBbIDAgXQogICBpMTExMTFJSUlJSSA9ICckJExTUHJvRW5jS2V5PSVzJCQnICUgb29PMDBPTzAKICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoIGkxMTExMUlJSUlJICwgIiIgKQogICBpZiAxOSAtIDE5OiBvT29PMG9vME9PT28gKiBpaTFJCiAgZGF0YSA9IG8wTyAoIHVybCApCiAgaWYgb29PMDBPTzAgOgogICBpbXBvcnQgcHlhZXMKICAgb29PMDBPTzAgPSBvb08wME9PMCAuIGVuY29kZSAoICJhc2NpaSIgKQogICBwcmludCBvb08wME9PMAogICBpaTExMWlJMWlJaTEgPSAxNiAtIGxlbiAoIG9vTzAwT08wICkKICAgb29PMDBPTzAgPSBvb08wME9PMCArICggY2hyICggMCApICogKCBpaTExMWlJMWlJaTEgKSApCiAgIHByaW50IHJlcHIgKCBvb08wME9PMCApCiAgIGRhdGEgPSBiYXNlNjQgLiBiNjRkZWNvZGUgKCBkYXRhICkKICAgT09PID0gcHlhZXMgLiBuZXcgKCBvb08wME9PMCAsIHB5YWVzIC4gTU9ERV9FQ0IgLCBJViA9IE5vbmUgKQogICBkYXRhID0gT09PIC4gZGVjcnlwdCAoIGRhdGEgKSAuIHNwbGl0ICggJ1wwJyApIFsgMCBdCiAgIGlmIDY4IC0gNjg6IG9vTzBPTzAwMG8gKyBJMWkxaUkxaQogIGlmIHJlIC4gc2VhcmNoICggIiNFWFRNM1UiICwgZGF0YSApIG9yICdtM3UnIGluIHVybCA6CiAgIGlmIDQ1IC0gNDU6IG8wMCAvIG8wMCArIG9vTzAwb09vbyArIE8wT09vCiAgIHJldHVybiBkYXRhCiBlbGlmIGRhdGEgPT0gTm9uZSA6CiAgaWYgbm90ICcvJyBpbiB1cmwgb3Igbm90ICdcXCcgaW4gdXJsIDoKICAgaWYgNDcgLSA0NzogSWlpSSArIE8wT09vCiAgIHVybCA9IG9zIC4gcGF0aCAuIGpvaW4gKCBJMUkgLCB1cmwgKQogIGlmIHhibWN2ZnMgLiBleGlzdHMgKCB1cmwgKSA6CiAgIGlmIHVybCAuIHN0YXJ0c3dpdGggKCAic21iOi8vIiApIG9yIHVybCAuIHN0YXJ0c3dpdGggKCAibmZzOi8vIiApIDoKICAgIE9vTyA9IHhibWN2ZnMgLiBjb3B5ICggdXJsICwgb3MgLiBwYXRoIC4gam9pbiAoIE8wTzAwbzBPT08wICwgJ3RlbXAnICwgJ3NvcmNlX3RlbXAudHh0JyApICkKICAgIGlmIE9vTyA6CiAgICAgZGF0YSA9IG9wZW4gKCBvcyAuIHBhdGggLiBqb2luICggTzBPMDBvME9PTzAgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgLCAiciIgKSAuIHJlYWQgKCApCiAgICAgeGJtY3ZmcyAuIGRlbGV0ZSAoIG9zIC4gcGF0aCAuIGpvaW4gKCBPME8wMG8wT09PMCAsICd0ZW1wJyAsICdzb3JjZV90ZW1wLnR4dCcgKSApCiAgICBlbHNlIDoKICAgICBpMUlJMSAoICJmYWlsZWQgdG8gY29weSBmcm9tIHNtYjoiICkKICAgZWxzZSA6CiAgICBkYXRhID0gb3BlbiAoIHVybCAsICdyJyApIC4gcmVhZCAoICkKICAgIGlmIHJlIC4gbWF0Y2ggKCAiI0VYVE0zVSIgLCBkYXRhICkgb3IgJ20zdScgaW4gdXJsIDoKICAgICBpZiA4OCAtIDg4OiBvMDAgLiBvb08wT08wMDBvICogb29PME9PMDAwbyAlIG9vTzAwb09vbwogICAgIHJldHVybiBkYXRhCiAgZWxzZSA6CiAgIGkxSUkxICggIlNvdXAgRGF0YSBub3QgZm91bmQhIiApCiAgIHJldHVybgogaWYgJzxTZXRWaWV3TW9kZT4nIGluIGRhdGEgOgogIHRyeSA6CiAgIG9vMDAwID0gcmUgLiBmaW5kYWxsICggJzxTZXRWaWV3TW9kZT4oLio/KTwnICwgZGF0YSApIFsgMCBdCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJDb250YWluZXIuU2V0Vmlld01vZGUoJXMpIiAlIG9vMDAwICkKICAgcHJpbnQgJ2RvbmUgc2V0dmlldycgLCBvbzAwMAogIGV4Y2VwdCA6IHBhc3MKIHJldHVybiBCZWF1dGlmdWxTT0FQICggZGF0YSAsIGNvbnZlcnRFbnRpdGllcyA9IEJlYXV0aWZ1bFN0b25lU291cCAuIFhNTF9FTlRJVElFUyApCiBpZiAxNSAtIDE1OiBpaTFJICogSTExaTExSWkgKyBJaQogaWYgNiAtIDY6IE8wT09vIC8gSWkgKyBvMDAgKiBvME9PMApkZWYgaTEgKCB1cmwgLCBmYW5hcnQgLCBkYXRhID0gTm9uZSApIDoKIG8wMG9vb08wT28gPSBvMG8wME9PMCAoIHVybCAsIGRhdGEgKQogaWYgODAgLSA4MDogb29PME9PMDAwbwogaWYgaXNpbnN0YW5jZSAoIG8wMG9vb08wT28gLCBCZWF1dGlmdWxTT0FQICkgOgogIGlmIDgzIC0gODM6IEkxaTFpSTFpIC4gSWkgKyBvb08wT08wMDBvIC4gSWlpSSAqIEkxaTFpSTFpCiAgaWYgbGVuICggbzAwb29vTzBPbyAoICdjaGFubmVscycgKSApID4gMCBhbmQgTzAwIC4gZ2V0U2V0dGluZyAoICdkb25vdHNob3dieWNoYW5uZWxzJyApID09ICdmYWxzZScgOgogICBvb29PMCA9IG8wMG9vb08wT28gKCAnY2hhbm5lbCcgKQogICBmb3IgaUlpSWlpSUlpSUlpIGluIG9vb08wIDoKICAgIGlmIDk4IC0gOTg6IElpaUkKICAgIGlmIDUxIC0gNTE6IGkxaUlpMTFpSUlpMUkgLSBvME9PMCArIG9vTzBPTzAwMG8gKiBvMDBvb28wIC4gSTFpMWlJMWkgKyBvME9PMAogICAgT29PMG8gPSAnJwogICAgb08wbzBPb29vbyA9IDAKICAgIHRyeSA6CiAgICAgT29PMG8gPSBpSWlJaWlJSWlJSWkgKCAnZXh0ZXJuYWxsaW5rJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgb08wbzBPb29vbyA9IGxlbiAoIGlJaUlpaUlJaUlJaSAoICdleHRlcm5hbGxpbmsnICkgKQogICAgZXhjZXB0IDogcGFzcwogICAgaWYgOTQgLSA5NDogSWlpSSAqIG8wMG9vbzAgLyBpMWlJaTExaUlJaTFJIC8gbzAwb29vMAogICAgaWYgb08wbzBPb29vbyA+IDEgOiBPb08wbyA9ICcnCiAgICBpZiA4NyAtIDg3OiBpMWlJaTExaUlJaTFJIC4gT28wb08wb29vCiAgICBpaUlpSSA9IGlJaUlpaUlJaUlJaSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nCiAgICBPME9PME8gPSBpSWlJaWlJSWlJSWkgKCAndGh1bWJuYWlsJyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiBPME9PME8gPT0gTm9uZSA6CiAgICAgTzBPTzBPID0gJycKICAgICBpZiA4MSAtIDgxOiBvME9PMCAuIElpaUkgJSBvMG8wME9vME8gLyBJMTFpMTFJaSAtIG8wT08wCiAgICB0cnkgOgogICAgIGlmIG5vdCBpSWlJaWlJSWlJSWkgKCAnZmFuYXJ0JyApIDoKICAgICAgaWYgTzAwIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICAgIElpMUkxaSA9IE8wT08wTwogICAgICBlbHNlIDoKICAgICAgIElpMUkxaSA9IGZhbmFydAogICAgIGVsc2UgOgogICAgICBJaTFJMWkgPSBpSWlJaWlJSWlJSWkgKCAnZmFuYXJ0JyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgSWkxSTFpID09IE5vbmUgOgogICAgICByYWlzZQogICAgZXhjZXB0IDoKICAgICBJaTFJMWkgPSBmYW5hcnQKICAgICBpZiA5OSAtIDk5OiBvME9PMCAuIG8wMCArIE8wT09vICUgbzBPTzAgLiBJaSAlIG8wbzAwT28wTwogICAgdHJ5IDoKICAgICBPT29PTzBvbzBvb08gPSBpSWlJaWlJSWlJSWkgKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIE9Pb09PMG9vMG9vTyA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgT09vT08wb28wb29PID0gJycKICAgICBpZiA3OCAtIDc4OiBJaWkxaWkxSUkxMWkgKyBPbzBvb08wb28wb08gLSBvb08wMG9Pb28KICAgIHRyeSA6CiAgICAgTzAwTzBvT08wME8wMCA9IGlJaUlpaUlJaUlJaSAoICdnZW5yZScgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIE8wME8wb09PMDBPMDAgPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIE8wME8wb09PMDBPMDAgPSAnJwogICAgIGlmIDM4IC0gMzg6IElpaUkgLSBvME9PMCArIGlJMTFJMUlJMUkxSSAvIG9Pb08wb28wT09PbyAlIGkxaUlpMTFpSUlpMUkKICAgIHRyeSA6CiAgICAgTzBvME8wME9vMG8wID0gaUlpSWlpSUlpSUlpICggJ2RhdGUnICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBPMG8wTzAwT28wbzAgPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIE8wbzBPMDBPbzBvMCA9ICcnCiAgICAgaWYgNTcgLSA1NzogaTExaWkxMWlJaTExaSAvIE8wT09vCiAgICB0cnkgOgogICAgIGNyZWRpdHMgPSBpSWlJaWlJSWlJSWkgKCAnY3JlZGl0cycgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIGNyZWRpdHMgPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIGNyZWRpdHMgPSAnJwogICAgIGlmIDI5IC0gMjk6IGlJMTFJMUlJMUkxSSArIG9Pb08wb28wT09PbyAqIGkxMWlpMTFpSWkxMWkgKiBPbzBvb08wb28wb08gLiBJMTFpMTFJaSAqIEkxMWkxMUlpCiAgICB0cnkgOgogICAgIGlmIE9vTzBvID09ICcnIDoKICAgICAgaUkxSTExMUlpMTExaSAoIGlpSWlJIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgLCB1cmwgLiBlbmNvZGUgKCAndXRmLTgnICkgLCAyICwgTzBPTzBPICwgSWkxSTFpICwgT09vT08wb28wb29PICwgTzAwTzBvT08wME8wMCAsIE8wbzBPMDBPbzBvMCAsIGNyZWRpdHMgLCBUcnVlICkKICAgICBlbHNlIDoKICAgICAgaWYgNyAtIDc6IE9vMG9PMG9vbyAqIG9vTzAwb09vbyAlIG8wMG9vbzAgLSBJaWlJCiAgICAgIGlJMUkxMTFJaTExMWkgKCBpaUlpSSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIE9vTzBvIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIE8wT08wTyAsIElpMUkxaSAsIE9Pb09PMG9vMG9vTyAsIE8wME8wb09PMDBPMDAgLCBPMG8wTzAwT28wbzAgLCBOb25lICwgJ3NvdXJjZScgKQogICAgZXhjZXB0IDoKICAgICBpMUlJMSAoICdUaGVyZSB3YXMgYSBwcm9ibGVtIGFkZGluZyBkaXJlY3RvcnkgZnJvbSBnZXREYXRhKCk6ICcgKyBpaUlpSSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICBlbHNlIDoKICAgaTFJSTEgKCAnTm8gQ2hhbm5lbHM6IGdldEl0ZW1zJyApCiAgIGkxaSAoIG8wMG9vb08wT28gKCAnaXRlbScgKSAsIGZhbmFydCApCiBlbHNlIDoKICBvT09vbzAwTzAwbyAoIG8wMG9vb08wT28gKQogIGlmIDk4IC0gOTg6IE9vMG9vTzBvbzBvTyArIE9vMG9PMG9vbyArIG8wT08wICUgaWkKICBpZiA5NyAtIDk3OiBvMG8wME9vME8gKiBpaSAuIGlpCmRlZiBvT09vbzAwTzAwbyAoIGRhdGEgKSA6CiBJMTExaUkgPSBkYXRhIC4gcnN0cmlwICggKQogb09PbzAgPSByZSAuIGNvbXBpbGUgKCByJyNFWFRJTkY6KC4rPyksKC4qPylbXG5ccl0rKFteXHJcbl0rKScgKSAuIGZpbmRhbGwgKCBJMTExaUkgKQogSUkxSTFpaUlJSSA9IGxlbiAoIG9PT28wICkKIHByaW50ICd0c2Rvd25sb2FkZXInICwgaTFpSUlJaUkxSQogaWYgNzcgLSA3Nzogb09vTzBvbzBPT09vIC0gb29PME9PMDAwbyAtIE8wT09vCiBmb3IgSWlpaUlJaUlpMSAsIE9vT09vT29vb29PT28gLCBvT28wTyBpbiBvT09vMCA6CiAgaWYgNTIgLSA1MjogSWkgLyBJaWlJICogTzBPT28KICBpZiAndHZnLWxvZ28nIGluIElpaWlJSWlJaTEgOgogICBPME9PME8gPSBpSU9PME8wMDAgKCBJaWlpSUlpSWkxICwgJ3R2Zy1sb2dvPVtcJyJdKC4qPylbXCciXScgKQogICBpZiBPME9PME8gOgogICAgaWYgTzBPTzBPIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICBPME9PME8gPSBPME9PME8KICAgICBpZiAzNyAtIDM3OiBpaSAtIG8wbzAwT28wTyAtIElpaUkKICAgIGVsaWYgbm90IE8wMCAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApID09ICIiIDoKICAgICBvMG8wTzBPMDBvT09vID0gTzAwIC4gZ2V0U2V0dGluZyAoICdsb2dvLWZvbGRlclBhdGgnICkKICAgICBPME9PME8gPSBvMG8wTzBPMDBvT09vICsgTzBPTzBPCiAgICAgaWYgMTQgLSAxNDogb09vTzBvbzBPT09vICsgbzBPTzAKICAgIGVsc2UgOgogICAgIE8wT08wTyA9IE8wT08wTwogICAgIGlmIDUyIC0gNTI6IGlpIC0gTzBPT28KICAgICBpZiA3NCAtIDc0OiBvMDAgKyBJaWlJCiAgZWxzZSA6CiAgIE8wT08wTyA9ICcnCiAgIGlmIDcxIC0gNzE6IGkxaUlpMTFpSUlpMUkgJSBPbzBvb08wb28wb08KICBpZiAndHlwZScgaW4gSWlpaUlJaUlpMSA6CiAgIE8wMG9PMDAwTzBPID0gaUlPTzBPMDAwICggSWlpaUlJaUlpMSAsICd0eXBlPVtcJyJdKC4qPylbXCciXScgKQogICBpZiBPMDBvTzAwME8wTyA9PSAneXQtZGwnIDoKICAgIG9PbzBPID0gb09vME8gKyAiJm1vZGU9MTgiCiAgIGVsaWYgTzAwb08wMDBPME8gPT0gJ3JlZ2V4JyA6CiAgICBJaUlJID0gb09vME8gLiBzcGxpdCAoICcmcmVnZXhzPScgKQogICAgaWYgMTggLSAxODogbzAwIC0gT28wb29PMG9vMG9PIC4gb29PMDBvT29vIC4gaUkxMUkxSUkxSTFJCiAgICBpMUkgPSBPMG9vb29PT29vME8gKCBvMG8wME9PMCAoICcnICwgZGF0YSA9IElpSUkgWyAxIF0gKSApCiAgICBpZiAzNiAtIDM2OiBvME9PMCAlIG8wT08wICUgaWkxSSAvIGlpMUkgLSBPME9PbwogICAgaTFpSSAoIElpSUkgWyAwIF0gLCBPb09Pb09vb29vT09vICwgTzBPTzBPICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCBpMUkgLCBJSTFJMWlpSUlJICkKICAgIGNvbnRpbnVlCiAgIGVsaWYgTzAwb08wMDBPME8gPT0gJ2Z0dicgOgogICAgb09vME8gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLkYuVC5WLz9uYW1lPScgKyB1cmxsaWIgLiBxdW90ZSAoIE9vT09vT29vb29PT28gKSArICcmdXJsPScgKyBvT28wTyArICcmbW9kZT0xMjUmY2hfZmFuYXJ0PW5hJwogIGVsaWYgaTFpSUlJaUkxSSBhbmQgJy50cycgaW4gb09vME8gOgogICBvT28wTyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZjRtVGVzdGVyLz91cmw9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBvT28wTyApICsgJyZhbXA7c3RyZWFtdHlwZT1UU0RPV05MT0FERVImbmFtZT0nICsgdXJsbGliIC4gcXVvdGUgKCBPb09Pb09vb29vT09vICkKICBpMWlJICggb09vME8gLCBPb09Pb09vb29vT09vICwgTzBPTzBPICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIElJMUkxaWlJSUkgKQogIGlmIDk0IC0gOTQ6IGlJMTFJMUlJMUkxSSAvIGkxaUlpMTFpSUlpMUkgJSBvMDAgKiBvMDAgKiBvb08wT08wMDBvCiAgaWYgMjkgLSAyOTogaTExaWkxMWlJaTExaSArIG9Pb08wb28wT09PbyAvIElpaUkgLyBPbzBvb08wb28wb08gKiBpSTExSTFJSTFJMUkKZGVmIE8wT08gKCBuYW1lICwgdXJsICwgZmFuYXJ0ICkgOgogbzAwb29vTzBPbyA9IG8wbzAwT08wICggdXJsICkKIGlpMWlJMUkxMUkgPSBvMDBvb29PME9vIC4gZmluZCAoICdjaGFubmVsJyAsIGF0dHJzID0geyAnbmFtZScgOiBuYW1lIC4gZGVjb2RlICggJ3V0Zi04JyApIH0gKQogSUkxaUkgPSBpaTFpSTFJMTFJICggJ2l0ZW0nICkKIHRyeSA6CiAgSWkxSTFpID0gaWkxaUkxSTExSSAoICdmYW5hcnQnICkgWyAwIF0gLiBzdHJpbmcKICBpZiBJaTFJMWkgPT0gTm9uZSA6CiAgIHJhaXNlCiBleGNlcHQgOgogIElpMUkxaSA9IGZhbmFydAogZm9yIGlJaUlpaUlJaUlJaSBpbiBpaTFpSTFJMTFJICggJ3N1YmNoYW5uZWwnICkgOgogIG5hbWUgPSBpSWlJaWlJSWlJSWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZwogIHRyeSA6CiAgIE8wT08wTyA9IGlJaUlpaUlJaUlJaSAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgTzBPTzBPID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBPME9PME8gPSAnJwogIHRyeSA6CiAgIGlmIG5vdCBpSWlJaWlJSWlJSWkgKCAnZmFuYXJ0JyApIDoKICAgIGlmIE8wMCAuIGdldFNldHRpbmcgKCAndXNlX3RodW1iJyApID09ICJ0cnVlIiA6CiAgICAgSWkxSTFpID0gTzBPTzBPCiAgIGVsc2UgOgogICAgSWkxSTFpID0gaUlpSWlpSUlpSUlpICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogICBpZiBJaTFJMWkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIHBhc3MKICB0cnkgOgogICBPT29PTzBvbzBvb08gPSBpSWlJaWlJSWlJSWkgKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICBpZiBPT29PTzBvbzBvb08gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE9Pb09PMG9vMG9vTyA9ICcnCiAgIGlmIDU0IC0gNTQ6IG9vTzAwb09vbyAqIE9vMG9PMG9vbyAvIG9vTzAwb09vbyAvIGkxaUlpMTFpSUlpMUkgKiBvT29PMG9vME9PT28KICB0cnkgOgogICBPMDBPMG9PTzAwTzAwID0gaUlpSWlpSUlpSUlpICggJ2dlbnJlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIE8wME8wb09PMDBPMDAgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE8wME8wb09PMDBPMDAgPSAnJwogICBpZiA5NCAtIDk0OiBPbzBvTzBvb28gKiBJaWkxaWkxSUkxMWkgLiBPME9PbyAuIE8wT09vIC8gb09vTzBvbzBPT09vIC0gb29PMDBvT29vCiAgdHJ5IDoKICAgTzBvME8wME9vMG8wID0gaUlpSWlpSUlpSUlpICggJ2RhdGUnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgTzBvME8wME9vMG8wID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBPMG8wTzAwT28wbzAgPSAnJwogICBpZiA4NiAtIDg2OiBpSTExSTFJSTFJMUkgLyBvT29PMG9vME9PT28gLiBvb08wT08wMDBvCiAgdHJ5IDoKICAgY3JlZGl0cyA9IGlJaUlpaUlJaUlJaSAoICdjcmVkaXRzJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGNyZWRpdHMgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIGNyZWRpdHMgPSAnJwogICBpZiAxOSAtIDE5OiBJaWkxaWkxSUkxMWkgJSBpaSAlIE9vMG9PMG9vbyAqIElpaUkgJSBvMG8wME9vME8KICB0cnkgOgogICBpSTFJMTExSWkxMTFpICggbmFtZSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICwgdXJsIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMyAsIE8wT08wTyAsIElpMUkxaSAsIE9Pb09PMG9vMG9vTyAsIE8wME8wb09PMDBPMDAgLCBjcmVkaXRzICwgTzBvME8wME9vMG8wICkKICBleGNlcHQgOgogICBpMUlJMSAoICdUaGVyZSB3YXMgYSBwcm9ibGVtIGFkZGluZyBkaXJlY3RvcnkgLSAnICsgbmFtZSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKIGkxaSAoIElJMWlJICwgSWkxSTFpICkKIGlmIDY3IC0gNjc6IEkxMWkxMUlpIC4gaWkxSQogaWYgMjcgLSAyNzogTzBPT28gJSBJMTFpMTFJaQpkZWYgbzBvb29PTzAwICggbmFtZSAsIHVybCAsIGZhbmFydCApIDoKIG8wMG9vb08wT28gPSBvMG8wME9PMCAoIHVybCApCiBpaTFpSTFJMTFJID0gbzAwb29vTzBPbyAuIGZpbmQgKCAnc3ViY2hhbm5lbCcgLCBhdHRycyA9IHsgJ25hbWUnIDogbmFtZSAuIGRlY29kZSAoICd1dGYtOCcgKSB9ICkKIElJMWlJID0gaWkxaUkxSTExSSAoICdzdWJpdGVtJyApCiBpMWkgKCBJSTFpSSAsIGZhbmFydCApCiBpZiAzMiAtIDMyOiBvb08wMG9Pb28KIGlmIDMwIC0gMzA6IGlJMTFJMUlJMUkxSSAvIEkxaTFpSTFpIC4gaTExaWkxMWlJaTExaSAtIElpaUkKZGVmIGkxaSAoIGl0ZW1zICwgZmFuYXJ0ICwgZG9udExpbmsgPSBGYWxzZSApIDoKIElJMUkxaWlJSUkgPSBsZW4gKCBpdGVtcyApCiBpMUlJMSAoICdUb3RhbCBJdGVtczogJXMnICUgSUkxSTFpaUlJSSApCiBJaWkxMWlJMWkgPSBPMDAgLiBnZXRTZXR0aW5nICggJ2FkZF9wbGF5bGlzdCcgKQogb09Pb29Pb28gPSBPMDAgLiBnZXRTZXR0aW5nICggJ2Fza19wbGF5bGlzdF9pdGVtcycgKQogbzBPT09vTzAgPSBPMDAgLiBnZXRTZXR0aW5nICggJ3VzZV90aHVtYicgKQogbzBPb09vMDBvMG8gPSBPMDAgLiBnZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZCcgKQogbzBPb09vMDBvMG8gPSBvME9vT28wMG8wbyA9PSAidHJ1ZSIKIGZvciBJMUlJMUkxMUkxSSBpbiBpdGVtcyA6CiAgT29PTzBvID0gRmFsc2UKICBpMUlJMWkxMWkxID0gRmFsc2UKICBpZiA0MiAtIDQyOiBJaSAqIGlJMTFJMUlJMUkxSSAvIElpaTFpaTFJSTExaSAuIElpICUgSTFpMWlJMWkKICBpMWlJSWlJMWlpaUlpaSA9ICdmYWxzZScKICB0cnkgOgogICBpMWlJSWlJMWlpaUlpaSA9IEkxSUkxSTExSTFJICggJ3BhcmVudGFsYmxvY2snICkgWyAwIF0gLiBzdHJpbmcKICBleGNlcHQgOgogICBpMUlJMSAoICdwYXJlbnRhbGJsb2NrIEVycm9yJyApCiAgIGkxaUlJaUkxaWlpSWlpID0gJycKICBpZiBpMWlJSWlJMWlpaUlpaSA9PSAndHJ1ZScgYW5kIG8wT29PbzAwbzBvIDogY29udGludWUKICBpZiA3IC0gNzogb29PMDBvT29vICogaTExaWkxMWlJaTExaSAtIE8wT09vICsgT28wb29PMG9vMG9PICogSTExaTExSWkgJSBpMTFpaTExaUlpMTFpCiAgdHJ5IDoKICAgaWlJaUkgPSBJMUlJMUkxMUkxSSAoICd0aXRsZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBpaUlpSSBpcyBOb25lIDoKICAgIGlpSWlJID0gJ3Vua25vd24/JwogIGV4Y2VwdCA6CiAgIGkxSUkxICggJ05hbWUgRXJyb3InICkKICAgaWlJaUkgPSAnJwogICBpZiAxNSAtIDE1OiBvT29PMG9vME9PT28gJSBJMTFpMTFJaSAqIEkxaTFpSTFpCiAgIGlmIDgxIC0gODE6IE8wT09vIC0gaUkxMUkxSUkxSTFJIC0gaWkxSSAvIG9vTzAwb09vbyAtIG8wbzAwT28wTyAqIEkxaTFpSTFpCiAgdHJ5IDoKICAgaWYgSTFJSTFJMTFJMUkgKCAnZXBnJyApIDoKICAgIGlmIEkxSUkxSTExSTFJIC4gZXBnX3VybCA6CiAgICAgaTFJSTEgKCAnR2V0IEVQRyBSZWdleCcgKQogICAgIGlJMWkxMUlJMWkgPSBJMUlJMUkxMUkxSSAuIGVwZ191cmwgLiBzdHJpbmcKICAgICBvMG8wT29PbzBPME9PID0gSTFJSTFJMTFJMUkgLiBlcGdfcmVnZXggLiBzdHJpbmcKICAgICBpSWkxSTExSSA9IElpaTEgKCBpSTFpMTFJSTFpICwgbzBvME9vT28wTzBPTyApCiAgICAgaWYgaUlpMUkxMUkgOgogICAgICBpaUlpSSArPSAnIC0gJyArIGlJaTFJMTFJCiAgICBlbGlmIEkxSUkxSTExSTFJICggJ2VwZycgKSBbIDAgXSAuIHN0cmluZyA+IDEgOgogICAgIGlpSWlJICs9IG9vTyAoIEkxSUkxSTExSTFJICggJ2VwZycgKSBbIDAgXSAuIHN0cmluZyApCiAgIGVsc2UgOgogICAgcGFzcwogIGV4Y2VwdCA6CiAgIGkxSUkxICggJ0VQRyBFcnJvcicgKQogIHRyeSA6CiAgIElpSUkgPSBbIF0KICAgaWYgbGVuICggSTFJSTFJMTFJMUkgKCAnbGluaycgKSApID4gMCA6CiAgICBpZiA4NCAtIDg0OiBPbzBvb08wb28wb08gLSBvMDAgLyBPME9PbwogICAgaWYgNjUgLSA2NTogbzAwb29vMCAvIEkxaTFpSTFpIC8gb09vTzBvbzBPT09vCiAgICBmb3Igb29Pb29vMDAwb09PIGluIEkxSUkxSTExSTFJICggJ2xpbmsnICkgOgogICAgIGlmIG5vdCBvb09vb28wMDBvT08gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIElpSUkgLiBhcHBlbmQgKCBvb09vb28wMDBvT08gLiBzdHJpbmcgKQogICAgICBpZiA5MiAtIDkyOiBvMG8wME9vME8gLSBvMDAgLiBPbzBvb08wb28wb08gKiBvMDBvb28wCiAgIGVsaWYgbGVuICggSTFJSTFJMTFJMUkgKCAnc3BvcnRzZGV2aWwnICkgKSA+IDAgOgogICAgZm9yIG9vT29vbzAwMG9PTyBpbiBJMUlJMUkxMUkxSSAoICdzcG9ydHNkZXZpbCcgKSA6CiAgICAgaWYgbm90IG9vT29vbzAwMG9PTyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgSTFpSSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uU3BvcnRzRGV2aWwvP21vZGU9MSZhbXA7aXRlbT1jYXRjaGVyJTNkc3RyZWFtcyUyNnVybD0nICsgb29Pb29vMDAwb09PIC4gc3RyaW5nCiAgICAgIElJSUlpSWlJaTEgPSBJMUlJMUkxMUkxSSAoICdyZWZlcmVyJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgIGlmIElJSUlpSWlJaTEgOgogICAgICAgaWYgMiAtIDI6IG8wMCAlIGlJMTFJMUlJMUkxSSAqIGlJMTFJMUlJMUkxSSAuIElpaUkgLyBvMDAKICAgICAgIEkxaUkgPSBJMWlJICsgJyUyNnJlZmVyZXI9JyArIElJSUlpSWlJaTEKICAgICAgSWlJSSAuIGFwcGVuZCAoIEkxaUkgKQogICBlbGlmIGxlbiAoIEkxSUkxSTExSTFJICggJ3AycCcgKSApID4gMCA6CiAgICBmb3Igb29Pb29vMDAwb09PIGluIEkxSUkxSTExSTFJICggJ3AycCcgKSA6CiAgICAgaWYgbm90IG9vT29vbzAwMG9PTyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgJ3NvcDovLycgaW4gb29Pb29vMDAwb09PIC4gc3RyaW5nIDoKICAgICAgIGlJSTFpMSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucDJwLXN0cmVhbXMvP21vZGU9MnVybD0nICsgb29Pb29vMDAwb09PIC4gc3RyaW5nICsgJyYnICsgJ25hbWU9JyArIGlpSWlJCiAgICAgICBJaUlJIC4gYXBwZW5kICggaUlJMWkxICkKICAgICAgZWxzZSA6CiAgICAgICBPMG9PT29vb09PME8gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnAycC1zdHJlYW1zLz9tb2RlPTEmdXJsPScgKyBvb09vb28wMDBvT08gLiBzdHJpbmcgKyAnJicgKyAnbmFtZT0nICsgaWlJaUkKICAgICAgIElpSUkgLiBhcHBlbmQgKCBPMG9PT29vb09PME8gKQogICBlbGlmIGxlbiAoIEkxSUkxSTExSTFJICggJ3ZhdWdobicgKSApID4gMCA6CiAgICBmb3Igb29Pb29vMDAwb09PIGluIEkxSUkxSTExSTFJICggJ3ZhdWdobicgKSA6CiAgICAgaWYgbm90IG9vT29vbzAwMG9PTyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgb29vMDBPb28gPSAncGx1Z2luOi8vcGx1Z2luLnN0cmVhbS52YXVnaG5saXZlLnR2Lz9tb2RlPVBsYXlMaXZlU3RyZWFtJmFtcDtjaGFubmVsPScgKyBvb09vb28wMDBvT08gLiBzdHJpbmcKICAgICAgSWlJSSAuIGFwcGVuZCAoIG9vbzAwT29vICkKICAgZWxpZiBsZW4gKCBJMUlJMUkxMUkxSSAoICdpbGl2ZScgKSApID4gMCA6CiAgICBmb3Igb29Pb29vMDAwb09PIGluIEkxSUkxSTExSTFJICggJ2lsaXZlJyApIDoKICAgICBpZiBub3Qgb29Pb29vMDAwb09PIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBpZiBub3QgJ2h0dHAnIGluIG9vT29vbzAwMG9PTyAuIHN0cmluZyA6CiAgICAgICBPbzBvME8wMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8udGJoLmlsaXZlLz91cmw9aHR0cDovL3d3dy5zdHJlYW1saXZlLnRvL3ZpZXcvJyArIG9vT29vbzAwMG9PTyAuIHN0cmluZyArICcmYW1wO2xpbms9OTkmYW1wO21vZGU9aUxpdmVQbGF5JwogICAgICBlbHNlIDoKICAgICAgIE9vMG8wTzAwID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby50YmguaWxpdmUvP3VybD0nICsgb29Pb29vMDAwb09PIC4gc3RyaW5nICsgJyZhbXA7bGluaz05OSZhbXA7bW9kZT1pTGl2ZVBsYXknCiAgIGVsaWYgbGVuICggSTFJSTFJMTFJMUkgKCAneXQtZGwnICkgKSA+IDAgOgogICAgZm9yIG9vT29vbzAwMG9PTyBpbiBJMUlJMUkxMUkxSSAoICd5dC1kbCcgKSA6CiAgICAgaWYgbm90IG9vT29vbzAwMG9PTyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWkxID0gb29Pb29vMDAwb09PIC4gc3RyaW5nICsgJyZtb2RlPTE4JwogICAgICBJaUlJIC4gYXBwZW5kICggaWkxICkKICAgZWxpZiBsZW4gKCBJMUlJMUkxMUkxSSAoICdkbScgKSApID4gMCA6CiAgICBmb3Igb29Pb29vMDAwb09PIGluIEkxSUkxSTExSTFJICggJ2RtJyApIDoKICAgICBpZiBub3Qgb29Pb29vMDAwb09PIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBJMWkxMSA9ICJwbHVnaW46Ly9wbHVnaW4udmlkZW8uZGFpbHltb3Rpb25fY29tLz9tb2RlPXBsYXlWaWRlbyZ1cmw9IiArIG9vT29vbzAwMG9PTyAuIHN0cmluZwogICAgICBJaUlJIC4gYXBwZW5kICggSTFpMTEgKQogICBlbGlmIGxlbiAoIEkxSUkxSTExSTFJICggJ2RtbGl2ZScgKSApID4gMCA6CiAgICBmb3Igb29Pb29vMDAwb09PIGluIEkxSUkxSTExSTFJICggJ2RtbGl2ZScgKSA6CiAgICAgaWYgbm90IG9vT29vbzAwMG9PTyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgSTFpMTEgPSAicGx1Z2luOi8vcGx1Z2luLnZpZGVvLmRhaWx5bW90aW9uX2NvbS8/bW9kZT1wbGF5TGl2ZVZpZGVvJnVybD0iICsgb29Pb29vMDAwb09PIC4gc3RyaW5nCiAgICAgIElpSUkgLiBhcHBlbmQgKCBJMWkxMSApCiAgIGVsaWYgbGVuICggSTFJSTFJMTFJMUkgKCAndXR1YmUnICkgKSA+IDAgOgogICAgZm9yIG9vT29vbzAwMG9PTyBpbiBJMUlJMUkxMUkxSSAoICd1dHViZScgKSA6CiAgICAgaWYgbm90IG9vT29vbzAwMG9PTyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgJyAnIGluIG9vT29vbzAwMG9PTyAuIHN0cmluZyA6CiAgICAgICBPTyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9zZWFyY2gvP3E9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBvb09vb28wMDBvT08gLiBzdHJpbmcgKQogICAgICAgaTFJSTFpMTFpMSA9IE9PCiAgICAgIGVsaWYgbGVuICggb29Pb29vMDAwb09PIC4gc3RyaW5nICkgPT0gMTEgOgogICAgICAgT08gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/dmlkZW9faWQ9JyArIG9vT29vbzAwMG9PTyAuIHN0cmluZwogICAgICBlbGlmICggb29Pb29vMDAwb09PIC4gc3RyaW5nIC4gc3RhcnRzd2l0aCAoICdQTCcgKSBhbmQgbm90ICcmb3JkZXI9JyBpbiBvb09vb28wMDBvT08gLiBzdHJpbmcgKSBvciBvb09vb28wMDBvT08gLiBzdHJpbmcgLiBzdGFydHN3aXRoICggJ1VVJyApIDoKICAgICAgIE9PID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvPyZvcmRlcj1kZWZhdWx0JnBsYXlsaXN0X2lkPScgKyBvb09vb28wMDBvT08gLiBzdHJpbmcKICAgICAgZWxpZiBvb09vb28wMDBvT08gLiBzdHJpbmcgLiBzdGFydHN3aXRoICggJ1BMJyApIG9yIG9vT29vbzAwMG9PTyAuIHN0cmluZyAuIHN0YXJ0c3dpdGggKCAnVVUnICkgOgogICAgICAgT08gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/cGxheWxpc3RfaWQ9JyArIG9vT29vbzAwMG9PTyAuIHN0cmluZwogICAgICBlbGlmIG9vT29vbzAwMG9PTyAuIHN0cmluZyAuIHN0YXJ0c3dpdGggKCAnVUMnICkgYW5kIGxlbiAoIG9vT29vbzAwMG9PTyAuIHN0cmluZyApID4gMTIgOgogICAgICAgT08gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvY2hhbm5lbC8nICsgb29Pb29vMDAwb09PIC4gc3RyaW5nICsgJy8nCiAgICAgICBpMUlJMWkxMWkxID0gT08KICAgICAgZWxpZiBub3Qgb29Pb29vMDAwb09PIC4gc3RyaW5nIC4gc3RhcnRzd2l0aCAoICdVQycgKSBhbmQgbm90ICggb29Pb29vMDAwb09PIC4gc3RyaW5nIC4gc3RhcnRzd2l0aCAoICdQTCcgKSApIDoKICAgICAgIE9PID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3VzZXIvJyArIG9vT29vbzAwMG9PTyAuIHN0cmluZyArICcvJwogICAgICAgaTFJSTFpMTFpMSA9IE9PCiAgICAgSWlJSSAuIGFwcGVuZCAoIE9PICkKICAgZWxpZiBsZW4gKCBJMUlJMUkxMUkxSSAoICdpbWRiJyApICkgPiAwIDoKICAgIGZvciBvb09vb28wMDBvT08gaW4gSTFJSTFJMTFJMUkgKCAnaW1kYicgKSA6CiAgICAgaWYgbm90IG9vT29vbzAwMG9PTyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgTzAwIC4gZ2V0U2V0dGluZyAoICdnZW5lc2lzb3JwdWxzYXInICkgPT0gJzAnIDoKICAgICAgIG8wTzBvbzBPTzBPID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5nZW5lc2lzLz9hY3Rpb249cGxheSZpbWRiPScgKyBvb09vb28wMDBvT08gLiBzdHJpbmcKICAgICAgZWxzZSA6CiAgICAgICBvME8wb28wT08wTyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucHVsc2FyL21vdmllL3R0JyArIG9vT29vbzAwMG9PTyAuIHN0cmluZyArICcvcGxheScKICAgICAgSWlJSSAuIGFwcGVuZCAoIG8wTzBvbzBPTzBPICkKICAgZWxpZiBsZW4gKCBJMUlJMUkxMUkxSSAoICdmNG0nICkgKSA+IDAgOgogICAgZm9yIG9vT29vbzAwMG9PTyBpbiBJMUlJMUkxMUkxSSAoICdmNG0nICkgOgogICAgIGlmIG5vdCBvb09vb28wMDBvT08gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmICcuZjRtJyBpbiBvb09vb28wMDBvT08gLiBzdHJpbmcgOgogICAgICAgT08wID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG9vT29vbzAwMG9PTyAuIHN0cmluZyApCiAgICAgIGVsaWYgJy5tM3U4JyBpbiBvb09vb28wMDBvT08gLiBzdHJpbmcgOgogICAgICAgT08wID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG9vT29vbzAwMG9PTyAuIHN0cmluZyApICsgJyZhbXA7c3RyZWFtdHlwZT1ITFMnCiAgICAgICBpZiA3MiAtIDcyOiBpaQogICAgICBlbHNlIDoKICAgICAgIE9PMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZjRtVGVzdGVyLz91cmw9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBvb09vb28wMDBvT08gLiBzdHJpbmcgKSArICcmYW1wO3N0cmVhbXR5cGU9U0lNUExFJwogICAgIElpSUkgLiBhcHBlbmQgKCBPTzAgKQogICBlbGlmIGxlbiAoIEkxSUkxSTExSTFJICggJ2Z0dicgKSApID4gMCA6CiAgICBmb3Igb29Pb29vMDAwb09PIGluIEkxSUkxSTExSTFJICggJ2Z0dicgKSA6CiAgICAgaWYgbm90IG9vT29vbzAwMG9PTyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgT29vb29Pb29vTyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uRi5ULlYvP25hbWU9JyArIHVybGxpYiAuIHF1b3RlICggaWlJaUkgKSArICcmdXJsPScgKyBvb09vb28wMDBvT08gLiBzdHJpbmcgKyAnJm1vZGU9MTI1JmNoX2ZhbmFydD1uYScKICAgICBJaUlJIC4gYXBwZW5kICggT29vb29Pb29vTyApCiAgIGVsaWYgbGVuICggSTFJSTFJMTFJMUkgKCAndXJsc29sdmUnICkgKSA+IDAgOgogICAgaWYgNTYgLSA1NjogaTFpSWkxMWlJSWkxSSAuIElpaTFpaTFJSTExaSAuIEkxMWkxMUlpCiAgICBmb3Igb29Pb29vMDAwb09PIGluIEkxSUkxSTExSTFJICggJ3VybHNvbHZlJyApIDoKICAgICBpZiBub3Qgb29Pb29vMDAwb09PIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBpaTExMUkgPSBvb09vb28wMDBvT08gLiBzdHJpbmcgKyAnJm1vZGU9MTknCiAgICAgIElpSUkgLiBhcHBlbmQgKCBpaTExMUkgKQogICBpZiBsZW4gKCBJaUlJICkgPCAxIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaTFJSTEgKCAnRXJyb3IgPGxpbms+IGVsZW1lbnQsIFBhc3Npbmc6JyArIGlpSWlJIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKQogICBjb250aW51ZQogIHRyeSA6CiAgIE9vT08wbyA9IEkxSUkxSTExSTFJICggJ2V4dGVybmFsbGluaycgKSBbIDAgXSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICBpZiAxNyAtIDE3OiBJMTFpMTFJaSAuIG8wbzAwT28wTyArIGkxMWlpMTFpSWkxMWkKICBpZiBPb09PMG8gOgogICBpaUlpaWkxaUkxaSA9IFsgT29PTzBvIF0KICAgT29PTzBvID0gVHJ1ZQogIGVsc2UgOgogICBPb09PMG8gPSBGYWxzZQogIHRyeSA6CiAgIGkxSUkxaTExaTEgPSBJMUlJMUkxMUkxSSAoICdqc29ucnBjJyApIFsgMCBdIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIGlmIGkxSUkxaTExaTEgOgogICBpZiAzNCAtIDM0OiBPME9PbyAqIEkxMWkxMUlpIC4gaWkxSSAqIE8wT09vIC8gTzBPT28KICAgaWlJaWlpMWlJMWkgPSBbIGkxSUkxaTExaTEgXQogICBpZiAzMCAtIDMwOiBJaWkxaWkxSUkxMWkgKyBpMWlJaTExaUlJaTFJIC8gaTFpSWkxMWlJSWkxSSAlIElpaTFpaTFJSTExaSAuIElpaTFpaTFJSTExaQogICBpMUlJMWkxMWkxID0gVHJ1ZQogIGVsc2UgOgogICBpMUlJMWkxMWkxID0gRmFsc2UKICB0cnkgOgogICBPME9PME8gPSBJMUlJMUkxMUkxSSAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgTzBPTzBPID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBPME9PME8gPSAnJwogIHRyeSA6CiAgIGlmIG5vdCBJMUlJMUkxMUkxSSAoICdmYW5hcnQnICkgOgogICAgaWYgTzAwIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICBJaTFJMWkgPSBPME9PME8KICAgIGVsc2UgOgogICAgIElpMUkxaSA9IGZhbmFydAogICBlbHNlIDoKICAgIElpMUkxaSA9IEkxSUkxSTExSTFJICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogICBpZiBJaTFJMWkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIElpMUkxaSA9IGZhbmFydAogIHRyeSA6CiAgIE9Pb09PMG9vMG9vTyA9IEkxSUkxSTExSTFJICggJ2luZm8nICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgT09vT08wb28wb29PID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBPT29PTzBvbzBvb08gPSAnJwogICBpZiA1NSAtIDU1OiBPME9PbyAtIEkxaTFpSTFpICsgb29PME9PMDAwbyArIG8wMCAlIG8wMG9vbzAKICB0cnkgOgogICBPMDBPMG9PTzAwTzAwID0gSTFJSTFJMTFJMUkgKCAnZ2VucmUnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgTzAwTzBvT08wME8wMCA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgTzAwTzBvT08wME8wMCA9ICcnCiAgIGlmIDQxIC0gNDE6IGlpMUkgLSBJMWkxaUkxaSAtIG8wMG9vbzAKICB0cnkgOgogICBPMG8wTzAwT28wbzAgPSBJMUlJMUkxMUkxSSAoICdkYXRlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIE8wbzBPMDBPbzBvMCA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgTzBvME8wME9vMG8wID0gJycKICAgaWYgOCAtIDg6IGkxMWlpMTFpSWkxMWkgKyBvb08wMG9Pb28gLSBJaWlJICUgaTFpSWkxMWlJSWkxSSAlIElpaUkgKiBvME9PMAogIGkxSSA9IE5vbmUKICBpZiBJMUlJMUkxMUkxSSAoICdyZWdleCcgKSA6CiAgIHRyeSA6CiAgICBJSUlpMTFJMTEgPSBJMUlJMUkxMUkxSSAoICdyZWdleCcgKQogICAgaTFJID0gTzBvb29vT09vbzBPICggSUlJaTExSTExICkKICAgZXhjZXB0IDoKICAgIHBhc3MKICB0cnkgOgogICBpZiA0NCAtIDQ0OiBvb08wT08wMDBvCiAgIGlmIGxlbiAoIElpSUkgKSA+IDEgOgogICAgT09PTzBPT08gPSAwCiAgICBpMWkxaWkgPSBbIF0KICAgIGZvciBvb09vb28wMDBvT08gaW4gSWlJSSA6CiAgICAgaWYgSWlpMTFpSTFpID09ICJmYWxzZSIgOgogICAgICBPT09PME9PTyArPSAxCiAgICAgIGkxaUkgKCBvb09vb28wMDBvT08gLCAnJXMpICVzJyAlICggT09PTzBPT08gLCBpaUlpSSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkgLCBPME9PME8gLCBJaTFJMWkgLCBPT29PTzBvbzBvb08gLCBPMDBPMG9PTzAwTzAwICwgTzBvME8wME9vMG8wICwgVHJ1ZSAsIGkxaTFpaSAsIGkxSSAsIElJMUkxaWlJSUkgKQogICAgIGVsaWYgSWlpMTFpSTFpID09ICJ0cnVlIiBhbmQgb09Pb29Pb28gPT0gJ3RydWUnIDoKICAgICAgaWYgaTFJIDoKICAgICAgIGkxaTFpaSAuIGFwcGVuZCAoIG9vT29vbzAwMG9PTyArICcmcmVnZXhzPScgKyBpMUkgKQogICAgICBlbGlmIGFueSAoIHggaW4gb29Pb29vMDAwb09PIGZvciB4IGluIGlpSTFJaUkgKSBhbmQgb29Pb29vMDAwb09PIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICAgIGkxaTFpaSAuIGFwcGVuZCAoIG9vT29vbzAwMG9PTyArICcmbW9kZT0xOScgKQogICAgICBlbHNlIDoKICAgICAgIGkxaTFpaSAuIGFwcGVuZCAoIG9vT29vbzAwMG9PTyApCiAgICAgZWxzZSA6CiAgICAgIGkxaTFpaSAuIGFwcGVuZCAoIG9vT29vbzAwMG9PTyApCiAgICBpZiBsZW4gKCBpMWkxaWkgKSA+IDEgOgogICAgIGkxaUkgKCAnJyAsIGlpSWlJICwgTzBPTzBPICwgSWkxSTFpICwgT09vT08wb28wb29PICwgTzAwTzBvT08wME8wMCAsIE8wbzBPMDBPbzBvMCAsIFRydWUgLCBpMWkxaWkgLCBpMUkgLCBJSTFJMWlpSUlJICkKICAgZWxzZSA6CiAgICBpZiA0NiAtIDQ2OiBvT29PMG9vME9PT28gKyBpMTFpaTExaUlpMTFpCiAgICBpZiBkb250TGluayA6CiAgICAgcmV0dXJuIGlpSWlJICwgSWlJSSBbIDAgXSAsIGkxSQogICAgaWYgT29PTzBvIDoKICAgICBpZiBub3QgaTFJID09IE5vbmUgOgogICAgICBpSTFJMTExSWkxMTFpICggaWlJaUkgLiBlbmNvZGUgKCAndXRmLTgnICkgLCBpaUlpaWkxaUkxaSBbIDAgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBPME9PME8gLCBmYW5hcnQgLCBPT29PTzBvbzBvb08gLCBPMDBPMG9PTzAwTzAwICwgTzBvME8wME9vMG8wICwgTm9uZSAsICchIXVwZGF0ZScgLCBpMUkgLCBJaUlJIFsgMCBdIC4gZW5jb2RlICggJ3V0Zi04JyApICkKICAgICAgaWYgNzAgLSA3MDogbzAwIC8gaUkxMUkxSUkxSTFJCiAgICAgZWxzZSA6CiAgICAgIGlJMUkxMTFJaTExMWkgKCBpaUlpSSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIGlpSWlpaTFpSTFpIFsgMCBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIE8wT08wTyAsIGZhbmFydCAsIE9Pb09PMG9vMG9vTyAsIE8wME8wb09PMDBPMDAgLCBPMG8wTzAwT28wbzAgLCBOb25lICwgJ3NvdXJjZScgLCBOb25lICwgTm9uZSApCiAgICAgIGlmIDg1IC0gODU6IGlpICUgaWkxSSAqIGlpIC8gSWlpMWlpMUlJMTFpCiAgICBlbGlmIGkxSUkxaTExaTEgOgogICAgIGlJMUkxMTFJaTExMWkgKCBpaUlpSSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIGlpSWlpaTFpSTFpIFsgMCBdICwgNTMgLCBPME9PME8gLCBmYW5hcnQgLCBPT29PTzBvbzBvb08gLCBPMDBPMG9PTzAwTzAwICwgTzBvME8wME9vMG8wICwgTm9uZSAsICdzb3VyY2UnICkKICAgICBpZiA5NiAtIDk2OiBpaSArIG8wT08wCiAgICBlbHNlIDoKICAgICBpZiA0NCAtIDQ0OiBvME9PMAogICAgIGkxaUkgKCBJaUlJIFsgMCBdICwgaWlJaUkgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIE8wT08wTyAsIElpMUkxaSAsIE9Pb09PMG9vMG9vTyAsIE8wME8wb09PMDBPMDAgLCBPMG8wTzAwT28wbzAgLCBUcnVlICwgTm9uZSAsIGkxSSAsIElJMUkxaWlJSUkgKQogICAgIGlmIDIwIC0gMjA6IEkxaTFpSTFpICsgbzAwb29vMCAvIG8wbzAwT28wTyAlIGlJMTFJMUlJMUkxSQogIGV4Y2VwdCA6CiAgIGkxSUkxICggJ1RoZXJlIHdhcyBhIHByb2JsZW0gYWRkaW5nIGl0ZW0gLSAnICsgaWlJaUkgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiAgIGlmIDg4IC0gODg6IG9Pb08wb28wT09PbyAvIG9vTzBPTzAwMG8KICAgaWYgODcgLSA4NzogSWlpMWlpMUlJMTFpIC0gSWlpMWlpMUlJMTFpIC0gbzAwICsgbzBPTzAKZGVmIE8wb29vb09Pb28wTyAoIHJlZ19pdGVtICkgOgogdHJ5IDoKICBpMUkgPSB7IH0KICBmb3Igb29Pb29vMDAwb09PIGluIHJlZ19pdGVtIDoKICAgaTFJIFsgb29Pb29vMDAwb09PICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSA9IHsgfQogICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ25hbWUnIF0gPSBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiA4MiAtIDgyOiBvME9PMCAvIGlJMTFJMUlJMUkxSSAuIEkxMWkxMUlpIC4gT28wb29PMG9vMG9PIC8gSWlpSQogICB0cnkgOgogICAgaTFJIFsgb29Pb29vMDAwb09PICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdleHByZXMnIF0gPSBvb09vb28wMDBvT08gKCAnZXhwcmVzJyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiBub3QgaTFJIFsgb29Pb29vMDAwb09PICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdleHByZXMnIF0gOgogICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnZXhwcmVzJyBdID0gJycKICAgZXhjZXB0IDoKICAgIGkxSUkxICggIlJlZ2V4OiAtLSBObyBSZWZlcmVyIC0tIiApCiAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncGFnZScgXSA9IG9vT29vbzAwMG9PTyAoICdwYWdlJyApIFsgMCBdIC4gc3RyaW5nCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3JlZmVyZXInIF0gPSBvb09vb28wMDBvT08gKCAncmVmZXJlcicgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFJSTEgKCAiUmVnZXg6IC0tIE5vIFJlZmVyZXIgLS0iICkKICAgdHJ5IDoKICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnY29ubmVjdGlvbicgXSA9IG9vT29vbzAwMG9PTyAoICdjb25uZWN0aW9uJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMUlJMSAoICJSZWdleDogLS0gTm8gY29ubmVjdGlvbiAtLSIgKQogICAgaWYgNDIgLSA0MjogaTFpSWkxMWlJSWkxSQogICB0cnkgOgogICAgaTFJIFsgb29Pb29vMDAwb09PICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdub3RwbGF5YWJsZScgXSA9IG9vT29vbzAwMG9PTyAoICdub3RwbGF5YWJsZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFJSTEgKCAiUmVnZXg6IC0tIE5vIG5vdHBsYXlhYmxlIC0tIiApCiAgICBpZiAxOSAtIDE5OiBvME9PMCAlIElpaTFpaTFJSTExaSAqIGlJMTFJMUlJMUkxSSArIEkxMWkxMUlpCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ25vcmVkaXJlY3QnIF0gPSBvb09vb28wMDBvT08gKCAnbm9yZWRpcmVjdCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFJSTEgKCAiUmVnZXg6IC0tIE5vIG5vcmVkaXJlY3QgLS0iICkKICAgdHJ5IDoKICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnb3JpZ2luJyBdID0gb29Pb29vMDAwb09PICggJ29yaWdpbicgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFJSTEgKCAiUmVnZXg6IC0tIE5vIG9yaWdpbiAtLSIgKQogICB0cnkgOgogICAgaTFJIFsgb29Pb29vMDAwb09PICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdhY2NlcHQnIF0gPSBvb09vb28wMDBvT08gKCAnYWNjZXB0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMUlJMSAoICJSZWdleDogLS0gTm8gYWNjZXB0IC0tIiApCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2luY2x1ZGVoZWFkZXJzJyBdID0gb29Pb29vMDAwb09PICggJ2luY2x1ZGVoZWFkZXJzJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMUlJMSAoICJSZWdleDogLS0gTm8gaW5jbHVkZWhlYWRlcnMgLS0iICkKICAgIGlmIDQ2IC0gNDY6IGkxaUlpMTFpSUlpMUkKICAgIGlmIDEgLSAxOiBvMDAKICAgdHJ5IDoKICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnbGlzdHJlcGVhdCcgXSA9IG9vT29vbzAwMG9PTyAoICdsaXN0cmVwZWF0JyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiA5NyAtIDk3OiBPbzBvb08wb28wb08gKyBvMDAgKyBvMG8wME9vME8gKyBJaQogICBleGNlcHQgOgogICAgaTFJSTEgKCAiUmVnZXg6IC0tIE5vIGxpc3RyZXBlYXQgLS0iICkKICAgIGlmIDc3IC0gNzc6IElpaUkgLyBpaQogICAgaWYgNDYgLSA0NjogSWlpSSAlIGlJMTFJMUlJMUkxSSAuIG8wMCAlIG8wMCArIElpCiAgICBpZiA3MiAtIDcyOiBpSTExSTFJSTFJMUkgKiBvMDBvb28wICUgTzBPT28gLyBpMTFpaTExaUlpMTFpCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3Byb3h5JyBdID0gb29Pb29vMDAwb09PICggJ3Byb3h5JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMUlJMSAoICJSZWdleDogLS0gTm8gcHJveHkgLS0iICkKICAgIGlmIDM1IC0gMzU6IE8wT09vICsgaWkxSSAlIElpaTFpaTFJSTExaSAlIEkxaTFpSTFpICsgbzBPTzAKICAgdHJ5IDoKICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAneC1yZXEnIF0gPSBvb09vb28wMDBvT08gKCAneC1yZXEnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxSUkxICggIlJlZ2V4OiAtLSBObyB4LXJlcSAtLSIgKQogICAgaWYgMTcgLSAxNzogaWkxSQogICB0cnkgOgogICAgaTFJIFsgb29Pb29vMDAwb09PICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICd4LWFkZHInIF0gPSBvb09vb28wMDBvT08gKCAneC1hZGRyJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMUlJMSAoICJSZWdleDogLS0gTm8geC1hZGRyIC0tIiApCiAgICBpZiAyMSAtIDIxOiBpMWlJaTExaUlJaTFJCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3gtZm9yd2FyZCcgXSA9IG9vT29vbzAwMG9PTyAoICd4LWZvcndhcmQnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxSUkxICggIlJlZ2V4OiAtLSBObyB4LWZvcndhcmQgLS0iICkKICAgIGlmIDI5IC0gMjk6IEkxaTFpSTFpIC8gb29PME9PMDAwbyAvIE8wT09vICogT28wb29PMG9vMG9PCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2FnZW50JyBdID0gb29Pb29vMDAwb09PICggJ2FnZW50JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMUlJMSAoICJSZWdleDogLS0gTm8gVXNlciBBZ2VudCAtLSIgKQogICB0cnkgOgogICAgaTFJIFsgb29Pb29vMDAwb09PICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdwb3N0JyBdID0gb29Pb29vMDAwb09PICggJ3Bvc3QnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxSUkxICggIlJlZ2V4OiAtLSBOb3QgYSBwb3N0IiApCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3Jhd3Bvc3QnIF0gPSBvb09vb28wMDBvT08gKCAncmF3cG9zdCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFJSTEgKCAiUmVnZXg6IC0tIE5vdCBhIHJhd3Bvc3QiICkKICAgdHJ5IDoKICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaHRtbHVuZXNjYXBlJyBdID0gb29Pb29vMDAwb09PICggJ2h0bWx1bmVzY2FwZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFJSTEgKCAiUmVnZXg6IC0tIE5vdCBhIGh0bWx1bmVzY2FwZSIgKQogICAgaWYgMTAgLSAxMDogb29PMDBvT29vICUgT28wb08wb29vICogT28wb08wb29vIC4gSTFpMWlJMWkgLyBvMDBvb28wICUgT28wb29PMG9vMG9PCiAgICBpZiA0OSAtIDQ5OiBpMTFpaTExaUlpMTFpIC8gbzBPTzAgKyBvMG8wME9vME8gKiBJaWlJCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3JlYWRjb29raWVvbmx5JyBdID0gb29Pb29vMDAwb09PICggJ3JlYWRjb29raWVvbmx5JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMUlJMSAoICJSZWdleDogLS0gTm90IGEgcmVhZENvb2tpZU9ubHkiICkKICAgIGlmIDI4IC0gMjg6IE8wT09vICsgSWkgLyBJMWkxaUkxaSAlIG9Pb08wb28wT09PbyAlIGkxaUlpMTFpSUlpMUkgLSBvMG8wME9vME8KICAgdHJ5IDoKICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnY29va2llamFyJyBdID0gb29Pb29vMDAwb09PICggJ2Nvb2tpZWphcicgKSBbIDAgXSAuIHN0cmluZwogICAgaWYgbm90IGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnY29va2llamFyJyBdIDoKICAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA9ICcnCiAgIGV4Y2VwdCA6CiAgICBpMUlJMSAoICJSZWdleDogLS0gTm90IGEgY29va2llSmFyIiApCiAgIHRyeSA6CiAgICBpMUkgWyBvb09vb28wMDBvT08gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3NldGNvb2tpZScgXSA9IG9vT29vbzAwMG9PTyAoICdzZXRjb29raWUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxSUkxICggIlJlZ2V4OiAtLSBOb3QgYSBzZXRjb29raWUiICkKICAgdHJ5IDoKICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnYXBwZW5kY29va2llJyBdID0gb29Pb29vMDAwb09PICggJ2FwcGVuZGNvb2tpZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFJSTEgKCAiUmVnZXg6IC0tIE5vdCBhIGFwcGVuZGNvb2tpZSIgKQogICAgaWYgNTQgLSA1NDogaWkxSSArIG9vTzBPTzAwMG8KICAgdHJ5IDoKICAgIGkxSSBbIG9vT29vbzAwMG9PTyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaWdub3JlY2FjaGUnIF0gPSBvb09vb28wMDBvT08gKCAnaWdub3JlY2FjaGUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxSUkxICggIlJlZ2V4OiAtLSBubyBpZ25vcmVjYWNoZSIgKQogICAgaWYgODMgLSA4MzogSWlpMWlpMUlJMTFpIC0gSTExaTExSWkgKyBPbzBvb08wb28wb08KICAgIGlmIDUgLSA1OiBvMDBvb28wCiAgICBpZiA0NiAtIDQ2OiBPbzBvTzBvb28KICAgIGlmIDQ1IC0gNDU6IE8wT09vCiAgICBpZiAyMSAtIDIxOiBvME9PMCAuIG9vTzAwb09vbyAuIE9vMG9vTzBvbzBvTyAvIGkxaUlpMTFpSUlpMUkgLyBvb08wMG9Pb28KICBpMUkgPSB1cmxsaWIgLiBxdW90ZSAoIHJlcHIgKCBpMUkgKSApCiAgcmV0dXJuIGkxSQogIGlmIDE3IC0gMTc6IE9vMG9vTzBvbzBvTyAvIE9vMG9vTzBvbzBvTyAvIEkxaTFpSTFpCiBleGNlcHQgOgogIGkxSSA9IE5vbmUKICBpMUlJMSAoICdyZWdleCBFcnJvcjogJyArIGlpSWlJIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKQogIGlmIDEgLSAxOiBpaTFJIC4gSWkgJSBPbzBvb08wb28wb08KICBpZiA4MiAtIDgyOiBpSTExSTFJSTFJMUkgKyBpMWlJaTExaUlJaTFJIC4gaUkxMUkxSUkxSTFJICUgT28wb08wb29vIC8gbzAwb29vMCAuIG8wMG9vbzAKZGVmIElJaSAoIHVybCApIDoKIHRyeSA6CiAgZm9yIG9vT29vbzAwMG9PTyBpbiByYW5nZSAoIDEgLCA1MSApIDoKICAgb09vTzAwb28wTyA9IElpaWlJICggdXJsICkKICAgaWYgIkVYVC1YLVNUUkVBTS1JTkYiIGluIG9Pb08wMG9vME8gOiByZXR1cm4gdXJsCiAgIGlmIG5vdCAiRVhUTTNVIiBpbiBvT29PMDBvbzBPIDogcmV0dXJuCiAgIHhibWMgLiBzbGVlcCAoIDIwMDAgKQogIHJldHVybgogZXhjZXB0IDoKICByZXR1cm4KICBpZiA2MSAtIDYxOiBPbzBvb08wb28wb08gJSBPbzBvb08wb28wb08gKiBJaWlJIC8gSWlpSQogIGlmIDc1IC0gNzU6IE9vMG9PMG9vbyAuIE8wT09vCmRlZiBpSUkxMTFpICggcmVnZXhzICwgdXJsICwgY29va2llSmFyID0gTm9uZSAsIGZvckNvb2tpZUphck9ubHkgPSBGYWxzZSAsIHJlY3Vyc2l2ZUNhbGwgPSBGYWxzZSAsIGNhY2hlZFBhZ2VzID0geyB9ICwgcmF3UG9zdCA9IEZhbHNlICwgY29va2llX2phcl9maWxlID0gTm9uZSApIDoKIGlmIG5vdCByZWN1cnNpdmVDYWxsIDoKICByZWdleHMgPSBldmFsICggdXJsbGliIC4gdW5xdW90ZSAoIHJlZ2V4cyApICkKICBpZiA4NyAtIDg3OiBPbzBvb08wb28wb08gKyBPME9PbyAlIElpICUgbzBvMDBPbzBPCiAgaWYgMjcgLSAyNzogbzBvMDBPbzBPCiBPT08wb09Pb28gPSByZSAuIGNvbXBpbGUgKCAnXCRkb3JlZ2V4XFsoW15cXV0qKVxdJyApIC4gZmluZGFsbCAoIHVybCApCiBpZiA1MiAtIDUyOiBJaWlJICUgaTFpSWkxMWlJSWkxSQogT28wMDBvb09PTyA9IFRydWUKIGZvciBJaTExaTFJMTFpIGluIE9PTzBvT09vbyA6CiAgaWYgSWkxMWkxSTExaSBpbiByZWdleHMgOgogICBpZiAxMyAtIDEzOiBPbzBvTzBvb28gLyBJaSAlIG9vTzBPTzAwMG8gJSBJMWkxaUkxaSAuIElpaTFpaTFJSTExaQogICBpSUlJaWkgPSByZWdleHMgWyBJaTExaTFJMTFpIF0KICAgaWYgNTggLSA1ODogSWlpSSAvIE9vMG9PMG9vbyAuIG9Pb08wb28wT09PbyAvIGlpICsgb29PMDBvT29vCiAgIE8wT29PMG9vT08wbyA9IEZhbHNlCiAgIGlmICdjb29raWVqYXInIGluIGlJSUlpaSA6CiAgICBpZiA4MSAtIDgxOiBvMG8wME9vME8gKiBvb08wT08wMDBvICsgSTExaTExSWkgKiBJaSAtIElpaTFpaTFJSTExaSAvIEkxMWkxMUlpCiAgICBPME9vTzBvb09PMG8gPSBpSUlJaWkgWyAnY29va2llamFyJyBdCiAgICBpZiAnJGRvcmVnZXgnIGluIE8wT29PMG9vT08wbyA6CiAgICAgY29va2llSmFyID0gaUlJMTExaSAoIHJlZ2V4cyAsIGlJSUlpaSBbICdjb29raWVqYXInIF0gLCBjb29raWVKYXIgLCBUcnVlICwgVHJ1ZSAsIGNhY2hlZFBhZ2VzICkKICAgICBPME9vTzBvb09PMG8gPSBUcnVlCiAgICBlbHNlIDoKICAgICBPME9vTzBvb09PMG8gPSBUcnVlCiAgICAgaWYgNjMgLSA2Mzogb09vTzBvbzBPT09vIC0gaWkgJSBvb08wMG9Pb28KICAgaWYgTzBPb08wb29PTzBvIDoKICAgIGlmIGNvb2tpZUphciA9PSBOb25lIDoKICAgICBpZiA3NyAtIDc3OiBpMTFpaTExaUlpMTFpIC4gaWkxSQogICAgIGNvb2tpZV9qYXJfZmlsZSA9IE5vbmUKICAgICBpZiAnb3BlblsnIGluIGlJSUlpaSBbICdjb29raWVqYXInIF0gOgogICAgICBjb29raWVfamFyX2ZpbGUgPSBpSUlJaWkgWyAnY29va2llamFyJyBdIC4gc3BsaXQgKCAnb3BlblsnICkgWyAxIF0gLiBzcGxpdCAoICddJyApIFsgMCBdCiAgICAgIGlmIDM1IC0gMzU6IE8wT09vICogT28wb29PMG9vMG9PIC4gSTFpMWlJMWkgKiBJaWlJIC4gb09vTzBvbzBPT09vIC8gbzBvMDBPbzBPCiAgICAgIGlmIDEwMCAtIDEwMDogb29PMDBvT29vIC4gSWlpSSAqIGkxaUlpMTFpSUlpMUkgJSBvMG8wME9vME8gKiBvMG8wME9vME8KICAgICBjb29raWVKYXIgPSBJSUlpaTEgKCBjb29raWVfamFyX2ZpbGUgKQogICAgIGlmIDcxIC0gNzE6IG9vTzBPTzAwMG8gLyBpaTFJIC4gSWlpMWlpMUlJMTFpICUgaWkgLiBvT29PMG9vME9PT28KICAgICBpZiBjb29raWVfamFyX2ZpbGUgOgogICAgICBJaWlpaWkxMTFpMWlpICggY29va2llSmFyICwgY29va2llX2phcl9maWxlICkKICAgICAgaWYgMjUgLSAyNTogT28wb29PMG9vMG9PIC0gTzBPT28gLyBJaQogICAgICBpZiA0MSAtIDQxOiBpaTFJICUgbzAwICsgaUkxMUkxSUkxSTFJCiAgICAgIGlmIDIgLSAyOiBpSTExSTFJSTFJMUkgKiBpMWlJaTExaUlJaTFJICUgbzBPTzAgLSBvb08wT08wMDBvIC0gbzAwCiAgICBlbGlmICdzYXZlWycgaW4gaUlJSWlpIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgY29va2llX2phcl9maWxlID0gaUlJSWlpIFsgJ2Nvb2tpZWphcicgXSAuIHNwbGl0ICggJ3NhdmVbJyApIFsgMSBdIC4gc3BsaXQgKCAnXScgKSBbIDAgXQogICAgIGlJaTExaWlJaUkxSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPME8wMG8wT09PMCAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgaWYgMyAtIDM6IGlpMUkgLyBvb08wT08wMDBvIC8gSWkgKiBpaTFJIC0gb29PME9PMDAwbwogICAgIElpaWlpaTExMWkxaWkgKCBjb29raWVKYXIgLCBjb29raWVfamFyX2ZpbGUgKQogICBpZiBpSUlJaWkgWyAncGFnZScgXSBhbmQgJyRkb3JlZ2V4JyBpbiBpSUlJaWkgWyAncGFnZScgXSA6CiAgICBJaWlJSTExMTFJSUkxSSA9IGlJSTExMWkgKCByZWdleHMgLCBpSUlJaWkgWyAncGFnZScgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgICBpZiBsZW4gKCBJaWlJSTExMTFJSUkxSSApID09IDAgOgogICAgIElpaUlJMTExMUlJSTFJID0gJ2h0dHA6Ly9yZWdleGZhaWxlZCcKICAgIGlJSUlpaSBbICdwYWdlJyBdID0gSWlpSUkxMTExSUlJMUkKICAgIGlmIDM5IC0gMzk6IGlpMUkgLyBPbzBvTzBvb28KICAgaWYgJ3NldGNvb2tpZScgaW4gaUlJSWlpIGFuZCBpSUlJaWkgWyAnc2V0Y29va2llJyBdIGFuZCAnJGRvcmVnZXgnIGluIGlJSUlpaSBbICdzZXRjb29raWUnIF0gOgogICAgaUlJSWlpIFsgJ3NldGNvb2tpZScgXSA9IGlJSTExMWkgKCByZWdleHMgLCBpSUlJaWkgWyAnc2V0Y29va2llJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgaWYgJ2FwcGVuZGNvb2tpZScgaW4gaUlJSWlpIGFuZCBpSUlJaWkgWyAnYXBwZW5kY29va2llJyBdIGFuZCAnJGRvcmVnZXgnIGluIGlJSUlpaSBbICdhcHBlbmRjb29raWUnIF0gOgogICAgaUlJSWlpIFsgJ2FwcGVuZGNvb2tpZScgXSA9IGlJSTExMWkgKCByZWdleHMgLCBpSUlJaWkgWyAnYXBwZW5kY29va2llJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgIGlmIDc4IC0gNzg6IE8wT09vCiAgICBpZiA1MyAtIDUzOiBPME9PbyAqIE9vMG9vTzBvbzBvTyAuIG8wMCAvIG8wbzAwT28wTyAqIE8wT09vCiAgIGlmICdwb3N0JyBpbiBpSUlJaWkgYW5kICckZG9yZWdleCcgaW4gaUlJSWlpIFsgJ3Bvc3QnIF0gOgogICAgaUlJSWlpIFsgJ3Bvc3QnIF0gPSBpSUkxMTFpICggcmVnZXhzICwgaUlJSWlpIFsgJ3Bvc3QnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICAgaWYgMjIgLSAyMjogaTFpSWkxMWlJSWkxSSAlIG8wMCAqIElpaTFpaTFJSTExaSAvIE9vMG9vTzBvbzBvTyAlIElpICogSTFpMWlJMWkKICAgIGlmIDk1IC0gOTU6IGlpIC0gT28wb08wb29vICogSTExaTExSWkgKyBvT29PMG9vME9PT28KICAgaWYgJ3Jhd3Bvc3QnIGluIGlJSUlpaSBhbmQgJyRkb3JlZ2V4JyBpbiBpSUlJaWkgWyAncmF3cG9zdCcgXSA6CiAgICBpSUlJaWkgWyAncmF3cG9zdCcgXSA9IGlJSTExMWkgKCByZWdleHMgLCBpSUlJaWkgWyAncmF3cG9zdCcgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyAsIHJhd1Bvc3QgPSBUcnVlICkKICAgIGlmIDEwIC0gMTA6IElpaUkgLyBJaQogICAgaWYgOTIgLSA5MjogSTFpMWlJMWkgLiBvb08wMG9Pb28KICAgaWYgJ3Jhd3Bvc3QnIGluIGlJSUlpaSBhbmQgJyRlcG9jdGltZSQnIGluIGlJSUlpaSBbICdyYXdwb3N0JyBdIDoKICAgIGlJSUlpaSBbICdyYXdwb3N0JyBdID0gaUlJSWlpIFsgJ3Jhd3Bvc3QnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgb08gKCApICkKICAgIGlmIDkyIC0gOTI6IE9vMG9PMG9vbyAqIGkxaUlpMTFpSUlpMUkgKiBpMWlJaTExaUlJaTFJICogSTExaTExSWkgLiBpSTExSTFJSTFJMUkKICAgaWYgJ3Jhd3Bvc3QnIGluIGlJSUlpaSBhbmQgJyRlcG9jdGltZTIkJyBpbiBpSUlJaWkgWyAncmF3cG9zdCcgXSA6CiAgICBpSUlJaWkgWyAncmF3cG9zdCcgXSA9IGlJSUlpaSBbICdyYXdwb3N0JyBdIC4gcmVwbGFjZSAoICckZXBvY3RpbWUyJCcgLCBJMUlpMTExMWlJaSAoICkgKQogICAgaWYgMzEgLSAzMTogSTFpMWlJMWkgLiBvb08wMG9Pb28gKiBPME9PbyArIElpICogbzBPTzAKICAgIGlmIDkzIC0gOTM6IElpaTFpaTFJSTExaSAvIGlJMTFJMUlJMUkxSSAqIGlpMUkgJSBpaSAqIG8wbzAwT28wTyAqIEkxaTFpSTFpCiAgIE9vb29vb28gPSAnJwogICBpZiBpSUlJaWkgWyAncGFnZScgXSBhbmQgaUlJSWlpIFsgJ3BhZ2UnIF0gaW4gY2FjaGVkUGFnZXMgYW5kIG5vdCAnaWdub3JlY2FjaGUnIGluIGlJSUlpaSBhbmQgZm9yQ29va2llSmFyT25seSA9PSBGYWxzZSA6CiAgICBpZiAzOSAtIDM5OiBPbzBvTzBvb28gKiBpMWlJaTExaUlJaTFJICsgaUkxMUkxSUkxSTFJIC0gT28wb08wb29vICsgT28wb29PMG9vMG9PCiAgICBPb29vb29vID0gY2FjaGVkUGFnZXMgWyBpSUlJaWkgWyAncGFnZScgXSBdCiAgIGVsc2UgOgogICAgaWYgaUlJSWlpIFsgJ3BhZ2UnIF0gYW5kIG5vdCBpSUlJaWkgWyAncGFnZScgXSA9PSAnJyBhbmQgaUlJSWlpIFsgJ3BhZ2UnIF0gLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgIGlmICckZXBvY3RpbWUkJyBpbiBpSUlJaWkgWyAncGFnZScgXSA6CiAgICAgIGlJSUlpaSBbICdwYWdlJyBdID0gaUlJSWlpIFsgJ3BhZ2UnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgb08gKCApICkKICAgICBpZiAnJGVwb2N0aW1lMiQnIGluIGlJSUlpaSBbICdwYWdlJyBdIDoKICAgICAgaUlJSWlpIFsgJ3BhZ2UnIF0gPSBpSUlJaWkgWyAncGFnZScgXSAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lMiQnICwgSTFJaTExMTFpSWkgKCApICkKICAgICAgaWYgNjkgLSA2OTogbzBvMDBPbzBPCiAgICAgIGlmIDg1IC0gODU6IE8wT09vIC8gbzBvMDBPbzBPCiAgICAgaUkxaUlJSWkxaSA9IGlJSUlpaSBbICdwYWdlJyBdIC4gc3BsaXQgKCAnfCcgKQogICAgIG9vbyA9IGlJMWlJSUlpMWkgWyAwIF0KICAgICBPb29vb08wb09PID0gTm9uZQogICAgIGlmIGxlbiAoIGlJMWlJSUlpMWkgKSA+IDEgOgogICAgICBPb29vb08wb09PID0gaUkxaUlJSWkxaSBbIDEgXQogICAgICBpZiAzMCAtIDMwOiBpaSAtIGlpIC4gbzBvMDBPbzBPIC8gbzAwCiAgICAgIGlmIDMxIC0gMzE6IE9vMG9vTzBvbzBvTyArIElpaUkgLiBpaQogICAgICBpZiA4OSAtIDg5OiBvb08wT08wMDBvICsgaWkxSSArIG9vTzBPTzAwMG8KICAgICAgaWYgNyAtIDc6IG8wbzAwT28wTyAlIElpaUkgKyBJaWkxaWkxSUkxMWkgKiBvMDAgLSBvMDAKICAgICAgaWYgNDIgLSA0Mjogb09vTzBvbzBPT09vICogb09vTzBvbzBPT09vICogb29PMDBvT29vIC4gSTFpMWlJMWkKICAgICAgaWYgNTEgLSA1MTogT28wb29PMG9vMG9PICUgaUkxMUkxSUkxSTFJIC0gaWkgJSBPME9PbyAqIGlJMTFJMUlJMUkxSSAlIGkxMWlpMTFpSWkxMWkKICAgICAgaWYgOTkgLSA5OTogbzBPTzAgKiBvb08wT08wMDBvICogb29PMDBvT29vCiAgICAgIGlmIDkyIC0gOTI6IGkxaUlpMTFpSUlpMUkKICAgICAgaWYgNDAgLSA0MDogb09vTzBvbzBPT09vIC8gT28wb08wb29vCiAgICAgIGlmIDc5IC0gNzk6IGkxMWlpMTFpSWkxMWkgLSBpSTExSTFJSTFJMUkgKyBvMDBvb28wIC0gb29PMDBvT29vCiAgICAgT29PaUlJaWlpID0gdXJsbGliMiAuIFByb3h5SGFuZGxlciAoIHVybGxpYjIgLiBnZXRwcm94aWVzICggKSApCiAgICAgaWYgNjEgLSA2MTogT28wb08wb29vIC4gaWkxSSAvIG9vTzAwb09vbyAlIElpICogbzAwCiAgICAgaWYgMzEgLSAzMTogT28wb29PMG9vMG9PICsgbzBvMDBPbzBPCiAgICAgaWYgODcgLSA4NzogTzBPT28KICAgICBPMDBvTyA9IHVybGxpYjIgLiBSZXF1ZXN0ICggb29vICkKICAgICBpZiAncHJveHknIGluIGlJSUlpaSA6CiAgICAgIElJSWlpID0gaUlJSWlpIFsgJ3Byb3h5JyBdCiAgICAgIGlmIDgzIC0gODM6IE9vMG9PMG9vbyAlIElpaUkgJSBJMTFpMTFJaSAuIGlJMTFJMUlJMUkxSSAtIE9vMG9PMG9vbwogICAgICBpZiA4OCAtIDg4OiBpaQogICAgICBpZiBvb28gWyA6IDUgXSA9PSAiaHR0cHMiIDoKICAgICAgIE9PMDAgPSB1cmxsaWIyIC4gUHJveHlIYW5kbGVyICggeyAnaHR0cHMnIDogSUlJaWkgfSApCiAgICAgICBpZiAyOCAtIDI4OiBvME9PMCAtIElpIC4gSWlpMWlpMUlJMTFpICsgT28wb08wb29vIC8gSWlpMWlpMUlJMTFpCiAgICAgIGVsc2UgOgogICAgICAgT08wMCA9IHVybGxpYjIgLiBQcm94eUhhbmRsZXIgKCB7ICdodHRwJyA6IElJSWlpIH0gKQogICAgICAgaWYgMzUgLSAzNTogT28wb08wb29vCiAgICAgIE9Pb08wID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIE9PMDAgKQogICAgICB1cmxsaWIyIC4gaW5zdGFsbF9vcGVuZXIgKCBPT29PMCApCiAgICAgIGlmIDg2IC0gODY6IG9vTzBPTzAwMG8gJSBJaSArIG8wMG9vbzAgJSBJaQogICAgICBpZiA5MiAtIDkyOiBJaSAtIG8wMCAvIE8wT09vIC8gbzBPTzAKICAgICBPMDBvTyAuIGFkZF9oZWFkZXIgKCAnVXNlci1BZ2VudCcgLCAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBydjoxNC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzE0LjAuMScgKQogICAgIElJSWlpID0gTm9uZQogICAgIGlmIDQzIC0gNDM6IG9vTzBPTzAwMG8gKyBPbzBvb08wb28wb08gKyBvMDAKICAgICBpZiAncmVmZXJlcicgaW4gaUlJSWlpIDoKICAgICAgTzAwb08gLiBhZGRfaGVhZGVyICggJ1JlZmVyZXInICwgaUlJSWlpIFsgJ3JlZmVyZXInIF0gKQogICAgIGlmICdhY2NlcHQnIGluIGlJSUlpaSA6CiAgICAgIE8wMG9PIC4gYWRkX2hlYWRlciAoICdBY2NlcHQnICwgaUlJSWlpIFsgJ2FjY2VwdCcgXSApCiAgICAgaWYgJ2FnZW50JyBpbiBpSUlJaWkgOgogICAgICBPMDBvTyAuIGFkZF9oZWFkZXIgKCAnVXNlci1hZ2VudCcgLCBpSUlJaWkgWyAnYWdlbnQnIF0gKQogICAgIGlmICd4LXJlcScgaW4gaUlJSWlpIDoKICAgICAgTzAwb08gLiBhZGRfaGVhZGVyICggJ1gtUmVxdWVzdGVkLVdpdGgnICwgaUlJSWlpIFsgJ3gtcmVxJyBdICkKICAgICBpZiAneC1hZGRyJyBpbiBpSUlJaWkgOgogICAgICBPMDBvTyAuIGFkZF9oZWFkZXIgKCAneC1hZGRyJyAsIGlJSUlpaSBbICd4LWFkZHInIF0gKQogICAgIGlmICd4LWZvcndhcmQnIGluIGlJSUlpaSA6CiAgICAgIE8wMG9PIC4gYWRkX2hlYWRlciAoICdYLUZvcndhcmRlZC1Gb3InICwgaUlJSWlpIFsgJ3gtZm9yd2FyZCcgXSApCiAgICAgaWYgJ3NldGNvb2tpZScgaW4gaUlJSWlpIDoKICAgICAgaWYgNDAgLSA0MDogSWlpSQogICAgICBPMDBvTyAuIGFkZF9oZWFkZXIgKCAnQ29va2llJyAsIGlJSUlpaSBbICdzZXRjb29raWUnIF0gKQogICAgIGlmICdhcHBlbmRjb29raWUnIGluIGlJSUlpaSA6CiAgICAgIGlmIDY3IC0gNjc6IG8wT08wICsgb29PME9PMDAwbyAtIG8wbzAwT28wTyAuIG8wT08wICogb29PME9PMDAwbyAqIEkxaTFpSTFpCiAgICAgIG8wME9PMDBPMG9PTyA9IGlJSUlpaSBbICdhcHBlbmRjb29raWUnIF0KICAgICAgbzAwT08wME8wb09PID0gbzAwT08wME8wb09PIC4gc3BsaXQgKCAnOycgKQogICAgICBmb3IgSWkxaUkxMTEgaW4gbzAwT08wME8wb09PIDoKICAgICAgIE8wb29vbzAwbzBPbyAsIEkxaWlpID0gSWkxaUkxMTEgLiBzcGxpdCAoICc9JyApCiAgICAgICBvTzBvME8wT29vMG8gLCBPMG9vb28wMG8wT28gPSBPMG9vb28wMG8wT28gLiBzcGxpdCAoICc6JyApCiAgICAgICBpMUlpMTFJSSA9IGNvb2tpZWxpYiAuIENvb2tpZSAoIHZlcnNpb24gPSAwICwgbmFtZSA9IE8wb29vbzAwbzBPbyAsIHZhbHVlID0gSTFpaWkgLCBwb3J0ID0gTm9uZSAsIHBvcnRfc3BlY2lmaWVkID0gRmFsc2UgLCBkb21haW4gPSBvTzBvME8wT29vMG8gLCBkb21haW5fc3BlY2lmaWVkID0gRmFsc2UgLCBkb21haW5faW5pdGlhbF9kb3QgPSBGYWxzZSAsIHBhdGggPSAnLycgLCBwYXRoX3NwZWNpZmllZCA9IFRydWUgLCBzZWN1cmUgPSBGYWxzZSAsIGV4cGlyZXMgPSBOb25lICwgZGlzY2FyZCA9IFRydWUgLCBjb21tZW50ID0gTm9uZSAsIGNvbW1lbnRfdXJsID0gTm9uZSAsIHJlc3QgPSB7ICdIdHRwT25seScgOiBOb25lIH0gLCByZmMyMTA5ID0gRmFsc2UgKQogICAgICAgY29va2llSmFyIC4gc2V0X2Nvb2tpZSAoIGkxSWkxMUlJICkKICAgICBpZiAnb3JpZ2luJyBpbiBpSUlJaWkgOgogICAgICBPMDBvTyAuIGFkZF9oZWFkZXIgKCAnT3JpZ2luJyAsIGlJSUlpaSBbICdvcmlnaW4nIF0gKQogICAgIGlmIE9vb29vTzBvT08gOgogICAgICBPb29vb08wb09PID0gT29vb29PMG9PTyAuIHNwbGl0ICggJyYnICkKICAgICAgZm9yIElpMWlJMTExIGluIE9vb29vTzBvT08gOgogICAgICAgTzBvb29vMDBvME9vICwgSTFpaWkgPSBJaTFpSTExMSAuIHNwbGl0ICggJz0nICkKICAgICAgIE8wMG9PIC4gYWRkX2hlYWRlciAoIE8wb29vbzAwbzBPbyAsIEkxaWlpICkKICAgICAgIGlmIDE4IC0gMTg6IG9vTzBPTzAwMG8gLiBpaSAlIG9Pb08wb28wT09PbyAlIG8wMG9vbzAKICAgICBpZiBub3QgY29va2llSmFyID09IE5vbmUgOgogICAgICBpZiA5IC0gOTogaTExaWkxMWlJaTExaSAtIGkxaUlpMTFpSUlpMUkgKiBpaSAuIGkxaUlpMTFpSUlpMUkKICAgICAgaWkxSWkxSWlJSWkgPSB1cmxsaWIyIC4gSFRUUENvb2tpZVByb2Nlc3NvciAoIGNvb2tpZUphciApCiAgICAgIE9Pb08wID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIGlpMUlpMUlpSUlpICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogICAgICBPT29PMCA9IHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIE9Pb08wICkKICAgICAgaWYgODMgLSA4MzogSTFpMWlJMWkgLyBJaWkxaWkxSUkxMWkKICAgICAgaWYgMzQgLSAzNDogSTExaTExSWkgKiBpMWlJaTExaUlJaTFJICogb29PMDBvT29vIC8gaTExaWkxMWlJaTExaSAqIEkxaTFpSTFpIC8gaUkxMUkxSUkxSTFJCiAgICAgIGlmICdub3JlZGlyZWN0JyBpbiBpSUlJaWkgOgogICAgICAgT09vTzAgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggaWkxSWkxSWlJSWkgLCBpSSAsIHVybGxpYjIgLiBIVFRQQmFzaWNBdXRoSGFuZGxlciAoICkgLCB1cmxsaWIyIC4gSFRUUEhhbmRsZXIgKCApICkKICAgICAgIE9Pb08wID0gdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggT09vTzAgKQogICAgIGVsaWYgJ25vcmVkaXJlY3QnIGluIGlJSUlpaSA6CiAgICAgIE9Pb08wID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIGlJICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogICAgICBPT29PMCA9IHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIE9Pb08wICkKICAgICAgaWYgNzQgLSA3NDogaTFpSWkxMWlJSWkxSSAvIElpIC0gb29PME9PMDAwbyAqIElpaUkKICAgICAgaWYgNSAtIDU6IE9vMG9vTzBvbzBvTyAtIE9vMG9vTzBvbzBvTyAuIGkxaUlpMTFpSUlpMUkgKyBvT29PMG9vME9PT28gLSBPbzBvb08wb28wb08gLiBvME9PMAogICAgIGlmICdjb25uZWN0aW9uJyBpbiBpSUlJaWkgOgogICAgICBpZiAzMSAtIDMxOiBvb08wT08wMDBvIC0gaUkxMUkxSUkxSTFJIC0gaUkxMUkxSUkxSTFJICUgSTFpMWlJMWkKICAgICAgZnJvbSBrZWVwYWxpdmUgaW1wb3J0IEhUVFBIYW5kbGVyCiAgICAgIGlpaSA9IEhUVFBIYW5kbGVyICggKQogICAgICBPT29PMCA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBpaWkgKQogICAgICB1cmxsaWIyIC4gaW5zdGFsbF9vcGVuZXIgKCBPT29PMCApCiAgICAgIGlmIDI3IC0gMjc6IEkxaTFpSTFpIC8gSWkgLyBpaTFJICsgb29PMDBvT29vCiAgICAgIGlmIDM0IC0gMzQ6IE9vMG9vTzBvbzBvTwogICAgICBpZiA5MSAtIDkxOiBpSTExSTFJSTFJMUkgJSBJaWlJIC4gaUkxMUkxSUkxSTFJICUgaWkxSSAvIG9vTzBPTzAwMG8gKiBvT29PMG9vME9PT28KICAgICBpaW9vMG8wT29PT08gPSBOb25lCiAgICAgaWYgODggLSA4ODogbzAwCiAgICAgaWYgJ3Bvc3QnIGluIGlJSUlpaSA6CiAgICAgIGlpSTExSTFpMWkxaUkgPSBpSUlJaWkgWyAncG9zdCcgXQogICAgICBpZiA2MCAtIDYwOiBpaSAlIGkxaUlpMTFpSUlpMUkgKyBPbzBvb08wb28wb08gLiBPME9PbyAqIGlJMTFJMUlJMUkxSQogICAgICBpZiA5MyAtIDkzOiBpMTFpaTExaUlpMTFpCiAgICAgIGlmIDUgLSA1OiBJMWkxaUkxaSAvIE9vMG9vTzBvbzBvTwogICAgICBpZiA3NyAtIDc3OiBPME9PbyAtIEkxMWkxMUlpICUgSTFpMWlJMWkgLSBvMG8wME9vME8KICAgICAgbzBPME8wID0gaWlJMTFJMWkxaTFpSSAuIHNwbGl0ICggJywnICkgOwogICAgICBpaW9vMG8wT29PT08gPSB7IH0KICAgICAgZm9yIEkxMSBpbiBvME8wTzAgOgogICAgICAgTzBvb29vMDBvME9vID0gSTExIC4gc3BsaXQgKCAnOicgKSBbIDAgXSA7CiAgICAgICBJMWlpaSA9IEkxMSAuIHNwbGl0ICggJzonICkgWyAxIF0gOwogICAgICAgaWlvbzBvME9vT09PIFsgTzBvb29vMDBvME9vIF0gPSBJMWlpaQogICAgICBpaW9vMG8wT29PT08gPSB1cmxsaWIgLiB1cmxlbmNvZGUgKCBpaW9vMG8wT29PT08gKQogICAgICBpZiA4NyAtIDg3OiBvT29PMG9vME9PT28KICAgICBpZiAncmF3cG9zdCcgaW4gaUlJSWlpIDoKICAgICAgaWlvbzBvME9vT09PID0gaUlJSWlpIFsgJ3Jhd3Bvc3QnIF0KICAgICAgaWYgMjUgLSAyNTogaWkxSSAuIGkxMWlpMTFpSWkxMWkgLSBvT29PMG9vME9PT28gLyBpMTFpaTExaUlpMTFpICUgaTExaWkxMWlJaTExaSAqIGlJMTFJMUlJMUkxSQogICAgICBpZiA1MCAtIDUwOiBpMTFpaTExaUlpMTFpIC4gSWkgLSBvME9PMCAuIG8wT08wCiAgICAgIGlmIDMxIC0gMzE6IE9vMG9vTzBvbzBvTyAvIGkxaUlpMTFpSUlpMUkgKiBpaTFJIC4gb09vTzBvbzBPT09vCiAgICAgIGlmIDU3IC0gNTc6IE9vMG9vTzBvbzBvTyArIGlJMTFJMUlJMUkxSSAlIGlpMUkgJSBJMTFpMTFJaQogICAgIE9vb29vb28gPSAnJwogICAgIHRyeSA6CiAgICAgIGlmIDgzIC0gODM6IElpaUkgLyBJaSAlIGlJMTFJMUlJMUkxSSAuIEkxaTFpSTFpICUgbzBPTzAgLiBpaQogICAgICBpZiBpaW9vMG8wT29PT08gOgogICAgICAgSTExaTFJMUkgPSB1cmxsaWIyIC4gdXJsb3BlbiAoIE8wMG9PICwgaWlvbzBvME9vT09PICkKICAgICAgZWxzZSA6CiAgICAgICBJMTFpMUkxSSA9IHVybGxpYjIgLiB1cmxvcGVuICggTzAwb08gKQogICAgICBpZiBJMTFpMUkxSSAuIGluZm8gKCApIC4gZ2V0ICggJ0NvbnRlbnQtRW5jb2RpbmcnICkgPT0gJ2d6aXAnIDoKICAgICAgIGZyb20gU3RyaW5nSU8gaW1wb3J0IFN0cmluZ0lPCiAgICAgICBpbXBvcnQgZ3ppcAogICAgICAgbzAwb08wMCA9IFN0cmluZ0lPICggSTExaTFJMUkgLiByZWFkICggKSApCiAgICAgICBPTzBvT09vID0gZ3ppcCAuIEd6aXBGaWxlICggZmlsZW9iaiA9IG8wMG9PMDAgKQogICAgICAgT29vb29vbyA9IE9PMG9PT28gLiByZWFkICggKQogICAgICBlbHNlIDoKICAgICAgIE9vb29vb28gPSBJMTFpMUkxSSAuIHJlYWQgKCApCiAgICAgICBpZiA5NCAtIDk0OiBJaWlJICsgaWkgKiBJMWkxaUkxaSAtIGkxaUlpMTFpSUlpMUkgLiBPbzBvTzBvb28gLSBJaWlJCiAgICAgICBpZiAzOSAtIDM5OiBvMDBvb28wICogTzBPT28gLyBvT29PMG9vME9PT28gKiBpMTFpaTExaUlpMTFpIC4gSTFpMWlJMWkgJSBvb08wT08wMDBvCiAgICAgICBpZiA3MSAtIDcxOiBvb08wMG9Pb28gJSBpaTFJIC0gb29PME9PMDAwbyAtIE9vMG9vTzBvbzBvTyArIE9vMG9vTzBvbzBvTyAqIE8wT09vCiAgICAgIGlmICdwcm94eScgaW4gaUlJSWlpIGFuZCBub3QgT29PaUlJaWlpIGlzIE5vbmUgOgogICAgICAgdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIE9vT2lJSWlpaSApICkKICAgICAgIGlmIDUxIC0gNTE6IGlJMTFJMUlJMUkxSSAvIG9Pb08wb28wT09PbyArIE9vMG9vTzBvbzBvTyAtIEkxaTFpSTFpICsgbzAwCiAgICAgIE9vb29vb28gPSBJSWlpMWkxaWlpMSAoIE9vb29vb28gKQogICAgICBpZiA3MCAtIDcwOiBJaSAlIG8wMAogICAgICBpZiAxMSAtIDExOiBPbzBvTzBvb28gJSBJaWkxaWkxSUkxMWkgJSBvMDBvb28wIC8gb29PME9PMDAwbyAlIG9vTzAwb09vbyAtIGkxaUlpMTFpSUlpMUkKICAgICAgaWYgJ2luY2x1ZGVoZWFkZXJzJyBpbiBpSUlJaWkgOgogICAgICAgaWYgOTYgLSA5NjogSWlpMWlpMUlJMTFpIC8gb29PME9PMDAwbyAuIG8wMG9vbzAgLSBvMDAgKiBJMWkxaUkxaSAqIG8wT08wCiAgICAgICBPb29vb29vICs9ICckJEhFQURFUlNfU1RBUlQkJDonCiAgICAgICBmb3IgT28wb08gaW4gSTExaTFJMUkgLiBoZWFkZXJzIDoKICAgICAgICBPb29vb29vICs9IE9vMG9PICsgJzonICsgSTExaTFJMUkgLiBoZWFkZXJzIC4gZ2V0ICggT28wb08gKSArICdcbicKICAgICAgIE9vb29vb28gKz0gJyQkSEVBREVSU19FTkQkJDonCiAgICAgICBpZiA3NiAtIDc2OiBvMDBvb28wIC0gb29PME9PMDAwbyAqIE9vMG9vTzBvbzBvTyAvIGlpCiAgICAgIGkxSUkxICggT29vb29vbyApCiAgICAgIGkxSUkxICggY29va2llSmFyICkKICAgICAgaWYgMTggLSAxODogaTExaWkxMWlJaTExaSArIGlJMTFJMUlJMUkxSSAtIG9vTzBPTzAwMG8gLSBJMTFpMTFJaQogICAgICBJMTFpMUkxSSAuIGNsb3NlICggKQogICAgIGV4Y2VwdCA6CiAgICAgIHBhc3MKICAgICBjYWNoZWRQYWdlcyBbIGlJSUlpaSBbICdwYWdlJyBdIF0gPSBPb29vb29vCiAgICAgaWYgNzEgLSA3MTogaWkKICAgICBpZiAzMyAtIDMzOiBvb08wMG9Pb28KICAgICBpZiA2MiAtIDYyOiBJaWkxaWkxSUkxMWkgKyBvMDBvb28wICsgaWkxSSAvIGlpCiAgICAgaWYgZm9yQ29va2llSmFyT25seSA6CiAgICAgIHJldHVybiBjb29raWVKYXIKICAgIGVsaWYgaUlJSWlpIFsgJ3BhZ2UnIF0gYW5kIG5vdCBpSUlJaWkgWyAncGFnZScgXSAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgICAgaWYgaUlJSWlpIFsgJ3BhZ2UnIF0gLiBzdGFydHN3aXRoICggJyRweUZ1bmN0aW9uOicgKSA6CiAgICAgIElJaWlpaSA9IGlJMTExaTFJMUlJICggaUlJSWlpIFsgJ3BhZ2UnIF0gLiBzcGxpdCAoICckcHlGdW5jdGlvbjonICkgWyAxIF0gLCAnJyAsIGNvb2tpZUphciAsIGlJSUlpaSApCiAgICAgIGlmIGZvckNvb2tpZUphck9ubHkgOgogICAgICAgcmV0dXJuIGNvb2tpZUphcgogICAgICBPb29vb29vID0gSUlpaWlpCiAgICAgIE9vb29vb28gPSBJSWlpMWkxaWlpMSAoIE9vb29vb28gKQogICAgIGVsc2UgOgogICAgICBPb29vb29vID0gaUlJSWlpIFsgJ3BhZ2UnIF0KICAgaWYgJyRweUZ1bmN0aW9uOnBsYXltZWRpYSgnIGluIGlJSUlpaSBbICdleHByZXMnIF0gb3IgJ0FjdGl2YXRlV2luZG93JyBpbiBpSUlJaWkgWyAnZXhwcmVzJyBdIG9yICckUExBWUVSUFJPWFkkPScgaW4gdXJsIG9yIGFueSAoIHggaW4gdXJsIGZvciB4IGluIElJICkgOgogICAgT28wMDBvb09PTyA9IEZhbHNlCiAgIGlmICckZG9yZWdleCcgaW4gaUlJSWlpIFsgJ2V4cHJlcycgXSA6CiAgICBpSUlJaWkgWyAnZXhwcmVzJyBdID0gaUlJMTExaSAoIHJlZ2V4cyAsIGlJSUlpaSBbICdleHByZXMnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICBpZiBub3QgaUlJSWlpIFsgJ2V4cHJlcycgXSA9PSAnJyA6CiAgICBpZiA5NiAtIDk2OiBvb08wMG9Pb28gLyBpMWlJaTExaUlJaTFJICogb29PME9PMDAwbyAtIG8wMCAqIGkxaUlpMTFpSUlpMUkKICAgIGlmICckTGl2ZVN0cmVhbUNhcHRjaGEnIGluIGlJSUlpaSBbICdleHByZXMnIF0gOgogICAgIElJaWlpaSA9IG8wICggaUlJSWlpICwgT29vb29vbyAsIGNvb2tpZUphciApCiAgICAgaWYgMjAgLSAyMDogaWkgKiBJaWlJICogbzBvMDBPbzBPIC4gT28wb29PMG9vMG9PCiAgICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICIkZG9yZWdleFsiICsgSWkxMWkxSTExaSArICJdIiAsIElJaWlpaSApCiAgICAgaWYgNzggLSA3ODogaUkxMUkxSUkxSTFJICsgSTFpMWlJMWkgLSBvMDBvb28wICogb29PMDBvT29vIC0gaWkgJSBvT29PMG9vME9PT28KICAgIGVsaWYgaUlJSWlpIFsgJ2V4cHJlcycgXSAuIHN0YXJ0c3dpdGggKCAnJHB5RnVuY3Rpb246JyApIG9yICcjJHB5RnVuY3Rpb24nIGluIGlJSUlpaSBbICdleHByZXMnIF0gOgogICAgIGlmIDM0IC0gMzQ6IG8wbzAwT28wTwogICAgIElJaWlpaSA9ICcnCiAgICAgaWYgaUlJSWlpIFsgJ2V4cHJlcycgXSAuIHN0YXJ0c3dpdGggKCAnJHB5RnVuY3Rpb246JyApIDoKICAgICAgSUlpaWlpID0gaUkxMTFpMUkxSUkgKCBpSUlJaWkgWyAnZXhwcmVzJyBdIC4gc3BsaXQgKCAnJHB5RnVuY3Rpb246JyApIFsgMSBdICwgT29vb29vbyAsIGNvb2tpZUphciAsIGlJSUlpaSApCiAgICAgZWxzZSA6CiAgICAgIElJaWlpaSA9IE9vb09PT28wICggaUlJSWlpIFsgJ2V4cHJlcycgXSAsIE9vb29vb28gLCBjb29raWVKYXIgLCBpSUlJaWkgKQogICAgIGlmICdBY3RpdmF0ZVdpbmRvdycgaW4gaUlJSWlpIFsgJ2V4cHJlcycgXSA6IHJldHVybgogICAgIGlmIDU0IC0gNTQ6IG8wMG9vbzAgLSBJMWkxaUkxaSAtIG9vTzAwb09vbyAuIGlJMTFJMUlJMUkxSQogICAgIGlmIDc5IC0gNzk6IG8wMG9vbzAgLiBpMTFpaTExaUlpMTFpCiAgICAgaWYgNDAgLSA0MDogSWlpSSArIGkxaUlpMTFpSUlpMUkgLiBJaWlJICUgTzBPT28KICAgICB0cnkgOgogICAgICB1cmwgPSB1cmwgLiByZXBsYWNlICggdSIkZG9yZWdleFsiICsgSWkxMWkxSTExaSArICJdIiAsIElJaWlpaSApCiAgICAgZXhjZXB0IDogdXJsID0gdXJsIC4gcmVwbGFjZSAoICIkZG9yZWdleFsiICsgSWkxMWkxSTExaSArICJdIiAsIElJaWlpaSAuIGRlY29kZSAoICJ1dGYtOCIgKSApCiAgICBlbHNlIDoKICAgICBpZiAnbGlzdHJlcGVhdCcgaW4gaUlJSWlpIDoKICAgICAgSTExSTFJSWlpSUkxID0gaUlJSWlpIFsgJ2xpc3RyZXBlYXQnIF0KICAgICAgSUlJSUlpaTFpaTExID0gcmUgLiBmaW5kYWxsICggaUlJSWlpIFsgJ2V4cHJlcycgXSAsIE9vb29vb28gKQogICAgICByZXR1cm4gSTExSTFJSWlpSUkxICwgSUlJSUlpaTFpaTExICwgaUlJSWlpICwgcmVnZXhzCiAgICAgIGlmIDg2IC0gODY6IG9Pb08wb28wT09PbyAqIG9vTzBPTzAwMG8gLSBvMG8wME9vME8gLiBvT29PMG9vME9PT28gJSBpSTExSTFJSTFJMUkgLyBPbzBvb08wb28wb08KICAgICBJSWlpaWkgPSAnJwogICAgIGlmIG5vdCBPb29vb29vID09ICcnIDoKICAgICAgaWYgMTEgLSAxMTogSTExaTExSWkgKiBvME9PMCArIElpaTFpaTFJSTExaSAvIElpaTFpaTFJSTExaQogICAgICBpaWlpMUkxID0gcmUgLiBjb21waWxlICggaUlJSWlpIFsgJ2V4cHJlcycgXSApIC4gc2VhcmNoICggT29vb29vbyApCiAgICAgIHRyeSA6CiAgICAgICBJSWlpaWkgPSBpaWlpMUkxIC4gZ3JvdXAgKCAxICkgLiBzdHJpcCAoICkKICAgICAgZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQogICAgICBpZiBpSUlJaWkgWyAncGFnZScgXSA9PSAnJyA6CiAgICAgICBJSWlpaWkgPSBpSUlJaWkgWyAnZXhwcmVzJyBdCiAgICAgICBpZiAxNCAtIDE0OiBvT29PMG9vME9PT28gKiBJMTFpMTFJaSArIGlpIC0gbzAwIC0gT28wb08wb29vCiAgICAgaWYgcmF3UG9zdCA6CiAgICAgIGlmIDE1IC0gMTU6IE9vMG9PMG9vbyAvIG8wbzAwT28wTyAuIElpaUkgLiBJaQogICAgICBJSWlpaWkgPSB1cmxsaWIgLiBxdW90ZV9wbHVzICggSUlpaWlpICkKICAgICBpZiAnaHRtbHVuZXNjYXBlJyBpbiBpSUlJaWkgOgogICAgICBpZiA1OSAtIDU5OiBvb08wMG9Pb28gLSBJaWlJIC0gTzBPT28KICAgICAgaW1wb3J0IEhUTUxQYXJzZXIKICAgICAgSUlpaWlpID0gSFRNTFBhcnNlciAuIEhUTUxQYXJzZXIgKCApIC4gdW5lc2NhcGUgKCBJSWlpaWkgKQogICAgIHRyeSA6CiAgICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIElpMTFpMUkxMWkgKyAiXSIgLCBJSWlpaWkgKQogICAgIGV4Y2VwdCA6IHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIElpMTFpMUkxMWkgKyAiXSIgLCBJSWlpaWkgLiBkZWNvZGUgKCAidXRmLTgiICkgKQogICAgIGlmIDQ4IC0gNDg6IGlpMUkgKyBJMWkxaUkxaSAlIG9Pb08wb28wT09PbyAvIGkxaUlpMTFpSUlpMUkgLSBJaWlJCiAgICAgaWYgNjcgLSA2NzogbzBPTzAgJSBJaWlJIC4gaWkgKyBPbzBvb08wb28wb08gKiBJMWkxaUkxaSAqIG9Pb08wb28wT09PbwogICBlbHNlIDoKICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIElpMTFpMUkxMWkgKyAiXSIgLCAnJyApCiBpZiAnJGVwb2N0aW1lJCcgaW4gdXJsIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgb08gKCApICkKIGlmICckZXBvY3RpbWUyJCcgaW4gdXJsIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRlcG9jdGltZTIkJyAsIEkxSWkxMTExaUlpICggKSApCiAgaWYgMzYgLSAzNjogbzBvMDBPbzBPICsgaTFpSWkxMWlJSWkxSQogaWYgJyRHVUlEJCcgaW4gdXJsIDoKICBpbXBvcnQgdXVpZAogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJEdVSUQkJyAsIHN0ciAoIHV1aWQgLiB1dWlkMSAoICkgKSAuIHVwcGVyICggKSApCiBpZiAnJGdldF9jb29raWVzJCcgaW4gdXJsIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRnZXRfY29va2llcyQnICwgaUlJSWkxaTFJMTFpICggY29va2llSmFyICkgKQogIGlmIDU1IC0gNTU6IGkxaUlpMTFpSUlpMUkgLSBPbzBvb08wb28wb08KIGlmIHJlY3Vyc2l2ZUNhbGwgOiByZXR1cm4gdXJsCiBpZiA4NCAtIDg0OiBvb08wMG9Pb28gKyBpMWlJaTExaUlJaTFJIC0gb09vTzBvbzBPT09vICogb09vTzBvbzBPT09vCiBpZiB1cmwgPT0gIiIgOgogIHJldHVybgogZWxzZSA6CiAgcmV0dXJuIHVybCAsIE9vMDAwb29PT08KICBpZiA2MSAtIDYxOiBpaSAuIG8wT08wIC4gaWkgLyBpMWlJaTExaUlJaTFJCiAgaWYgNzIgLSA3MjogaWkxSQpkZWYgT09vbzBvbyAoIHQgKSA6CiBpbXBvcnQgaGFzaGxpYgogSWkxaUkxMTEgPSBoYXNobGliIC4gbWQ1ICggKQogSWkxaUkxMTEgLiB1cGRhdGUgKCB0ICkKIHJldHVybiBJaTFpSTExMSAuIGhleGRpZ2VzdCAoICkKIGlmIDU4IC0gNTg6IG8wT08wCiBpZiA0IC0gNDogb29PME9PMDAwbyAuIE8wT09vIC8gSWlpMWlpMUlJMTFpIC0gSWkKZGVmIE9vTzAwICggZW5jcnlwdGVkICkgOgogSTExaUlpMUlJID0gIiIKIGlmIDYwIC0gNjA6IGlJMTFJMUlJMUkxSSArIGlpMUkKIGlmIDg2IC0gODY6IGlJMTFJMUlJMUkxSSArIG9Pb08wb28wT09PbyAuIElpIC0gbzAwb29vMAogaWYgNTEgLSA1MTogb09vTzBvbzBPT09vCiBpZiAxNCAtIDE0OiBPbzBvTzBvb28gJSBvME9PMCAlIGkxaUlpMTFpSUlpMUkgLSBJaQogaWYgNTMgLSA1MzogbzAwb29vMCAlIGkxaUlpMTFpSUlpMUkKIGlmIDU5IC0gNTk6IE9vMG9vTzBvbzBvTyAlIGlJMTFJMUlJMUkxSSAuIGlpMUkgKyBvb08wT08wMDBvICogT28wb08wb29vCmRlZiBpMUlpaUkxaUlpICggbWVkaWFfdXJsICkgOgogdHJ5IDoKICBpbXBvcnQgQ3VzdG9tUGxheWVyCiAgb09PbzAwTzBPT09vID0gQ3VzdG9tUGxheWVyIC4gTXlYQk1DUGxheWVyICggKQogIGkxMUkxSTFpaUkgPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBsYWJlbCA9IHN0ciAoIGlpSWlJICkgLCBpY29uSW1hZ2UgPSAiRGVmYXVsdFZpZGVvLnBuZyIgLCB0aHVtYm5haWxJbWFnZSA9IHhibWMgLiBnZXRJbmZvSW1hZ2UgKCAiTGlzdEl0ZW0uVGh1bWIiICkgLCBwYXRoID0gbWVkaWFfdXJsICkKICBvT09vMDBPME9PT28gLiBwbGF5ICggbWVkaWFfdXJsICwgaTExSTFJMWlpSSApCiAgeGJtYyAuIHNsZWVwICggMTAwMCApCiAgd2hpbGUgb09PbzAwTzBPT09vIC4gaXNfYWN0aXZlIDoKICAgeGJtYyAuIHNsZWVwICggMjAwICkKIGV4Y2VwdCA6CiAgdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQogcmV0dXJuICcnCiBpZiAzNCAtIDM0OiBJMWkxaUkxaSAlIE8wT09vIC4gbzBvMDBPbzBPIC4gaUkxMUkxSUkxSTFJCiBpZiA5MyAtIDkzOiBpaTFJIC4gSWkgLiBpMWlJaTExaUlJaTFJCmRlZiBPME8wME9PbyAoIHBhcmFtcyApIDoKIG9PME9vID0ganNvbiAuIGR1bXBzICggcGFyYW1zICkKIE9vT09vID0geGJtYyAuIGV4ZWN1dGVKU09OUlBDICggb08wT28gKQogaWYgMTcgLSAxNzogaWkxSQogdHJ5IDoKICBJMTFpMUkxSSA9IGpzb24gLiBsb2FkcyAoIE9vT09vICkKIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3IgOgogIEkxMWkxSTFJID0ganNvbiAuIGxvYWRzICggT29PT28gLiBkZWNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiAgaWYgMSAtIDE6IE8wT09vCiB0cnkgOgogIGlmICdyZXN1bHQnIGluIEkxMWkxSTFJIDoKICAgcmV0dXJuIEkxMWkxSTFJIFsgJ3Jlc3VsdCcgXQogIHJldHVybiBOb25lCiBleGNlcHQgS2V5RXJyb3IgOgogIGxvZ2dlciAuIHdhcm4gKCAiWyVzXSAlcyIgJSAoIHBhcmFtcyBbICdtZXRob2QnIF0gLCBJMTFpMUkxSSBbICdlcnJvcicgXSBbICdtZXNzYWdlJyBdICkgKQogIHJldHVybiBOb25lCiAgaWYgNzggLSA3ODogSWlpMWlpMUlJMTFpICsgSTFpMWlJMWkgLSBvMG8wME9vME8KICBpZiAxMCAtIDEwOiBvb08wMG9Pb28gJSBJMTFpMTFJaQpkZWYgb28wT29Pb29vICggcHJveHlzZXR0aW5ncyA9IE5vbmUgKSA6CiBpZiA5NSAtIDk1OiBPbzBvTzBvb28gKiBJaWkxaWkxSUkxMWkgJSBPME9PbyAlIG8wMG9vbzAgLSBvMDBvb28wCiBpZiBwcm94eXNldHRpbmdzID09IE5vbmUgOgogIGlmIDk3IC0gOTc6IElpaTFpaTFJSTExaSArIGlJMTFJMUlJMUkxSSAuIG8wbzAwT28wTwogIHhibWMgLiBleGVjdXRlSlNPTlJQQyAoICd7Impzb25ycGMiOiIyLjAiLCAibWV0aG9kIjoiU2V0dGluZ3MuU2V0U2V0dGluZ1ZhbHVlIiwgInBhcmFtcyI6eyJzZXR0aW5nIjoibmV0d29yay51c2VodHRwcHJveHkiLCAidmFsdWUiOmZhbHNlfSwgImlkIjoxfScgKQogZWxzZSA6CiAgaWYgNjQgLSA2NDogaWkxSSAlIE8wT09vIC8gSWkgLSBpaTFJICUgT28wb29PMG9vMG9PIC4gbzAwCiAgSUkxaTExMSA9IHByb3h5c2V0dGluZ3MgLiBzcGxpdCAoICc6JyApCiAgaTFpaWlJaWkxMSA9IElJMWkxMTEgWyAwIF0KICBPT29PT08wMDBPMCA9IElJMWkxMTEgWyAxIF0KICBvT28wID0gSUkxaTExMSBbIDIgXQogIElJMWkxMUkxID0gTm9uZQogIGlpSWlJaUlJID0gTm9uZQogIGlmIDM3IC0gMzc6IEkxaTFpSTFpIC8gT28wb08wb29vICsgb29PME9PMDAwbwogIGlmIGxlbiAoIElJMWkxMTEgKSA+IDMgYW5kICdAJyBpbiBJSTFpMTExIFsgMyBdIDoKICAgSUkxaTExSTEgPSBJSTFpMTExIFsgMyBdIC4gc3BsaXQgKCAnQCcgKSBbIDAgXQogICBpaUlpSWlJSSA9IElJMWkxMTEgWyAzIF0gLiBzcGxpdCAoICdAJyApIFsgMSBdCiAgIGlmIDE4IC0gMTg6IElpaTFpaTFJSTExaQogICBpZiAyMyAtIDIzOiBvb08wT08wMDBvCiAgeGJtYyAuIGV4ZWN1dGVKU09OUlBDICggJ3sianNvbnJwYyI6IjIuMCIsICJtZXRob2QiOiJTZXR0aW5ncy5TZXRTZXR0aW5nVmFsdWUiLCAicGFyYW1zIjp7InNldHRpbmciOiJuZXR3b3JrLnVzZWh0dHBwcm94eSIsICJ2YWx1ZSI6dHJ1ZX0sICJpZCI6MX0nICkKICB4Ym1jIC4gZXhlY3V0ZUpTT05SUEMgKCAneyJqc29ucnBjIjoiMi4wIiwgIm1ldGhvZCI6IlNldHRpbmdzLlNldFNldHRpbmdWYWx1ZSIsICJwYXJhbXMiOnsic2V0dGluZyI6Im5ldHdvcmsuaHR0cHByb3h5dHlwZSIsICJ2YWx1ZSI6JyArIHN0ciAoIG9PbzAgKSArICd9LCAiaWQiOjF9JyApCiAgeGJtYyAuIGV4ZWN1dGVKU09OUlBDICggJ3sianNvbnJwYyI6IjIuMCIsICJtZXRob2QiOiJTZXR0aW5ncy5TZXRTZXR0aW5nVmFsdWUiLCAicGFyYW1zIjp7InNldHRpbmciOiJuZXR3b3JrLmh0dHBwcm94eXNlcnZlciIsICJ2YWx1ZSI6IicgKyBzdHIgKCBpMWlpaUlpaTExICkgKyAnIn0sICJpZCI6MX0nICkKICB4Ym1jIC4gZXhlY3V0ZUpTT05SUEMgKCAneyJqc29ucnBjIjoiMi4wIiwgIm1ldGhvZCI6IlNldHRpbmdzLlNldFNldHRpbmdWYWx1ZSIsICJwYXJhbXMiOnsic2V0dGluZyI6Im5ldHdvcmsuaHR0cHByb3h5cG9ydCIsICJ2YWx1ZSI6JyArIHN0ciAoIE9Pb09PTzAwME8wICkgKyAnfSwgImlkIjoxfScgKQogIGlmIDI0IC0gMjQ6IGlJMTFJMUlJMUkxSSArIGlJMTFJMUlJMUkxSSAqIG8wMAogIGlmIDE4IC0gMTg6IG8wMCAqIEkxaTFpSTFpIC0gbzAwb29vMAogIGlmIG5vdCBJSTFpMTFJMSA9PSBOb25lIDoKICAgeGJtYyAuIGV4ZWN1dGVKU09OUlBDICggJ3sianNvbnJwYyI6IjIuMCIsICJtZXRob2QiOiJTZXR0aW5ncy5TZXRTZXR0aW5nVmFsdWUiLCAicGFyYW1zIjp7InNldHRpbmciOiJuZXR3b3JrLmh0dHBwcm94eXVzZXJuYW1lIiwgInZhbHVlIjoiJyArIHN0ciAoIElJMWkxMUkxICkgKyAnIn0sICJpZCI6MX0nICkKICAgeGJtYyAuIGV4ZWN1dGVKU09OUlBDICggJ3sianNvbnJwYyI6IjIuMCIsICJtZXRob2QiOiJTZXR0aW5ncy5TZXRTZXR0aW5nVmFsdWUiLCAicGFyYW1zIjp7InNldHRpbmciOiJuZXR3b3JrLmh0dHBwcm94eXBhc3N3b3JkIiwgInZhbHVlIjoiJyArIHN0ciAoIGlpSWlJaUlJICkgKyAnIn0sICJpZCI6MX0nICkKICAgaWYgMzEgLSAzMTogaTFpSWkxMWlJSWkxSSAtIG8wbzAwT28wTyAlIG9Pb08wb28wT09PbyAlIG8wT08wCiAgIGlmIDQ1IC0gNDU6IElpaTFpaTFJSTExaSArIG9vTzBPTzAwMG8gKiBJaQpkZWYgSWlJSWkxSTFJMTFJaSAoICkgOgogbzBPTyA9IE8wTzAwT09vICggeyAnanNvbnJwYycgOiAnMi4wJyAsICJtZXRob2QiIDogIlNldHRpbmdzLkdldFNldHRpbmdWYWx1ZSIgLCAicGFyYW1zIiA6IHsgInNldHRpbmciIDogIm5ldHdvcmsudXNlaHR0cHByb3h5IiB9ICwgJ2lkJyA6IDEgfSApIFsgJ3ZhbHVlJyBdCiBpZiA1OCAtIDU4OiBpaSAuIEkxMWkxMUlpIC8gb29PME9PMDAwbyAvIG9vTzBPTzAwMG8gLSBPbzBvTzBvb28gKyBpMWlJaTExaUlJaTFJCiBvT28wID0gTzBPMDBPT28gKCB7ICdqc29ucnBjJyA6ICcyLjAnICwgIm1ldGhvZCIgOiAiU2V0dGluZ3MuR2V0U2V0dGluZ1ZhbHVlIiAsICJwYXJhbXMiIDogeyAic2V0dGluZyIgOiAibmV0d29yay5odHRwcHJveHl0eXBlIiB9ICwgJ2lkJyA6IDEgfSApIFsgJ3ZhbHVlJyBdCiBpZiA1OSAtIDU5OiBpaSArIEkxaTFpSTFpIC4gb29PMDBvT29vIC0gbzBvMDBPbzBPICUgaUkxMUkxSUkxSTFJIC8gbzBvMDBPbzBPCiBpZiBvME9PIDoKICBpMWlpaUlpaTExID0gTzBPMDBPT28gKCB7ICdqc29ucnBjJyA6ICcyLjAnICwgIm1ldGhvZCIgOiAiU2V0dGluZ3MuR2V0U2V0dGluZ1ZhbHVlIiAsICJwYXJhbXMiIDogeyAic2V0dGluZyIgOiAibmV0d29yay5odHRwcHJveHlzZXJ2ZXIiIH0gLCAnaWQnIDogMSB9ICkgWyAndmFsdWUnIF0KICBPT29PT08wMDBPMCA9IHVuaWNvZGUgKCBPME8wME9PbyAoIHsgJ2pzb25ycGMnIDogJzIuMCcgLCAibWV0aG9kIiA6ICJTZXR0aW5ncy5HZXRTZXR0aW5nVmFsdWUiICwgInBhcmFtcyIgOiB7ICJzZXR0aW5nIiA6ICJuZXR3b3JrLmh0dHBwcm94eXBvcnQiIH0gLCAnaWQnIDogMSB9ICkgWyAndmFsdWUnIF0gKQogIElJMWkxMUkxID0gTzBPMDBPT28gKCB7ICdqc29ucnBjJyA6ICcyLjAnICwgIm1ldGhvZCIgOiAiU2V0dGluZ3MuR2V0U2V0dGluZ1ZhbHVlIiAsICJwYXJhbXMiIDogeyAic2V0dGluZyIgOiAibmV0d29yay5odHRwcHJveHl1c2VybmFtZSIgfSAsICdpZCcgOiAxIH0gKSBbICd2YWx1ZScgXQogIGlpSWlJaUlJID0gTzBPMDBPT28gKCB7ICdqc29ucnBjJyA6ICcyLjAnICwgIm1ldGhvZCIgOiAiU2V0dGluZ3MuR2V0U2V0dGluZ1ZhbHVlIiAsICJwYXJhbXMiIDogeyAic2V0dGluZyIgOiAibmV0d29yay5odHRwcHJveHlwYXNzd29yZCIgfSAsICdpZCcgOiAxIH0gKSBbICd2YWx1ZScgXQogIGlmIDg4IC0gODg6IGkxaUlpMTFpSUlpMUkgLiBvMG8wME9vME8gJSBpaSAvIE9vMG9vTzBvbzBvTwogIGlmIElJMWkxMUkxIGFuZCBpaUlpSWlJSSBhbmQgaTFpaWlJaWkxMSBhbmQgT09vT09PMDAwTzAgOgogICByZXR1cm4gaTFpaWlJaWkxMSArICc6JyArIHN0ciAoIE9Pb09PTzAwME8wICkgKyAnOicgKyBzdHIgKCBvT28wICkgKyAnOicgKyBJSTFpMTFJMSArICdAJyArIGlpSWlJaUlJCiAgZWxpZiBpMWlpaUlpaTExIGFuZCBPT29PT08wMDBPMCA6CiAgIHJldHVybiBpMWlpaUlpaTExICsgJzonICsgc3RyICggT09vT09PMDAwTzAgKSArICc6JyArIHN0ciAoIG9PbzAgKQogZWxzZSA6CiAgcmV0dXJuIE5vbmUKICBpZiA4OSAtIDg5OiBvb08wT08wMDBvIC8gbzBPTzAKICBpZiAxNCAtIDE0OiBPbzBvb08wb28wb08gLiBJMTFpMTFJaSAqIE8wT09vICsgb29PME9PMDAwbyAtIE8wT09vICsgT28wb29PMG9vMG9PCmRlZiBJSUlJSWlJSTEgKCBtZWRpYV91cmwgLCBuYW1lICwgaWNvbkltYWdlICwgcHJveHlpcCAsIHBvcnQgLCBwcm94eXVzZXIgPSBOb25lICwgcHJveHlwYXNzID0gTm9uZSApIDoKIGlmIDQ1IC0gNDU6IEkxMWkxMUlpIC8gbzAwIC4gbzAwCiBpMW9PID0geGJtY2d1aSAuIERpYWxvZ1Byb2dyZXNzICggKQogaTFvTyAuIGNyZWF0ZSAoICdQcm9ncmVzcycgLCAnUGxheWluZyB3aXRoIGN1c3RvbSBwcm94eScgKQogaTFvTyAuIHVwZGF0ZSAoIDEwICwgIiIgLCAic2V0dGluZyBwcm94eS4uIiAsICIiICkKIGlJSWkxSUlpID0gRmFsc2UKIGkxMTFpMTFJMWlpID0gJycKIGlmIDY0IC0gNjQ6IG8wT08wIC8gSWkgLyBJaWlJIC4gaWkKIHRyeSA6CiAgaWYgMTEgLSAxMTogSTFpMWlJMWkgJSBpaTFJCiAgaTExMWkxMUkxaWkgPSBJaUlJaTFJMUkxMUlpICggKQogIHByaW50ICdleGlzdGluZ19wcm94eScgLCBpMTExaTExSTFpaQogIGlmIDE2IC0gMTY6IEkxMWkxMUlpICsgTzBPT28gJSBvT29PMG9vME9PT28KICBpZiA4MCAtIDgwOiBPME9PbyAqIG8wbzAwT28wTwogIGlmIG5vdCBwcm94eXVzZXIgPT0gTm9uZSA6CiAgIG9vME9vT29vbyAoIHByb3h5aXAgKyAnOicgKyBwb3J0ICsgJzowOicgKyBwcm94eXVzZXIgKyAnQCcgKyBwcm94eXBhc3MgKQogIGVsc2UgOgogICBvbzBPb09vb28gKCBwcm94eWlwICsgJzonICsgcG9ydCArICc6MCcgKQogICBpZiA3OCAtIDc4OiBvT29PMG9vME9PT28KICAgaWYgMjAgLSAyMDogbzAwICUgbzAwb29vMCAuIG8wMG9vbzAgLyBJMWkxaUkxaSArIG9Pb08wb28wT09PbyAuIG8wMG9vbzAKICBpSUlpMUlJaSA9IFRydWUKICBpMW9PIC4gdXBkYXRlICggODAgLCAiIiAsICJzZXR0aW5nIHByb3h5IGNvbXBsZXRlLCBub3cgcGxheWluZyIgLCAiIiApCiAgaWYgNTMgLSA1MzogT28wb29PMG9vMG9PICsgSTExaTExSWkgLyBJaSAtIElpaUkgKiBvME9PMCAvIGlpCiAgaTFvTyAuIGNsb3NlICggKQogIGkxb08gPSBOb25lCiAgaW1wb3J0IEN1c3RvbVBsYXllcgogIG9PT28wME8wT09PbyA9IEN1c3RvbVBsYXllciAuIE15WEJNQ1BsYXllciAoICkKICBpMTFJMUkxaWlJID0geGJtY2d1aSAuIExpc3RJdGVtICggbGFiZWwgPSBzdHIgKCBuYW1lICkgLCBpY29uSW1hZ2UgPSBpY29uSW1hZ2UgLCB0aHVtYm5haWxJbWFnZSA9IHhibWMgLiBnZXRJbmZvSW1hZ2UgKCAiTGlzdEl0ZW0uVGh1bWIiICkgLCBwYXRoID0gbWVkaWFfdXJsICkKICBvT09vMDBPME9PT28gLiBwbGF5ICggbWVkaWFfdXJsICwgaTExSTFJMWlpSSApCiAgeGJtYyAuIHNsZWVwICggMTAwMCApCiAgd2hpbGUgb09PbzAwTzBPT09vIC4gaXNfYWN0aXZlIDoKICAgeGJtYyAuIHNsZWVwICggMjAwICkKIGV4Y2VwdCA6CiAgdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQogaWYgaTFvTyA6CiAgaTFvTyAuIGNsb3NlICggKQogaWYgaUlJaTFJSWkgOgogIGlmIDg5IC0gODk6IGlJMTFJMUlJMUkxSSAvIEkxMWkxMUlpIC0gb29PME9PMDAwbyAvIG8wMG9vbzAgLiBJaSAuIG8wMG9vbzAKICBvbzBPb09vb28gKCBpMTExaTExSTFpaSApCiAgaWYgNDggLSA0ODogbzBvMDBPbzBPICsgbzBvMDBPbzBPIC4gb29PMDBvT29vIC0gTzBPT28KIHJldHVybiAnJwogaWYgNjMgLSA2MzogbzBPTzAKIGlmIDcxIC0gNzE6IGlpMUkgLiBvMDBvb28wICogbzAwICUgaWkgKyBPbzBvb08wb28wb08KZGVmIGlJSWkxaWlJMWkxMSAoIHBhZ2VfdmFsdWUgLCByZWZlcmVyID0gTm9uZSApIDoKIGlmIHJlZmVyZXIgOgogIHJlZmVyZXIgPSBbICggJ1JlZmVyZXInICwgcmVmZXJlciApIF0KIGlmIHBhZ2VfdmFsdWUgLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogIG9vb2lJaWkxMWkxSSA9IHBhZ2VfdmFsdWUKICBwYWdlX3ZhbHVlID0gSWlpaUkgKCBwYWdlX3ZhbHVlICwgaGVhZGVycyA9IHJlZmVyZXIgKQogIGlmIDU0IC0gNTQ6IG9Pb08wb28wT09PbyAtIG8wT08wIC0gSTExaTExSWkKIG9vMG8wb09vID0gIihldmFsXChmdW5jdGlvblwocCxhLGMsayxlLCg/OnJ8ZCkuKikiCiBpZiA1OCAtIDU4OiBJaWlJIC0gb29PME9PMDAwbyAlIG8wT08wICsgb29PMDBvT29vIC4gb09vTzBvbzBPT09vIC8gT28wb08wb29vCiBJSW8wMG9vbyA9IHJlIC4gY29tcGlsZSAoIG9vMG8wb09vICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApCiBJaTFJaUlpSWkxSWlJID0gIiIKIGlmIElJbzAwb29vIGFuZCBsZW4gKCBJSW8wMG9vbyApID4gMCA6CiAgZm9yIEkxaWlpIGluIElJbzAwb29vIDoKICAgaTFpaUlJaTFJID0gaWlJMUkxSUlpMTFpMSAoIEkxaWlpICkKICAgaTFJSTFpaWkxaSA9IGlJT08wTzAwMCAoIGkxaWlJSWkxSSAsICdcJyguKj8pXCcnICkKICAgaWYgJ3VuZXNjYXBlJyBpbiBpMWlpSUlpMUkgOgogICAgaTFpaUlJaTFJID0gdXJsbGliIC4gdW5xdW90ZSAoIGkxSUkxaWlpMWkgKQogICBJaTFJaUlpSWkxSWlJICs9IGkxaWlJSWkxSSArICdcbicKICAgaWYgODMgLSA4MzogSWlpMWlpMUlJMTFpIC8gb29PMDBvT29vIC0gSWkgLiBpSTExSTFJSTFJMUkgKyBpMWlJaTExaUlJaTFJCiAgIGlmIDU5IC0gNTk6IG8wbzAwT28wTyAlIGkxaUlpMTFpSUlpMUkKICBvb29pSWlpMTFpMUkgPSBpSU9PME8wMDAgKCBJaTFJaUlpSWkxSWlJICwgJ3NyYz0iKC4qPykiJyApCiAgaWYgOTIgLSA5MjogbzAwb29vMCAlIG8wMCAvIElpaTFpaTFJSTExaSAlIElpaTFpaTFJSTExaSAqIEkxMWkxMUlpCiAgcGFnZV92YWx1ZSA9IElpaWlJICggb29vaUlpaTExaTFJICwgaGVhZGVycyA9IHJlZmVyZXIgKQogIGlmIDc0IC0gNzQ6IG8wbzAwT28wTyAuIEkxMWkxMUlpICUgaTExaWkxMWlJaTExaSAlIE9vMG9PMG9vbwogIGlmIDg3IC0gODc6IG8wT08wIC0gSWkKICBpZiA3OCAtIDc4OiBJaSAvIGlJMTFJMUlJMUkxSSAtIElpaUkKIGlJSUlJaWlJaWkgPSBpSU9PME8wMDAgKCBwYWdlX3ZhbHVlICwgJ3N0cmVhbWVyXCcuKj9cJyguKj8pXCdcKScgKQogb29PMG9vID0gaUlPTzBPMDAwICggcGFnZV92YWx1ZSAsICdmaWxlXCcsXHNcJyguKj8pXCcnICkKIGlmIDU2IC0gNTY6IGlpIC0gSTFpMWlJMWkgLSBpaTFJCiBpZiA4IC0gODogb29PMDBvT29vIC8gT28wb29PMG9vMG9PIC4gSTExaTExSWkgKyBJaWkxaWkxSUkxMWkgLyBJaQogcmV0dXJuIGlJSUlJaWlJaWkgKyAnIHBsYXlwYXRoPScgKyBvb08wb28gKyAnIHBhZ2VVcmw9JyArIG9vb2lJaWkxMWkxSQogaWYgMzEgLSAzMTogTzBPT28gLSBpSTExSTFJSTFJMUkgKyBvMDAgLiBpMWlJaTExaUlJaTFJIC8gT28wb08wb29vICUgaUkxMUkxSUkxSTFJCiBpZiA2IC0gNjogT28wb08wb29vICogSWkgJSBpSTExSTFJSTFJMUkgJSBJaSArIElpaUkgLyBpaTFJCmRlZiBvMG8wb09PICggcGFnZV92YWx1ZSAsIHJlZmVyZXIgPSBOb25lICkgOgogaWYgcmVmZXJlciA6CiAgcmVmZXJlciA9IFsgKCAnUmVmZXJlcicgLCByZWZlcmVyICkgXQogaWYgcGFnZV92YWx1ZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgcGFnZV92YWx1ZSA9IElpaWlJICggcGFnZV92YWx1ZSAsIGhlYWRlcnMgPSByZWZlcmVyICkKIG9vMG8wb09vID0gInZhciBhID0gKC4qPyk7XHMqdmFyIGIgPSAoLio/KTtccyp2YXIgYyA9ICguKj8pO1xzKnZhciBkID0gKC4qPyk7XHMqdmFyIGYgPSAoLio/KTtccyp2YXIgdl9wYXJ0ID0gJyguKj8pJzsiCiBJSW8wMG9vbyA9IHJlIC4gY29tcGlsZSAoIG9vMG8wb09vICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApIFsgMCBdCiBpZiA1IC0gNTogbzAwb29vMCAvIG8wT08wCiBJSUkxaTFJaUkxaSAsIE9vMG9PICwgSWlJSTFpaUkgLCBpSUkgLCBPTzBvT09vICwgSTFpaWkgPSAoIElJbzAwb29vICkKIE9PMG9PT28gPSBpbnQgKCBPTzBvT09vICkKIElJSTFpMUlpSTFpID0gaW50ICggSUlJMWkxSWlJMWkgKSAvIE9PMG9PT28KIE9vMG9PID0gaW50ICggT28wb08gKSAvIE9PMG9PT28KIElpSUkxaWlJID0gaW50ICggSWlJSTFpaUkgKSAvIE9PMG9PT28KIGlJSSA9IGludCAoIGlJSSApIC8gT08wb09PbwogaWYgNjMgLSA2MzogSWlpSSAqIG8wMAogSUlJSUlpaTFpaTExID0gJ3J0bXA6Ly8nICsgc3RyICggSUlJMWkxSWlJMWkgKSArICcuJyArIHN0ciAoIE9vMG9PICkgKyAnLicgKyBzdHIgKCBJaUlJMWlpSSApICsgJy4nICsgc3RyICggaUlJICkgKyBJMWlpaSA7CiByZXR1cm4gSUlJSUlpaTFpaTExCiBpZiA2MyAtIDYzOiBvMDAgKiBJaWkxaWkxSUkxMWkgLiBpaSAvIE9vMG9vTzBvbzBvTyAqIGkxaUlpMTFpSUlpMUkgLiBPME9PbwogaWYgNjIgLSA2MjogaWkxSSAvIE8wT09vIC4gSTExaTExSWkgKiBJaWlJCmRlZiBpMTFpMUlpMSAoIHVybCAsIHVzZXJhZ2VudCA9IE5vbmUgKSA6CiBzdHIgPSAnI0VYVE0zVScKIHN0ciArPSAnXG4jRVhULVgtU1RSRUFNLUlORjpQUk9HUkFNLUlEPTEsQkFORFdJRFRIPTM2MTgxNicKIHN0ciArPSAnXG4nICsgdXJsICsgJyZieXRlcz0wLTIwMDAwMCcKIG9PMG8wTzBPT09vbzAgPSBvcyAuIHBhdGggLiBqb2luICggTzBPMDBvME9PTzAgLCAndGVzdGZpbGUubTN1JyApCiBzdHIgKz0gJ1xuJwogbzBvTzBvbzAwMDBPTyAoIG9PMG8wTzBPT09vbzAgLCBzdHIgKQogaWYgNDUgLSA0NTogb29PMDBvT29vICogbzAwb29vMCAvIGlpIC4gbzBPTzAgJSBJaWkxaWkxSUkxMWkgLyBpaTFJCiByZXR1cm4gb08wbzBPME9PT29vMAogaWYgMjQgLSAyNDogT28wb29PMG9vMG9PICsgSWlpSSArIEkxaTFpSTFpIC0gT28wb08wb29vICsgb09vTzBvbzBPT09vCiBpZiAxNCAtIDE0OiBvMDBvb28wIC4gSWkKZGVmIG8wb08wb28wMDAwT08gKCBmaWxlX25hbWUgLCBwYWdlX2RhdGEgLCBhcHBlbmQgPSBGYWxzZSApIDoKIGlmIGFwcGVuZCA6CiAgT08wb09PbyA9IG9wZW4gKCBmaWxlX25hbWUgLCAnYScgKQogIE9PMG9PT28gLiB3cml0ZSAoIHBhZ2VfZGF0YSApCiAgT08wb09PbyAuIGNsb3NlICggKQogZWxzZSA6CiAgT08wb09PbyA9IG9wZW4gKCBmaWxlX25hbWUgLCAnd2InICkKICBPTzBvT09vIC4gd3JpdGUgKCBwYWdlX2RhdGEgKQogIE9PMG9PT28gLiBjbG9zZSAoICkKICByZXR1cm4gJycKICBpZiAyNyAtIDI3OiBPME9PbyAlIG8wbzAwT28wTyAlIG9vTzAwb09vbwogIGlmIDk5IC0gOTk6IEkxMWkxMUlpICsgaWkxSSArIElpICsgaTFpSWkxMWlJSWkxSSAlIG8wT08wIC8gSTFpMWlJMWkKZGVmIE8wT08wbzBPTzBPTyAoIGZpbGVfbmFtZSApIDoKIE9PMG9PT28gPSBvcGVuICggZmlsZV9uYW1lICwgJ3JiJyApCiBpSUkgPSBPTzBvT09vIC4gcmVhZCAoICkKIE9PMG9PT28gLiBjbG9zZSAoICkKIHJldHVybiBpSUkKIGlmIDY0IC0gNjQ6IG9vTzBPTzAwMG8KIGlmIDQwIC0gNDA6IG9Pb08wb28wT09PbyAlIGkxMWlpMTFpSWkxMWkKZGVmIG9vME8wbzAwICggcGFnZV9kYXRhICkgOgogaW1wb3J0IHJlICwgYmFzZTY0ICwgdXJsbGliIDsKIG9Pb08wbyA9IHBhZ2VfZGF0YQogd2hpbGUgJ2dlaCgnIGluIG9Pb08wbyA6CiAgaWYgb09vTzBvIC4gc3RhcnRzd2l0aCAoICdsb2woJyApIDogb09vTzBvID0gb09vTzBvIFsgNSA6IC0gMSBdCiAgaWYgNDYgLSA0Njogb29PMDBvT29vICUgbzAwb29vMAogIG9Pb08wbyA9IHJlIC4gY29tcGlsZSAoICciKC4qPykiJyApIC4gZmluZGFsbCAoIG9Pb08wbyApIFsgMCBdIDsKICBvT29PMG8gPSBiYXNlNjQgLiBiNjRkZWNvZGUgKCBvT29PMG8gKSA7CiAgb09vTzBvID0gdXJsbGliIC4gdW5xdW90ZSAoIG9Pb08wbyApIDsKIHByaW50IG9Pb08wbwogcmV0dXJuIG9Pb08wbwogaWYgNzIgLSA3MjogaUkxMUkxSUkxSTFJCiBpZiA0NSAtIDQ1OiBpMWlJaTExaUlJaTFJIC0gSWlpSSAlIG9vTzAwb09vbwpkZWYgaTFJSWkxaTFJaTEgKCBwYWdlX2RhdGEgKSA6CiBpZiA0NSAtIDQ1OiBpSTExSTFJSTFJMUkgLiBvME9PMCAvIG9Pb08wb28wT09PbyAvIE9vMG9PMG9vbwogb29PT09vT29PT08wID0gSWlpaUkgKCBwYWdlX2RhdGEgKSA7CiBpaTExMWkxaUkgPSAnKGh0dHAuKiknCiBpbXBvcnQgdXVpZAogSTFJMWlJSTFpID0gc3RyICggdXVpZCAuIHV1aWQxICggKSApIC4gdXBwZXIgKCApCiBpaUlJaWkgPSByZSAuIGNvbXBpbGUgKCBpaTExMWkxaUkgKSAuIGZpbmRhbGwgKCBvb09PT29Pb09PTzAgKQogb08wT28wTzAgPSBbICggJ1gtUGxheWJhY2stU2Vzc2lvbi1JZCcgLCBJMUkxaUlJMWkgKSBdCiBmb3IgSTFpSWlJMUlpSUlJSSBpbiBpaUlJaWkgOgogIHRyeSA6CiAgIEkxaWlJaTExMUkgPSBJaWlpSSAoIEkxaUlpSTFJaUlJSUkgLCBoZWFkZXJzID0gb08wT28wTzAgKSA7CiAgIGlmIDM0IC0gMzQ6IElpIC0gb29PME9PMDAwbyAvIEkxMWkxMUlpICUgSWlpSQogIGV4Y2VwdCA6IHBhc3MKICBpZiAzMyAtIDMzOiBPbzBvb08wb28wb08KIHJldHVybiBwYWdlX2RhdGEgKyAnfCZYLVBsYXliYWNrLVNlc3Npb24tSWQ9JyArIEkxSTFpSUkxaQogaWYgMzUgLSAzNTogSWkgLSBJMTFpMTFJaSAvIE9vMG9vTzBvbzBvTyArIG8wMG9vbzAgKiBvME9PMAogaWYgNDkgLSA0OTogSWlpSSAqIG8wMG9vbzAgKyBJMWkxaUkxaSArIG8wMApkZWYgSUlpMTEgKCBwYWdlX2RhdGEgKSA6CiBpZiA4OSAtIDg5OiBvb08wT08wMDBvICogTzBPT28gLiBvME9PMAogaWYgcGFnZV9kYXRhIC4gc3RhcnRzd2l0aCAoICdodHRwOi8vZGFnLnRvdGFsLXN0cmVhbS5uZXQnICkgOgogIG9PME9vME8wID0gWyAoICdVc2VyLUFnZW50JyAsICdWZXJpc21vLUJsYWNrVUlfKDIuNC43LjUuOC4wLjM0KScgKSBdCiAgcGFnZV9kYXRhID0gSWlpaUkgKCBwYWdlX2RhdGEgLCBoZWFkZXJzID0gb08wT28wTzAgKSA7CiAgaWYgODUgLSA4NTogSWlpMWlpMUlJMTFpICsgbzAwb29vMCAqIEkxMWkxMUlpICUgSWkKIGlmICcxMjcuMC4wLjEnIGluIHBhZ2VfZGF0YSA6CiAgcmV0dXJuIGlJMWkgKCBwYWdlX2RhdGEgKQogZWxpZiBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnd21zQXV0aFNpZ24lM0QoW14lJl0rKScgKSAhPSAnJyA6CiAgaTExSWlJSWkxMUkgPSBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnJnZlcl90PShbXiZdKykmJyApICsgJz93bXNBdXRoU2lnbj0nICsgaUlPTzBPMDAwICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgKyAnPT0vbXA0OicgKyBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnXFw/eT0oW14mXSspJicgKQogZWxzZSA6CiAgaTExSWlJSWkxMUkgPSBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnaHJlZj0iKFteIl0rKSJbXiJdKyQnICkKICBpZiBsZW4gKCBpMTFJaUlJaTExSSApID09IDAgOgogICBpMTFJaUlJaTExSSA9IHBhZ2VfZGF0YQogaTExSWlJSWkxMUkgPSBpMTFJaUlJaTExSSAuIHJlcGxhY2UgKCAnICcgLCAnJTIwJyApCiByZXR1cm4gaTExSWlJSWkxMUkKIGlmIDc4IC0gNzg6IE9vMG9PMG9vbwogaWYgODMgLSA4MzogaUkxMUkxSUkxSTFJICUgb09vTzBvbzBPT09vICUgSWlpSSAlIG9vTzAwb09vbyAuIElpaTFpaTFJSTExaSAlIG8wbzAwT28wTwpkZWYgaUlPTzBPMDAwICggZGF0YSAsIHJlX3BhdHRlbiApIDoKIG9PT28wID0gJycKIGlJSUlpaSA9IHJlIC4gc2VhcmNoICggcmVfcGF0dGVuICwgZGF0YSApCiBpZiBpSUlJaWkgIT0gTm9uZSA6CiAgb09PbzAgPSBpSUlJaWkgLiBncm91cCAoIDEgKQogZWxzZSA6CiAgb09PbzAgPSAnJwogcmV0dXJuIG9PT28wCiBpZiA0NyAtIDQ3OiBJaWlJCiBpZiA2NiAtIDY2OiBJMTFpMTFJaSAtIE9vMG9PMG9vbwpkZWYgaUkxaSAoIHBhZ2VfZGF0YSApIDoKIGkxMUlpSUlpMTFJID0gJycKIGlmICcxMjcuMC4wLjEnIGluIHBhZ2VfZGF0YSA6CiAgaTExSWlJSWkxMUkgPSBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnJnZlcl90PShbXiZdKykmJyApICsgJyBsaXZlPXRydWUgdGltZW91dD0xNSBwbGF5cGF0aD0nICsgaUlPTzBPMDAwICggcGFnZV9kYXRhICwgJ1xcP3k9KFthLXpBLVowLTktX1xcLkBdKyknICkKICBpZiAzMyAtIDMzOiBJMTFpMTFJaSAvIGkxMWlpMTFpSWkxMWkKIGlmIGlJT08wTzAwMCAoIHBhZ2VfZGF0YSAsICd0b2tlbj0oW14mXSspJicgKSAhPSAnJyA6CiAgaTExSWlJSWkxMUkgPSBpMTFJaUlJaTExSSArICc/dG9rZW49JyArIGlJT08wTzAwMCAoIHBhZ2VfZGF0YSAsICd0b2tlbj0oW14mXSspJicgKQogZWxpZiBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnd21zQXV0aFNpZ24lM0QoW14lJl0rKScgKSAhPSAnJyA6CiAgaTExSWlJSWkxMUkgPSBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnJnZlcl90PShbXiZdKykmJyApICsgJz93bXNBdXRoU2lnbj0nICsgaUlPTzBPMDAwICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgKyAnPT0vbXA0OicgKyBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnXFw/eT0oW14mXSspJicgKQogZWxzZSA6CiAgaTExSWlJSWkxMUkgPSBpSU9PME8wMDAgKCBwYWdlX2RhdGEgLCAnSFJFRj0iKFteIl0rKSInICkKICBpZiAxMiAtIDEyOiBvb08wT08wMDBvCiBpZiAnZGFnMS5hc3gnIGluIGkxMUlpSUlpMTFJIDoKICByZXR1cm4gSUlpMTEgKCBpMTFJaUlJaTExSSApCiAgaWYgMiAtIDI6IGlpMUkgLSBJMTFpMTFJaSArIEkxaTFpSTFpIC4gb29PME9PMDAwbwogaWYgJ2RldmlubGl2ZWZzLmZwbGl2ZS5uZXQnIG5vdCBpbiBpMTFJaUlJaTExSSA6CiAgaTExSWlJSWkxMUkgPSBpMTFJaUlJaTExSSAuIHJlcGxhY2UgKCAnZGV2aW5saXZlJyAsICdmbGl2ZScgKQogaWYgJ3Blcm1saXZlZnMuZnBsaXZlLm5ldCcgbm90IGluIGkxMUlpSUlpMTFJIDoKICBpMTFJaUlJaTExSSA9IGkxMUlpSUlpMTFJIC4gcmVwbGFjZSAoICdwZXJtbGl2ZScgLCAnZmxpdmUnICkKIHJldHVybiBpMTFJaUlJaTExSQogaWYgMjUgLSAyNTogbzBPTzAKIGlmIDM0IC0gMzQ6IG9Pb08wb28wT09PbyAuIGlJMTFJMUlJMUkxSSAlIG8wbzAwT28wTwpkZWYgaUkxMUlpMTExICggc3RyX2V2YWwgKSA6CiBPT28wME9PMDBPbyA9ICIiCiB0cnkgOgogIEkxSTFJMTFJaSA9ICJ3LGkscyxlPSgiICsgc3RyX2V2YWwgKyAnKScKICBleGVjICggSTFJMUkxMUlpICkKICBPT28wME9PMDBPbyA9IGlpMUlpaTEgKCB3ICwgb29Pb29vMDAwb09PICwgb09vTzBvICwgZSApCiBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCBmaWxlID0gc3lzIC4gc3Rkb3V0ICkKIGlmIDgwIC0gODA6IG8wMG9vbzAgLSBJaWlJCiByZXR1cm4gT09vMDBPTzAwT28KIGlmIDQxIC0gNDE6IElpaUkgLSBpMWlJaTExaUlJaTFJICogSTExaTExSWkKIGlmIDgyIC0gODI6IGkxMWlpMTFpSWkxMWkgJSBJaWlJICUgT28wb29PMG9vMG9PIC8gbzBvMDBPbzBPCmRlZiBpaTFJaWkxICggdyAsIGkgLCBzICwgZSApIDoKIE9PT08wbzAgPSAwIDsKIGkxSUlJaTExMUlpID0gMCA7CiBpSUlpMWlJMSA9IDAgOwogSTFJaWkxSSA9IFsgXSA7CiBpSWkxMUkgPSBbIF0gOwogd2hpbGUgVHJ1ZSA6CiAgaWYgKCBPT09PMG8wIDwgNSApIDoKICAgaUlpMTFJIC4gYXBwZW5kICggdyBbIE9PT08wbzAgXSApCiAgZWxpZiAoIE9PT08wbzAgPCBsZW4gKCB3ICkgKSA6CiAgIEkxSWlpMUkgLiBhcHBlbmQgKCB3IFsgT09PTzBvMCBdICkgOwogIE9PT08wbzAgKz0gMSA7CiAgaWYgKCBpMUlJSWkxMTFJaSA8IDUgKSA6CiAgIGlJaTExSSAuIGFwcGVuZCAoIGkgWyBpMUlJSWkxMTFJaSBdICkKICBlbGlmICggaTFJSUlpMTExSWkgPCBsZW4gKCBpICkgKSA6CiAgIEkxSWlpMUkgLiBhcHBlbmQgKCBpIFsgaTFJSUlpMTExSWkgXSApCiAgaTFJSUlpMTExSWkgKz0gMSA7CiAgaWYgKCBpSUlpMWlJMSA8IDUgKSA6CiAgIGlJaTExSSAuIGFwcGVuZCAoIHMgWyBpSUlpMWlJMSBdICkKICBlbGlmICggaUlJaTFpSTEgPCBsZW4gKCBzICkgKSA6CiAgIEkxSWlpMUkgLiBhcHBlbmQgKCBzIFsgaUlJaTFpSTEgXSApIDsKICBpSUlpMWlJMSArPSAxIDsKICBpZiAoIGxlbiAoIHcgKSArIGxlbiAoIGkgKSArIGxlbiAoIHMgKSArIGxlbiAoIGUgKSA9PSBsZW4gKCBJMUlpaTFJICkgKyBsZW4gKCBpSWkxMUkgKSArIGxlbiAoIGUgKSApIDoKICAgYnJlYWsgOwogICBpZiA4NyAtIDg3OiBJMWkxaUkxaSAvIEkxMWkxMUlpICsgaTFpSWkxMWlJSWkxSSArIE9vMG9vTzBvbzBvTyAtIGlpICsgaTFpSWkxMWlJSWkxSQogTzAwaTEgPSAnJyAuIGpvaW4gKCBJMUlpaTFJICkKIGlpSUlJMUlJaUlJSUkgPSAnJyAuIGpvaW4gKCBpSWkxMUkgKQogaTFJSUlpMTExSWkgPSAwIDsKIEkxaUlJSUkxID0gWyBdIDsKIGZvciBPT09PMG8wIGluIHJhbmdlICggMCAsIGxlbiAoIEkxSWlpMUkgKSAsIDIgKSA6CiAgaWYgNTcgLSA1Nzogb09vTzBvbzBPT09vIC4gaUkxMUkxSUkxSTFJICUgTzBPT28gJSBvMDBvb28wICogb09vTzBvbzBPT09vCiAgSUkxID0gLSAxIDsKICBpZiAoIG9yZCAoIGlpSUlJMUlJaUlJSUkgWyBpMUlJSWkxMTFJaSBdICkgJSAyICkgOgogICBJSTEgPSAxIDsKICAgaWYgOTcgLSA5NzogbzBPTzAKICBJMWlJSUlJMSAuIGFwcGVuZCAoIGNociAoIGludCAoIE8wMGkxIFsgT09PTzBvMCA6IE9PT08wbzAgKyAyIF0gLCAzNiApIC0gSUkxICkgKSA7CiAgaTFJSUlpMTExSWkgKz0gMSA7CiAgaWYgKCBpMUlJSWkxMTFJaSA+PSBsZW4gKCBpSWkxMUkgKSApIDoKICAgaTFJSUlpMTExSWkgPSAwIDsKIElJSUlJaWkxaWkxMSA9ICcnIC4gam9pbiAoIEkxaUlJSUkxICkKIGlmICdldmFsKGZ1bmN0aW9uKHcsaSxzLGUpJyBpbiBJSUlJSWlpMWlpMTEgOgogIGlmIDgwIC0gODA6IEkxMWkxMUlpIC4gbzAwb29vMAogIElJSUlJaWkxaWkxMSA9IHJlIC4gY29tcGlsZSAoICdldmFsXChmdW5jdGlvblwodyxpLHMsZVwpLip9XCgoLio/KVwpJyApIC4gZmluZGFsbCAoIElJSUlJaWkxaWkxMSApIFsgMCBdCiAgcmV0dXJuIGlJMTFJaTExMSAoIElJSUlJaWkxaWkxMSApCiBlbHNlIDoKICBpZiA0NyAtIDQ3OiBJMWkxaUkxaSArIE8wT09vICsgb29PME9PMDAwbyAlIElpCiAgcmV0dXJuIElJSUlJaWkxaWkxMQogIGlmIDkzIC0gOTM6IElpaTFpaTFJSTExaSAlIG9Pb08wb28wT09PbyAuIG8wbzAwT28wTyAvIG8wMCAqIG8wT08wCiAgaWYgMjkgLSAyOTogSWlpSQpkZWYgaWlJMUkxSUlpMTFpMSAoIHBhZ2VfdmFsdWUgLCByZWdleF9mb3JfdGV4dCA9ICcnICwgaXRlcmF0aW9ucyA9IDEgLCB0b3RhbF9pdGVyYXRpb24gPSAxICkgOgogdHJ5IDoKICBvbzAgPSBOb25lCiAgaWYgcGFnZV92YWx1ZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgIHBhZ2VfdmFsdWUgPSBJaWlpSSAoIHBhZ2VfdmFsdWUgKQogICBpZiAyIC0gMjogaWkKICBpZiByZWdleF9mb3JfdGV4dCBhbmQgbGVuICggcmVnZXhfZm9yX3RleHQgKSA+IDAgOgogICB0cnkgOgogICAgcGFnZV92YWx1ZSA9IHJlIC4gY29tcGlsZSAoIHJlZ2V4X2Zvcl90ZXh0ICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApIFsgMCBdCiAgIGV4Y2VwdCA6IHJldHVybiAnTk9UUEFDS0VEJwogICBpZiA2MCAtIDYwOiBpMTFpaTExaUlpMTFpCiAgcGFnZV92YWx1ZSA9IG9PMDBPb28wb08gKCBwYWdlX3ZhbHVlICwgaXRlcmF0aW9ucyAsIHRvdGFsX2l0ZXJhdGlvbiApCiBleGNlcHQgOgogIHBhZ2VfdmFsdWUgPSAnVU5QQUNLRURGQUlMRUQnCiAgdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggZmlsZSA9IHN5cyAuIHN0ZG91dCApCiAgaWYgMTAwIC0gMTAwOiBpMTFpaTExaUlpMTFpIC8gaWkxSSAtIEkxMWkxMUlpICUgbzAwb29vMCAtIGlJMTFJMUlJMUkxSQogaWYgJ3NhdjFsaXZlLnR2JyBpbiBwYWdlX3ZhbHVlIDoKICBwYWdlX3ZhbHVlID0gcGFnZV92YWx1ZSAuIHJlcGxhY2UgKCAnc2F2MWxpdmUudHYnICwgJ3Nhd2xpdmUudHYnICkKICBpZiAxNyAtIDE3OiBJMWkxaUkxaSAvIElpaUkgJSBpMWlJaTExaUlJaTFJCiByZXR1cm4gcGFnZV92YWx1ZQogaWYgNzEgLSA3MTogT28wb08wb29vIC4gb29PMDBvT29vIC4gaTExaWkxMWlJaTExaQogaWYgNjggLSA2ODogSWkgJSBvME9PMCAqIGkxMWlpMTFpSWkxMWkgKiBPbzBvTzBvb28gKiBvb08wT08wMDBvICsgbzBvMDBPbzBPCmRlZiBvTzAwT29vMG9PICggc0phdmFzY3JpcHQgLCBpdGVyYXRpb24gPSAxICwgdG90YWxpdGVyYXRpb25zID0gMiApIDoKIGlmIDY2IC0gNjY6IEkxaTFpSTFpICUgSWlpMWlpMUlJMTFpICUgaWkKIGlmIHNKYXZhc2NyaXB0IC4gc3RhcnRzd2l0aCAoICd2YXIgXzB4Y2I4YT0nICkgOgogIElJMTEgPSBzSmF2YXNjcmlwdCAuIHNwbGl0ICggJ3ZhciBfMHhjYjhhPScgKQogIEkxSTFJMTFJaSA9ICJteWFycmF5PSIgKyBJSTExIFsgMSBdIC4gc3BsaXQgKCAiZXZhbCgiICkgWyAwIF0KICBleGVjICggSTFJMUkxMUlpICkKICBpSWkgPSA2MgogIGlpTzBPMG8wb08wTzAwID0gaW50ICggSUkxMSBbIDEgXSAuIHNwbGl0ICggIiw2MiwiICkgWyAxIF0gLiBzcGxpdCAoICcsJyApIFsgMCBdICkKICBvME8wb08wID0gbXlhcnJheSBbIDAgXQogIG9vMGkxID0gbXlhcnJheSBbIDMgXQogIHdpdGggb3BlbiAoICd0ZW1wIGZpbGUnICsgc3RyICggaXRlcmF0aW9uICkgKyAnLmpzJyAsICJ3YiIgKSBhcyBpMUlpSWkxIDoKICAgaTFJaUlpMSAuIHdyaXRlICggc3RyICggb28waTEgKSApCiAgIGlmIDIyIC0gMjI6IEkxaTFpSTFpICogbzBvMDBPbzBPIC4gb29PME9PMDAwbyAtIGkxMWlpMTFpSWkxMWkKIGVsc2UgOgogIGlmIDkwIC0gOTA6IG8wT08wCiAgaWYgInJuIHB9KCciIGluIHNKYXZhc2NyaXB0IDoKICAgSUkxMSA9IHNKYXZhc2NyaXB0IC4gc3BsaXQgKCAicm4gcH0oJyIgKQogIGVsc2UgOgogICBJSTExID0gc0phdmFzY3JpcHQgLiBzcGxpdCAoICJybiBBfSgnIiApCiAgIGlmIDk0IC0gOTQ6IEkxaTFpSTFpIC8gSWlpMWlpMUlJMTFpICogb29PMDBvT29vIC0gb09vTzBvbzBPT09vCiAgIGlmIDQ0IC0gNDQ6IG8wMG9vbzAgJSBJaSAtIG8wMCAqIElpaTFpaTFJSTExaSArIGkxaUlpMTFpSUlpMUkgKiBPbzBvb08wb28wb08KICBvME8wb08wICwgaUlpICwgaWlPME8wbzBvTzBPMDAgLCBvbzBpMSA9ICggJycgLCAnMCcgLCAnMCcgLCAnJyApCiAgaWYgNDEgLSA0MTogbzBvMDBPbzBPICogTzBPT28gLSBvT29PMG9vME9PT28gLiBvMDBvb28wCiAgSTFJMUkxMUlpID0gInAxLGExLGMxLGsxPSgnIiArIElJMTEgWyAxIF0gLiBzcGxpdCAoICIuc3BsaSIgKSBbIDAgXSArICcpJwogIGV4ZWMgKCBJMUkxSTExSWkgKQogb28waTEgPSBvbzBpMSAuIHNwbGl0ICggJ3wnICkKIElJMTEgPSBJSTExIFsgMSBdIC4gc3BsaXQgKCAiKSknIiApCiBpZiA2NSAtIDY1OiBpMWlJaTExaUlJaTFJIC4gaWkKIGlmIDcwIC0gNzA6IGkxaUlpMTFpSUlpMUkgLSBvME9PMCAuIGlJMTFJMUlJMUkxSSAlIEkxaTFpSTFpIC8gb09vTzBvbzBPT09vIC0gbzBvMDBPbzBPCiBpZiA1NSAtIDU1OiBvMDAgLSBpMTFpaTExaUlpMTFpCiBpZiAxMDAgLSAxMDA6IG8wbzAwT28wTwogaWYgNzkgLSA3OTogaUkxMUkxSUkxSTFJCiBpZiA4MSAtIDgxOiBPbzBvb08wb28wb08gKyBpSTExSTFJSTFJMUkgKiBvb08wMG9Pb28gLSBpSTExSTFJSTFJMUkgLiBPbzBvb08wb28wb08KIGlmIDQ4IC0gNDg6IEkxaTFpSTFpIC4gaWkgLiBJMTFpMTFJaSAuIG9Pb08wb28wT09PbyAlIElpaTFpaTFJSTExaSAvIG8wMAogaWYgMTEgLSAxMTogaWkxSSAlIGkxMWlpMTFpSWkxMWkgJSBvMDAKIGlmIDk5IC0gOTk6IE8wT09vIC8gaUkxMUkxSUkxSTFJIC0gbzAwb29vMCAqIElpaTFpaTFJSTExaSAlIEkxMWkxMUlpCiBpZiAxMyAtIDEzOiBpMTFpaTExaUlpMTFpCiBpZiA3MCAtIDcwOiBvb08wMG9Pb28gKyBvMG8wME9vME8gLiBvME9PMCAqIG8wMG9vbzAKIGlmIDIgLSAyOiBpaSAuIE9vMG9vTzBvbzBvTyAuIE9vMG9PMG9vbwogaWYgNDIgLSA0MjogT28wb29PMG9vMG9PICUgbzBPTzAgLyBpMTFpaTExaUlpMTFpIC0gbzBPTzAgKiBJaQogaWYgMTkgLSAxOTogbzBPTzAgKiBJMTFpMTFJaSAlIElpCiBpZiAyNCAtIDI0OiBJaWlJCiBpZiAxMCAtIDEwOiBJaWlJICUgbzAwb29vMCAvIE9vMG9vTzBvbzBvTwogaWYgMjggLSAyODogT28wb29PMG9vMG9PICUgTzBPT28KIGlmIDQ4IC0gNDg6IElpICUgbzBPTzAKIGlmIDI5IC0gMjk6IG8wMCArIElpICUgSTFpMWlJMWkKIGlmIDkzIC0gOTM6IG9Pb08wb28wT09PbyAlIGlJMTFJMUlJMUkxSQogaWYgOTAgLSA5MDogSTExaTExSWkgLSBPbzBvb08wb28wb08gLyBvMDBvb28wIC8gbzBvMDBPbzBPIC8gSTFpMWlJMWkKIGlmIDg3IC0gODc6IG9Pb08wb28wT09PbyAvIE9vMG9PMG9vbyArIGlJMTFJMUlJMUkxSQogaUkxID0gJycKIGlJSSA9ICcnCiBpZiA5MyAtIDkzOiBpSTExSTFJSTFJMUkgKyBvME9PMCAlIE8wT09vCiBpZiAyMSAtIDIxOiBPbzBvb08wb28wb08KIGlJaUkxSTFJSWkxMSA9IHN0ciAoIEkxSTFpMTEgKCBvME8wb08wICwgaUlpICwgaWlPME8wbzBvTzBPMDAgLCBvbzBpMSAsIGlJMSAsIGlJSSAsIGl0ZXJhdGlvbiApICkKIGlmIDI1IC0gMjU6IE9vMG9PMG9vbyAtIElpaTFpaTFJSTExaQogaWYgMTUgLSAxNTogTzBPT28gLiBvT29PMG9vME9PT28gLiBJaSAlIElpaUkKIGlmIDQ4IC0gNDg6IG9Pb08wb28wT09PbyAlIElpaTFpaTFJSTExaSAvIEkxaTFpSTFpIC4gaUkxMUkxSUkxSTFJICogb29PME9PMDAwbwogaWYgNjUgLSA2NTogb09vTzBvbzBPT09vCiBpZiAzMSAtIDMxOiBJMWkxaUkxaSAqIG9Pb08wb28wT09PbyAuIE9vMG9PMG9vbyAlIG8wMG9vbzAgKyBpMWlJaTExaUlJaTFJCiBpZiBpdGVyYXRpb24gPj0gdG90YWxpdGVyYXRpb25zIDoKICBpZiA0NyAtIDQ3OiBvMG8wME9vME8gKiBJMTFpMTFJaSAqIGkxMWlpMTFpSWkxMWkgLiBvb08wT08wMDBvCiAgcmV0dXJuIGlJaUkxSTFJSWkxMQogZWxzZSA6CiAgaWYgOTUgLSA5NTogbzAwb29vMCAlIE9vMG9PMG9vbyAuIG8wbzAwT28wTyAlIG9vTzAwb09vbwogIHJldHVybiBvTzAwT29vMG9PICggaUlpSTFJMUlJaTExICwgaXRlcmF0aW9uICsgMSApCiAgaWYgNjggLSA2ODogaTFpSWkxMWlJSWkxSSAuIGkxaUlpMTFpSUlpMUkgLSBJaWkxaWkxSUkxMWkgLyBJMWkxaUkxaSAuIE8wT09vIC8gaWkxSQogIGlmIDEyIC0gMTI6IElpaTFpaTFJSTExaSAqIGlpMUkgKiBJMWkxaUkxaQpkZWYgSTFJMWkxMSAoIHAgLCBhICwgYyAsIGsgLCBlICwgZCAsIGl0ZXJhdGlvbiAsIHYgPSAxICkgOgogaWYgMjMgLSAyMzogT28wb29PMG9vMG9PIC8gbzBvMDBPbzBPIC8gSTExaTExSWkKIGlmIDQ5IC0gNDk6IEkxaTFpSTFpIC4gSWlpSSAlIG8wT08wIC8gbzAwb29vMAogaWYgOTUgLSA5NTogbzBvMDBPbzBPICogb09vTzBvbzBPT09vICogT28wb08wb29vIC4gTzBPT28gLyBpSTExSTFJSTFJMUkKIHdoaWxlICggYyA+PSAxICkgOgogIGMgPSBjIC0gMQogIGlmICggayBbIGMgXSApIDoKICAgSTFJSWkxSSA9IHN0ciAoIGlJaWkxaTEgKCBjICwgYSApICkKICAgaWYgdiA9PSAxIDoKICAgIHAgPSByZSAuIHN1YiAoICdcXGInICsgSTFJSWkxSSArICdcXGInICwgayBbIGMgXSAsIHAgKQogICBlbHNlIDoKICAgIHAgPSBvT29PMDAgKCBwICwgSTFJSWkxSSAsIGsgWyBjIF0gKQogICAgaWYgNDUgLSA0NTogbzAwb29vMCAuIGlpCiAgICBpZiAyNyAtIDI3OiBvMDBvb28wICogaTFpSWkxMWlJSWkxSSAuIG9Pb08wb28wT09PbwogICAgaWYgMTcgLSAxNzogb29PME9PMDAwbyAlIG8wMCAqIE9vMG9vTzBvbzBvTyAlIGlpMUkgLiBJMTFpMTFJaSAuIGlJMTFJMUlJMUkxSQogICAgaWYgMjcgLSAyNzogSWkgLSBJMTFpMTFJaQogICAgaWYgMzUgLSAzNTogaWkgLSBvb08wMG9Pb28gLyBpMTFpaTExaUlpMTFpCiAgICBpZiA1MCAtIDUwOiBvT29PMG9vME9PT28KIHJldHVybiBwCiBpZiAzMyAtIDMzOiBJMWkxaUkxaQogaWYgOTggLSA5ODogb09vTzBvbzBPT09vICUgb29PME9PMDAwbwogaWYgOTUgLSA5NTogaUkxMUkxSUkxSTFJIC0gb29PMDBvT29vIC0gT28wb29PMG9vMG9PICsgb29PMDBvT29vICUgSWlpMWlpMUlJMTFpIC4gSTExaTExSWkKIGlmIDQxIC0gNDE6IG8wbzAwT28wTyArIG8wT08wIC4gaWkxSSAtIG9vTzBPTzAwMG8gKiBJaWlJIC4gaTExaWkxMWlJaTExaQogaWYgNjggLSA2ODogSWlpSQpkZWYgb09vTzAwICggc291cmNlX3N0ciAsIHdvcmRfdG9fZmluZCAsIHJlcGxhY2Vfd2l0aCApIDoKIGkxMUlpMUlJaSA9IE5vbmUKIGkxMUlpMUlJaSA9IHNvdXJjZV9zdHIgLiBzcGxpdCAoIHdvcmRfdG9fZmluZCApCiBpZiBsZW4gKCBpMTFJaTFJSWkgKSA+IDEgOgogIElpMUkxMWkxMUkxaSA9IFsgXQogIG9PMDAgPSAwCiAgZm9yIElpSTFJSTExaWlJIGluIGkxMUlpMUlJaSA6CiAgIGlmIDU2IC0gNTY6IG8wMAogICBJaTFJMTFpMTFJMWkgLiBhcHBlbmQgKCBJaUkxSUkxMWlpSSApCiAgIElJaWlpaSA9IHdvcmRfdG9fZmluZAogICBpZiA4NCAtIDg0OiBvT29PMG9vME9PT28gLSBJaQogICBpZiAxIC0gMTogbzAwICogb09vTzBvbzBPT09vCiAgIGlmIG9PMDAgPT0gbGVuICggaTExSWkxSUlpICkgLSAxIDoKICAgIElJaWlpaSA9ICcnCiAgIGVsc2UgOgogICAgaWYgbGVuICggSWlJMUlJMTFpaUkgKSA9PSAwIDoKICAgICBpZiAoIGxlbiAoIGkxMUlpMUlJaSBbIG9PMDAgKyAxIF0gKSA9PSAwIGFuZCB3b3JkX3RvX2ZpbmQgWyAwIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIG9yICggbGVuICggaTExSWkxSUlpIFsgb08wMCArIDEgXSApID4gMCBhbmQgaTExSWkxSUlpIFsgb08wMCArIDEgXSBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgOgogICAgICBJSWlpaWkgPSByZXBsYWNlX3dpdGgKICAgICAgaWYgNjYgLSA2Njogb09vTzBvbzBPT09vICsgaWkxSSAlIG9vTzBPTzAwMG8gLiBvMG8wME9vME8gKiBJaWkxaWkxSUkxMWkgJSBJaWkxaWkxSUkxMWkKICAgIGVsc2UgOgogICAgIGlmICggaTExSWkxSUlpIFsgb08wMCBdIFsgLSAxIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIGFuZCAoICggbGVuICggaTExSWkxSUlpIFsgb08wMCArIDEgXSApID09IDAgYW5kIHdvcmRfdG9fZmluZCBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgb3IgKCBsZW4gKCBpMTFJaTFJSWkgWyBvTzAwICsgMSBdICkgPiAwIGFuZCBpMTFJaTFJSWkgWyBvTzAwICsgMSBdIFsgMCBdIC4gbG93ZXIgKCApIG5vdCBpbiAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY3ODkwXycgKSApIDoKICAgICAgSUlpaWlpID0gcmVwbGFjZV93aXRoCiAgICAgIGlmIDg3IC0gODc6IE9vMG9vTzBvbzBvTyArIElpaUkgLiBvMDAgLSBpaQogICBJaTFJMTFpMTFJMWkgLiBhcHBlbmQgKCBJSWlpaWkgKQogICBvTzAwICs9IDEKICAgaWYgNiAtIDY6IGlJMTFJMUlJMUkxSSAqIGlpCiAgc291cmNlX3N0ciA9ICcnIC4gam9pbiAoIElpMUkxMWkxMUkxaSApCiByZXR1cm4gc291cmNlX3N0cgogaWYgMjggLSAyODogaTFpSWkxMWlJSWkxSSAqIElpaUkgLyBvb08wMG9Pb28KIGlmIDUyIC0gNTI6IG8wbzAwT28wTyAvIElpaUkgJSBvMDAgKiBJMTFpMTFJaSAlIE9vMG9vTzBvbzBvTwpkZWYgbzBvT09PTzAgKCBudW0gLCByYWRpeCApIDoKIGlmIDExIC0gMTE6IGlpMUkKIG9Pb08wMG9vME8gPSAiIgogaWYgbnVtID09IDAgOiByZXR1cm4gJzAnCiB3aGlsZSBudW0gPiAwIDoKICBvT29PMDBvbzBPID0gIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIgWyBudW0gJSByYWRpeCBdICsgb09vTzAwb28wTwogIG51bSAvPSByYWRpeAogcmV0dXJuIG9Pb08wMG9vME8KIGlmIDE5IC0gMTk6IG8wMCAtIElpaUkgLSBvMDBvb28wIC0gb09vTzBvbzBPT09vIC4gbzAwIC4gb29PMDBvT29vCiBpZiA0OCAtIDQ4OiBvMDAgKyBPbzBvTzBvb28KZGVmIGlJaWkxaTEgKCBjYyAsIGEgKSA6CiBJMUlJaTFJID0gIiIgaWYgY2MgPCBhIGVsc2UgaUlpaTFpMSAoIGludCAoIGNjIC8gYSApICwgYSApCiBjYyA9ICggY2MgJSBhICkKIE8wbzBvMCA9IGNociAoIGNjICsgMjkgKSBpZiBjYyA+IDM1IGVsc2Ugc3RyICggbzBvT09PTzAgKCBjYyAsIDM2ICkgKQogcmV0dXJuIEkxSUlpMUkgKyBPMG8wbzAKIGlmIDE1IC0gMTU6IGlJMTFJMUlJMUkxSSAuIG8wbzAwT28wTwogaWYgNzAgLSA3MDogbzAwb29vMCAuIElpICUgbzAwb29vMCAuIG8wbzAwT28wTyAtIGlJMTFJMUlJMUkxSQpkZWYgaUlJSWkxaTFJMTFpICggY29va2llSmFyICkgOgogdHJ5IDoKICBpMTExaTFpSWkxID0gIiIKICBmb3Igb29PT29vb29vbyAsIE9vTzBvTyBpbiBlbnVtZXJhdGUgKCBjb29raWVKYXIgKSA6CiAgIGkxMTFpMWlJaTEgKz0gT29PMG9PIC4gbmFtZSArICI9IiArIE9vTzBvTyAuIHZhbHVlICsgIjsiCiBleGNlcHQgOiBwYXNzCiBpZiAxMCAtIDEwOiBpaTFJIC4gb29PME9PMDAwbyAvIElpaUkgKiBPME9PbwogcmV0dXJuIGkxMTFpMWlJaTEKIGlmIDEwIC0gMTA6IEkxaTFpSTFpIC0gaTFpSWkxMWlJSWkxSQogaWYgNTkgLSA1OTogaWkgKiBpMWlJaTExaUlJaTFJICsgaWkxSQpkZWYgSWlpaWlpMTExaTFpaSAoIGNvb2tpZUphciAsIENPT0tJRUZJTEUgKSA6CiB0cnkgOgogIGlJaTExaWlJaUkxSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPME8wMG8wT09PMCAsIENPT0tJRUZJTEUgKQogIGNvb2tpZUphciAuIHNhdmUgKCBpSWkxMWlpSWlJMUkgLCBpZ25vcmVfZGlzY2FyZCA9IFRydWUgKQogZXhjZXB0IDogcGFzcwogaWYgMjMgLSAyMzogTzBPT28KIGlmIDEzIC0gMTM6IGlJMTFJMUlJMUkxSQpkZWYgSUlJaWkxICggQ09PS0lFRklMRSApIDoKIGlmIDc3IC0gNzc6IElpIC0gaUkxMUkxSUkxSTFJIC8gbzBPTzAgLyBPME9PbyAvIGkxMWlpMTFpSWkxMWkKIG9vbzBPMG8wT29PTyA9IE5vbmUKIGlmIENPT0tJRUZJTEUgOgogIHRyeSA6CiAgIGlJaTExaWlJaUkxSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPME8wMG8wT09PMCAsIENPT0tJRUZJTEUgKQogICBvb28wTzBvME9vT08gPSBjb29raWVsaWIgLiBMV1BDb29raWVKYXIgKCApCiAgIG9vbzBPMG8wT29PTyAuIGxvYWQgKCBpSWkxMWlpSWlJMUkgLCBpZ25vcmVfZGlzY2FyZCA9IFRydWUgKQogIGV4Y2VwdCA6CiAgIG9vbzBPMG8wT29PTyA9IE5vbmUKICAgaWYgOSAtIDk6IGkxMWlpMTFpSWkxMWkKIGlmIG5vdCBvb28wTzBvME9vT08gOgogIG9vbzBPMG8wT29PTyA9IGNvb2tpZWxpYiAuIExXUENvb2tpZUphciAoICkKICBpZiA2MCAtIDYwOiBvb08wMG9Pb28KIHJldHVybiBvb28wTzBvME9vT08KIGlmIDk4IC0gOTg6IE8wT09vCiBpZiAzNCAtIDM0OiBpSTExSTFJSTFJMUkgKiBJMWkxaUkxaSAqIEkxaTFpSTFpIC8gSWlpMWlpMUlJMTFpCmRlZiBpSTExMWkxSTFJSSAoIGZ1bl9jYWxsICwgcGFnZV9kYXRhICwgQ29va2llX0phciAsIG0gKSA6CiBJSUlJSUlpMWkgPSAnJwogaWYgMjYgLSAyNjogaUkxMUkxSUkxSTFJIC0gbzBvMDBPbzBPIC4gbzBvMDBPbzBPCiBpZiBJaUlpaUkgbm90IGluIHN5cyAuIHBhdGggOgogIHN5cyAuIHBhdGggLiBhcHBlbmQgKCBJaUlpaUkgKQogIGlmIDY4IC0gNjg6IE9vMG9vTzBvbzBvTyArIG8wT08wIC4gbzBvMDBPbzBPIC4gbzAwb29vMCAlIGlpMUkgJSBPbzBvb08wb28wb08KICBpZiA1MCAtIDUwOiBPbzBvTzBvb28gKyBJaWlJCiB0cnkgOgogIG8wT29PT28gPSAnaW1wb3J0ICcgKyBmdW5fY2FsbCAuIHNwbGl0ICggJy4nICkgWyAwIF0KICBpZiA1NiAtIDU2OiBJMWkxaUkxaSAvIGlJMTFJMUlJMUkxSSArIG9Pb08wb28wT09PbyAlIE9vMG9vTzBvbzBvTyAuIE9vMG9vTzBvbzBvTyAtIElpaTFpaTFJSTExaQogIGV4ZWMgKCBvME9vT09vICkKICBpZiA0OCAtIDQ4OiBpMWlJaTExaUlJaTFJIC0gTzBPT28gKyBpMWlJaTExaUlJaTFJIC0gSTExaTExSWkgKiBJaSAuIG8wMAogZXhjZXB0IDoKICBpZiAzNSAtIDM1OiBPbzBvTzBvb28gLiBvMG8wME9vME8gKyBpMWlJaTExaUlJaTFJICsgT28wb29PMG9vMG9PICsgaWkxSQogIHRyYWNlYmFjayAuIHByaW50X2V4YyAoIGZpbGUgPSBzeXMgLiBzdGRvdXQgKQogIGlmIDY1IC0gNjU6IG8wbzAwT28wTyAqIEkxMWkxMUlpIC8gSTExaTExSWkgLiBvT29PMG9vME9PT28KIGV4ZWMgKCAncmV0X3ZhbD0nICsgZnVuX2NhbGwgKQogaWYgODcgLSA4Nzogb29PME9PMDAwbyAqIElpaTFpaTFJSTExaSAlIGkxaUlpMTFpSUlpMUkgKiBpMWlJaTExaUlJaTFJCiBpZiA1OCAtIDU4OiBPbzBvb08wb28wb08gLiBJaWlJICsgSTExaTExSWkgJSBpMWlJaTExaUlJaTFJIC0gaTExaWkxMWlJaTExaQogdHJ5IDoKICByZXR1cm4gc3RyICggSUlJSUlJaTFpICkKIGV4Y2VwdCA6IHJldHVybiBJSUlJSUlpMWkKIGlmIDUwIC0gNTA6IG8wMCAlIG9vTzBPTzAwMG8gLSBPME9PbyAuIGlpMUkgKyBvMG8wME9vME8gJSBvMDAKIGlmIDEwIC0gMTA6IG8wMCAuIGlpMUkgKyBvMDBvb28wCmRlZiBPb29PT09vMCAoIGZ1bl9jYWxsICwgcGFnZV9kYXRhICwgQ29va2llX0phciAsIG0gKSA6CiBpZiA2NiAtIDY2OiBpMTFpaTExaUlpMTFpICUgSWlpSQogSUlJSUlJaTFpID0gJycKIGlmIElpSWlpSSBub3QgaW4gc3lzIC4gcGF0aCA6CiAgc3lzIC4gcGF0aCAuIGFwcGVuZCAoIElpSWlpSSApCiBPTzBvT09vID0gb3BlbiAoIElpSWlpSSArICIvTFNQcm9keW5hbWljQ29kZS5weSIgLCAidyIgKQogT08wb09PbyAuIHdyaXRlICggZnVuX2NhbGwgKSA7CiBPTzBvT09vIC4gY2xvc2UgKCApCiBpbXBvcnQgTFNQcm9keW5hbWljQ29kZQogSUlJSUlJaTFpID0gTFNQcm9keW5hbWljQ29kZSAuIEdldExTUHJvRGF0YSAoIHBhZ2VfZGF0YSAsIENvb2tpZV9KYXIgLCBtICkKIHRyeSA6CiAgcmV0dXJuIHN0ciAoIElJSUlJSWkxaSApCiBleGNlcHQgOiByZXR1cm4gSUlJSUlJaTFpCiBpZiAyMSAtIDIxOiBvT29PMG9vME9PT28gLSBpaSAlIElpCiBpZiA3MSAtIDcxOiBpaTFJIC0gSTFpMWlJMWkgKiBvb08wMG9Pb28gKyBvME9PMCAtIGkxMWlpMTFpSWkxMWkgJSBJaWkxaWkxSUkxMWkKZGVmIE9vbzBvTyAoIGNhcHRjaGFrZXkgLCBjaiAsIHR5cGUgPSAxICkgOgogaWYgMzIgLSAzMjogaWkxSSAuIG8wMCArIG9vTzBPTzAwMG8gLSBpMTFpaTExaUlpMTFpIC0gaUkxMUkxSUkxSTFJCiBpZiAyMCAtIDIwOiBvT29PMG9vME9PT28gJSBJaWkxaWkxSUkxMWkKIGlmIDQ0IC0gNDQ6IGlpIC4gb29PME9PMDAwbyAuIE9vMG9vTzBvbzBvTyAlIGlpCiBPbzBvTzAwID0gIiIKIGlpMTFpaTExSSA9ICIiCiBpZiA4MyAtIDgzOiBvb08wT08wMDBvICogaWkxSSAqIG8wMCAuIElpaTFpaTFJSTExaSAvIEkxaTFpSTFpICsgaWkxSQogaWYgNDMgLSA0MzogaWkKIGlmIDk3IC0gOTc6IElpaTFpaTFJSTExaSAvIGkxaUlpMTFpSUlpMUkgKyBvb08wMG9Pb28KIGlmIDMyIC0gMzI6IE8wT09vICUgb29PMDBvT29vICogaTFpSWkxMWlJSWkxSQogaWYgNzIgLSA3MjogTzBPT28gLiBvMDAgLSBvb08wMG9Pb28gLSBvMDBvb28wICUgaWkxSQogb08wbzAwTzBPMG9vMCA9IEZhbHNlCiBpMUkxMUlpMTExSUkgPSBOb25lCiBpaTExaWkxMUkgPSBOb25lCiBpZiBsZW4gKCBjYXB0Y2hha2V5ICkgPiAwIDoKICBPMDAwT09PMDBPb28gPSBjYXB0Y2hha2V5CiAgaWYgbm90IE8wMDBPT08wME9vbyAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgIE8wMDBPT08wME9vbyA9ICdodHRwOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS9jaGFsbGVuZ2U/az0nICsgTzAwME9PTzAwT29vICsgJyZhamF4PTEnCiAgIGlmIDY1IC0gNjU6IGlJMTFJMUlJMUkxSSAlIG8wT08wICsgbzBvMDBPbzBPIC8gaWkKICBvTzBvMDBPME8wb28wID0gVHJ1ZQogIGlmIDUyIC0gNTI6IG8wMG9vbzAgJSBPbzBvb08wb28wb08gKiBJMTFpMTFJaSAlIEkxaTFpSTFpICsgT28wb29PMG9vMG9PIC8gbzAwCiAgb28wMDBvID0gJ2NoYWxsZW5nZS4qP1wnKC4qPylcJycKICBPTzAwbzBvT08gPSAnXCcoLio/KVwnJwogIGkxaTFJMSA9IElpaWlJICggTzAwME9PTzAwT29vICwgY29va2llSmFyID0gY2ogKQogIE9vMG9PMDAgPSByZSAuIGZpbmRhbGwgKCBvbzAwMG8gLCBpMWkxSTEgKSBbIDAgXQogIEkxaSA9ICdodHRwOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS9yZWxvYWQ/Yz0nIDsKICBPT28wTyA9IE8wMDBPT08wME9vbyAuIHNwbGl0ICggJ2s9JyApIFsgMSBdCiAgSTFpICs9IE9vMG9PMDAgKyAnJms9JyArIE9PbzBPICsgJyZyZWFzb249aSZ0eXBlPWltYWdlJmxhbmc9ZW4nCiAgb09Pb29vTzBPMCA9IElpaWlJICggSTFpICwgY29va2llSmFyID0gY2ogKQogIGkxSTExSWkxMTFJSSA9IHJlIC4gZmluZGFsbCAoIE9PMDBvMG9PTyAsIG9PT29vb08wTzAgKSBbIDAgXQogIGlpMU8wb29vb28wMDAgPSAnaHR0cDovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvaW1hZ2U/Yz0nICsgaTFJMTFJaTExMUlJCiAgaWYgbm90IGlpMU8wb29vb28wMDAgLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogICBpaTFPMG9vb29vMDAwID0gJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLycgKyBpaTFPMG9vb29vMDAwCiAgaW1wb3J0IHJhbmRvbQogIE8wb29vbzAwbzBPbyA9IHJhbmRvbSAuIHJhbmRyYW5nZSAoIDEwMCAsIDEwMDAgLCA1ICkKICBPb29Pb09PME9PID0gb3MgLiBwYXRoIC4gam9pbiAoIE8wTzAwbzBPT08wICwgc3RyICggTzBvb29vMDBvME9vICkgKyAiY2FwdGNoYS5pbWciICkKICBJMWlpSWlpaWkxMTExID0gb3BlbiAoIE9vb09vT08wT08gLCAid2IiICkKICBJMWlpSWlpaWkxMTExIC4gd3JpdGUgKCBJaWlpSSAoIGlpMU8wb29vb28wMDAgLCBjb29raWVKYXIgPSBjaiApICkKICBJMWlpSWlpaWkxMTExIC4gY2xvc2UgKCApCiAgSTFpaTFpMTFpID0gT29vb29vME8wMG8gKCBjYXB0Y2hhID0gT29vT29PTzBPTyApCiAgaWkxMWlpMTFJID0gSTFpaTFpMTFpIC4gZ2V0ICggKQogIG9zIC4gcmVtb3ZlICggT29vT29PTzBPTyApCiAgaWYgMzYgLSAzNjogb09vTzBvbzBPT09vICsgT28wb08wb29vICogbzBvMDBPbzBPIC4gaWkgKiBpaQogaWYgaTFJMTFJaTExMUlJIDoKICBpZiB0eXBlID09IDEgOgogICByZXR1cm4gJ3JlY2FwdGNoYV9jaGFsbGVuZ2VfZmllbGQ9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpMUkxMUlpMTExSUkgKSArICcmcmVjYXB0Y2hhX3Jlc3BvbnNlX2ZpZWxkPScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggaWkxMWlpMTFJICkKICBlbGlmIHR5cGUgPT0gMiA6CiAgIHJldHVybiAncmVjYXB0Y2hhX2NoYWxsZW5nZV9maWVsZDonICsgaTFJMTFJaTExMUlJICsgJyxyZWNhcHRjaGFfcmVzcG9uc2VfZmllbGQ6JyArIGlpMTFpaTExSQogIGVsc2UgOgogICByZXR1cm4gJ3JlY2FwdGNoYV9jaGFsbGVuZ2VfZmllbGQ9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpMUkxMUlpMTExSUkgKSArICcmcmVjYXB0Y2hhX3Jlc3BvbnNlX2ZpZWxkPScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggaWkxMWlpMTFJICkKIGVsc2UgOgogIHJldHVybiAnJwogIGlmIDUxIC0gNTE6IElpaTFpaTFJSTExaSAqIElpaTFpaTFJSTExaQogIGlmIDk4IC0gOTg6IGkxMWlpMTFpSWkxMWkgLSBvMDBvb28wIC4gT28wb08wb29vICUgSWkKZGVmIElpaWlJICggdXJsICwgY29va2llSmFyID0gTm9uZSAsIHBvc3QgPSBOb25lICwgdGltZW91dCA9IDIwICwgaGVhZGVycyA9IE5vbmUgLCBub3JlZGlyID0gRmFsc2UgKSA6CiBpZiA2OSAtIDY5OiBJaWkxaWkxSUkxMWkgKyBvMDAgKiBvMG8wME9vME8gLiBPbzBvb08wb28wb08gJSBvT29PMG9vME9PT28KIGlmIDk2IC0gOTY6IE8wT09vIC4gTzBPT28gLSBJMWkxaUkxaSAvIEkxaTFpSTFpCiBpaTFJaTFJaUlJaSA9IHVybGxpYjIgLiBIVFRQQ29va2llUHJvY2Vzc29yICggY29va2llSmFyICkKIGlmIDk2IC0gOTY6IElpIC8gSTExaTExSWkgLSBvMG8wME9vME8gLiBPME9PbwogaWYgbm9yZWRpciA6CiAgT09vTzAgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggaUkgLCBpaTFJaTFJaUlJaSAsIHVybGxpYjIgLiBIVFRQQmFzaWNBdXRoSGFuZGxlciAoICkgLCB1cmxsaWIyIC4gSFRUUEhhbmRsZXIgKCApICkKIGVsc2UgOgogIE9Pb08wID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIGlpMUlpMUlpSUlpICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogIGlmIDM5IC0gMzk6IE8wT09vIC8gbzBvMDBPbzBPICogT28wb08wb29vCiBPMDBvTyA9IHVybGxpYjIgLiBSZXF1ZXN0ICggdXJsICkKIE8wMG9PIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMzMuMC4xNzUwLjE1NCBTYWZhcmkvNTM3LjM2JyApCiBpZiBoZWFkZXJzIDoKICBmb3IgSWkxaUkxMTEgLCBJMUlpSSBpbiBoZWFkZXJzIDoKICAgTzAwb08gLiBhZGRfaGVhZGVyICggSWkxaUkxMTEgLCBJMUlpSSApCiAgIGlmIDQ0IC0gNDQ6IE9vMG9vTzBvbzBvTyAvIE9vMG9vTzBvbzBvTyAuIElpaUkgJSBPbzBvTzBvb28gKyBvT29PMG9vME9PT28KIEkxMWkxSTFJID0gT09vTzAgLiBvcGVuICggTzAwb08gLCBwb3N0ICwgdGltZW91dCA9IHRpbWVvdXQgKQogT29vb29vbyA9IEkxMWkxSTFJIC4gcmVhZCAoICkKIEkxMWkxSTFJIC4gY2xvc2UgKCApCiByZXR1cm4gT29vb29vbyA7CiBpZiA1NyAtIDU3OiBvMDAgJSBpMTFpaTExaUlpMTFpIC0gaTExaWkxMWlJaTExaQogaWYgNSAtIDU6IGlpMUkgKyBpaSAlIG9Pb08wb28wT09PbwpkZWYgT08wT28gKCBzdHIgLCByZWcgPSBOb25lICkgOgogaWYgcmVnIDoKICBzdHIgPSByZSAuIGZpbmRhbGwgKCByZWcgLCBzdHIgKSBbIDAgXQogSUlpaWlpaUlpSUlpID0gdXJsbGliIC4gdW5xdW90ZSAoIHN0ciBbIDAgOiBsZW4gKCBzdHIgKSAtIDEgXSApIDsKIGlpSWlpSWkxID0gJycgOwogZm9yIG9vT29vbzAwMG9PTyBpbiByYW5nZSAoIGxlbiAoIElJaWlpaWlJaUlJaSApICkgOgogIGlpSWlpSWkxICs9IGNociAoIG9yZCAoIElJaWlpaWlJaUlJaSBbIG9vT29vbzAwMG9PTyBdICkgLSBJSWlpaWlpSWlJSWkgWyBsZW4gKCBJSWlpaWlpSWlJSWkgKSAtIDEgXSApIDsKIGlpSWlpSWkxID0gdXJsbGliIC4gdW5xdW90ZSAoIGlpSWlpSWkxICkKIGlmIDMwIC0gMzA6IE9vMG9vTzBvbzBvTyArIG9vTzBPTzAwMG8gLSBPbzBvTzBvb28gKiBpaQogcmV0dXJuIGlpSWlpSWkxCiBpZiAxOSAtIDE5OiBPbzBvTzBvb28gLSBJaWlJIC4gaUkxMUkxSUkxSTFJIC4gb09vTzBvbzBPT09vIC8gT28wb29PMG9vMG9PCiBpZiA4NyAtIDg3OiBvT29PMG9vME9PT28gLSBPME9PbyAtIE9vMG9vTzBvbzBvTyArIGkxaUlpMTFpSUlpMUkgJSBpSTExSTFJSTFJMUkgLyBJaQpkZWYgSUlpaTFpMWlpaTEgKCBzdHIgKSA6CiBpMWlJSUlJMWlpSUlpID0gcmUgLiBmaW5kYWxsICggJ3VuZXNjYXBlXChcJyguKj8pXCcnICwgc3RyICkKIGlmIDE3IC0gMTc6IEkxaTFpSTFpCiBpZiAoIG5vdCBpMWlJSUlJMWlpSUlpID09IE5vbmUgKSBhbmQgbGVuICggaTFpSUlJSTFpaUlJaSApID4gMCA6CiAgZm9yIG9Pb08wb29PMDAwMCBpbiBpMWlJSUlJMWlpSUlpIDoKICAgaWYgNjAgLSA2MDogb09vTzBvbzBPT09vIC8gSWlpMWlpMUlJMTFpICsgT28wb29PMG9vMG9PIC0gbzAwCiAgIHN0ciA9IHN0ciAuIHJlcGxhY2UgKCBvT29PMG9vTzAwMDAgLCB1cmxsaWIgLiB1bnF1b3RlICggb09vTzBvb08wMDAwICkgKQogcmV0dXJuIHN0cgogaWYgNDkgLSA0OTogaTExaWkxMWlJaTExaSAtIG8wbzAwT28wTyAvIGkxMWlpMTFpSWkxMWkgKiBvT29PMG9vME9PT28gKyBvb08wMG9Pb28KSWlpaTFJID0gMAppZiA2MSAtIDYxOiBpSTExSTFJSTFJMUkgLSBJMWkxaUkxaSAvIG8wMCAqIEkxaTFpSTFpICUgbzAwb29vMCAlIG8wMAppZiA2MyAtIDYzOiBPbzBvb08wb28wb08gJSBpSTExSTFJSTFJMUkKZGVmIG8wICggbSAsIGh0bWxfcGFnZSAsIGNvb2tpZUphciApIDoKIGdsb2JhbCBJaWlpMUkKIElpaWkxSSArPSAxCiBJSTFpaSA9IG0gWyAnZXhwcmVzJyBdCiBvb29pSWlpMTFpMUkgPSBtIFsgJ3BhZ2UnIF0KIG8wMGlJaWlpSUkgPSByZSAuIGNvbXBpbGUgKCAnXCRMaXZlU3RyZWFtQ2FwdGNoYVxbKFteXF1dKilcXScgKSAuIGZpbmRhbGwgKCBJSTFpaSApIFsgMCBdCiBpZiA1IC0gNTogaWkgLyBJaWlJICUgSTFpMWlJMWkgJSBpMTFpaTExaUlpMTFpICogbzAwICsgaUkxMUkxSUkxSTFJCiBPMDAwT09PMDBPb28gPSByZSAuIGNvbXBpbGUgKCBvMDBpSWlpaUlJICkgLiBmaW5kYWxsICggaHRtbF9wYWdlICkgWyAwIF0KIGlmIDExIC0gMTE6IG9vTzAwb09vbyAlIElpICUgbzBPTzAgLiBPbzBvTzBvb28KIGlmIG5vdCBPMDAwT09PMDBPb28gLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogIG9PTzBvID0gJ2h0dHA6Ly8nICsgIiIgLiBqb2luICggb29vaUlpaTExaTFJIC4gc3BsaXQgKCAnLycgKSBbIDIgOiAzIF0gKQogIGlmIE8wMDBPT08wME9vbyAuIHN0YXJ0c3dpdGggKCAiLyIgKSA6CiAgIE8wMDBPT08wME9vbyA9IG9PTzBvICsgTzAwME9PTzAwT29vCiAgZWxzZSA6CiAgIE8wMDBPT08wME9vbyA9IG9PTzBvICsgJy8nICsgTzAwME9PTzAwT29vCiAgIGlmIDY1IC0gNjU6IG8wMCAuIGkxMWlpMTFpSWkxMWkgKyBvMDBvb28wCiBPb29Pb09PME9PID0gb3MgLiBwYXRoIC4gam9pbiAoIE8wTzAwbzBPT08wICwgc3RyICggSWlpaTFJICkgKyAiY2FwdGNoYS5qcGciICkKIEkxaWlJaWlpaTExMTEgPSBvcGVuICggT29vT29PTzBPTyAsICJ3YiIgKQogaWYgMjUgLSAyNTogSWlpSSArIGkxaUlpMTFpSUlpMUkgLiBpMWlJaTExaUlJaTFJICUgaWkgLSBvMDBvb28wCiBPMDBvTyA9IHVybGxpYjIgLiBSZXF1ZXN0ICggTzAwME9PTzAwT29vICkKIE8wMG9PIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IHJ2OjE0LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTQuMC4xJyApCiBpZiAncmVmZXJlcicgaW4gbSA6CiAgTzAwb08gLiBhZGRfaGVhZGVyICggJ1JlZmVyZXInICwgbSBbICdyZWZlcmVyJyBdICkKIGlmICdhZ2VudCcgaW4gbSA6CiAgTzAwb08gLiBhZGRfaGVhZGVyICggJ1VzZXItYWdlbnQnICwgbSBbICdhZ2VudCcgXSApCiBpZiAnc2V0Y29va2llJyBpbiBtIDoKICBpZiA0MyAtIDQzOiBpMTFpaTExaUlpMTFpICUgaTExaWkxMWlJaTExaQogIE8wMG9PIC4gYWRkX2hlYWRlciAoICdDb29raWUnICwgbSBbICdzZXRjb29raWUnIF0gKQogIGlmIDQ2IC0gNDY6IGkxaUlpMTFpSUlpMUkgJSBpSTExSTFJSTFJMUkgLiBvMDAgLiBvMG8wME9vME8gKiBPME9PbyAvIGlpCiAgaWYgNyAtIDc6IG8wT08wIC0gbzBvMDBPbzBPICogSTFpMWlJMWkgLSBJaWlJIC0gb29PME9PMDAwbwogIGlmIDQxIC0gNDE6IEkxMWkxMUlpIC0gb29PMDBvT29vICUgb29PME9PMDAwbyAuIG9vTzAwb09vbyAtIEkxaTFpSTFpCiAgaWYgNDUgLSA0NTogbzAwb29vMCAtIE9vMG9vTzBvbzBvTwogdXJsbGliMiAuIHVybG9wZW4gKCBPMDBvTyApCiBJMTFpMUkxSSA9IHVybGxpYjIgLiB1cmxvcGVuICggTzAwb08gKQogaWYgNzAgLSA3MDogaTExaWkxMWlJaTExaSAlIEkxMWkxMUlpIC8gSTExaTExSWkgLiBJMWkxaUkxaSAlIE8wT09vIC4gb29PME9PMDAwbwogSTFpaUlpaWlpMTExMSAuIHdyaXRlICggSTExaTFJMUkgLiByZWFkICggKSApCiBJMTFpMUkxSSAuIGNsb3NlICggKQogSTFpaUlpaWlpMTExMSAuIGNsb3NlICggKQogSTFpaTFpMTFpID0gT29vb29vME8wMG8gKCBjYXB0Y2hhID0gT29vT29PTzBPTyApCiBpaTExaWkxMUkgPSBJMWlpMWkxMWkgLiBnZXQgKCApCiByZXR1cm4gaWkxMWlpMTFJCiBpZiAxMCAtIDEwOiBvMDBvb28wIC0gSWkgLiBJaWkxaWkxSUkxMWkgJSBpaTFJCiBpZiA3OCAtIDc4OiBpSTExSTFJSTFJMUkgKiBpMWlJaTExaUlJaTFJIC4gaTFpSWkxMWlJSWkxSSAtIE9vMG9vTzBvbzBvTyAuIGlJMTFJMUlJMUkxSQpkZWYgSTExMUkxSSAoIGltYWdlcmVnZXggLCBodG1sX3BhZ2UgLCBjb29raWVKYXIgLCBtICkgOgogZ2xvYmFsIElpaWkxSQogSWlpaTFJICs9IDEKIGlmIDU0IC0gNTQ6IG9vTzBPTzAwMG8gKyBJMWkxaUkxaSAlIEkxaTFpSTFpICUgSWlpSQogaWYgMjUgLSAyNTogbzAwIC0gaTFpSWkxMWlJSWkxSQogaWYgbm90IGltYWdlcmVnZXggPT0gJycgOgogIGlmIGh0bWxfcGFnZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgIG9PTzBvID0gSWlpaUkgKCBodG1sX3BhZ2UgLCBjb29raWVKYXIgPSBjb29raWVKYXIgKQogIGVsc2UgOgogICBvT08wbyA9IGh0bWxfcGFnZQogIE8wMDBPT08wME9vbyA9IHJlIC4gY29tcGlsZSAoIGltYWdlcmVnZXggKSAuIGZpbmRhbGwgKCBodG1sX3BhZ2UgKSBbIDAgXQogZWxzZSA6CiAgTzAwME9PTzAwT29vID0gaHRtbF9wYWdlCiAgaWYgJ29uZXBsYXkudHYvZW1iZWQnIGluIGh0bWxfcGFnZSA6CiAgIGltcG9ydCBvbmVwbGF5CiAgIG9PTzBvID0gSWlpaUkgKCBodG1sX3BhZ2UgLCBjb29raWVKYXIgPSBjb29raWVKYXIgKQogICBPMDAwT09PMDBPb28gPSBvbmVwbGF5IC4gZ2V0Q2FwdGNoYVVybCAoIG9PTzBvICkKICAgaWYgMTAgLSAxMDogbzBvMDBPbzBPICUgT28wb08wb29vIC4gaTExaWkxMWlJaTExaSArIElpaUkgKyBJaWkxaWkxSUkxMWkKIE9vb09vT08wT08gPSBvcyAuIHBhdGggLiBqb2luICggTzBPMDBvME9PTzAgLCBzdHIgKCBJaWlpMUkgKSArICJjYXB0Y2hhLmpwZyIgKQogSTFpaUlpaWlpMTExMSA9IG9wZW4gKCBPb29Pb09PME9PICwgIndiIiApCiBpZiA1MiAtIDUyOiBvT29PMG9vME9PT28gLyBpMTFpaTExaUlpMTFpICsgb29PMDBvT29vCiBPMDBvTyA9IHVybGxpYjIgLiBSZXF1ZXN0ICggTzAwME9PTzAwT29vICkKIE8wMG9PIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IHJ2OjE0LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTQuMC4xJyApCiBpZiAncmVmZXJlcicgaW4gbSA6CiAgTzAwb08gLiBhZGRfaGVhZGVyICggJ1JlZmVyZXInICwgbSBbICdyZWZlcmVyJyBdICkKIGlmICdhZ2VudCcgaW4gbSA6CiAgTzAwb08gLiBhZGRfaGVhZGVyICggJ1VzZXItYWdlbnQnICwgbSBbICdhZ2VudCcgXSApCiBpZiAnYWNjZXB0JyBpbiBtIDoKICBPMDBvTyAuIGFkZF9oZWFkZXIgKCAnQWNjZXB0JyAsIG0gWyAnYWNjZXB0JyBdICkKIGlmICdzZXRjb29raWUnIGluIG0gOgogIGlmIDQ5IC0gNDk6IGlJMTFJMUlJMUkxSSAlIEkxaTFpSTFpIC4gSTFpMWlJMWkgLiBpSTExSTFJSTFJMUkgKiBvT29PMG9vME9PT28gLyBJMWkxaUkxaQogIE8wMG9PIC4gYWRkX2hlYWRlciAoICdDb29raWUnICwgbSBbICdzZXRjb29raWUnIF0gKQogIGlmIDk1IC0gOTU6IG8wT08wICogaUkxMUkxSUkxSTFJICsgSWlpMWlpMUlJMTFpCiAgaWYgNSAtIDU6IGkxaUlpMTFpSUlpMUkKICBpZiAxMDAgLSAxMDA6IG8wMG9vbzAgKyBpSTExSTFJSTFJMUkKICBpZiA1OSAtIDU5OiBPbzBvTzBvb28KICBpZiA4OSAtIDg5OiBvT29PMG9vME9PT28gJSBpSTExSTFJSTFJMUkKIEkxMWkxSTFJID0gdXJsbGliMiAuIHVybG9wZW4gKCBPMDBvTyApCiBpZiAzNSAtIDM1OiBJaWkxaWkxSUkxMWkgKyBvb08wMG9Pb28gLSBvT29PMG9vME9PT28gJSBvME9PMCAlIElpaUkgJSBvT29PMG9vME9PT28KIEkxaWlJaWlpaTExMTEgLiB3cml0ZSAoIEkxMWkxSTFJIC4gcmVhZCAoICkgKQogSTExaTFJMUkgLiBjbG9zZSAoICkKIEkxaWlJaWlpaTExMTEgLiBjbG9zZSAoICkKIEkxaWkxaTExaSA9IE9vb29vbzBPMDBvICggY2FwdGNoYSA9IE9vb09vT08wT08gKQogaWkxMWlpMTFJID0gSTFpaTFpMTFpIC4gZ2V0ICggKQogcmV0dXJuIGlpMTFpaTExSQogaWYgNDUgLSA0NTogSTExaTExSWkgKiBPbzBvb08wb28wb08gJSBpMTFpaTExaUlpMTFpCiBpZiAyNCAtIDI0OiBPME9PbyAtIEkxaTFpSTFpICogbzBPTzAKIGlmIDg3IC0gODc6IG8wMG9vbzAgLSBJaWkxaWkxSUkxMWkgJSBJaWkxaWkxSUkxMWkgLiBvME9PMCAvIElpaTFpaTFJSTExaQogaWYgNiAtIDY6IG9Pb08wb28wT09PbyAvIGlJMTFJMUlJMUkxSSAqIGlpICogSWkKIGlmIDc5IC0gNzk6IE9vMG9PMG9vbyAlIGkxMWlpMTFpSWkxMWkKIGlmIDgxIC0gODE6IElpICsgSWkgKiBpMTFpaTExaUlpMTFpICsgT28wb08wb29vCiBpZiAzMiAtIDMyOiBvMG8wME9vME8gLiBpaQogaWYgMTUgLSAxNTogSTExaTExSWkgLiBpMTFpaTExaUlpMTFpCiBpZiAxNyAtIDE3OiBJaSAvIGkxaUlpMTFpSUlpMUkgLiBpMTFpaTExaUlpMTFpIC8gSTExaTExSWkKIGlmIDM4IC0gMzg6IGlpMUkgLiBJaWkxaWkxSUkxMWkgJSBvMDBvb28wICsgaUkxMUkxSUkxSTFJICsgbzBvMDBPbzBPCiBpZiA0NyAtIDQ3OiBpMTFpaTExaUlpMTFpICsgT28wb08wb29vIC8gb29PME9PMDAwbwogaWYgOTcgLSA5NzogSWlpMWlpMUlJMTFpIC8gSTExaTExSWkgJSBvMG8wME9vME8gKyBpaTFJIC0gTzBPT28KIGlmIDM4IC0gMzg6IElpaUkgJSBvb08wMG9Pb28gKyBJaSArIG8wMCArIE8wT09vIC8gSWkKIGlmIDk0IC0gOTQ6IG8wMCAtIGkxaUlpMTFpSUlpMUkgKyBvME9PMAogaWYgNTkgLSA1OTogSTFpMWlJMWkgLiBJMTFpMTFJaSAtIGlJMTFJMUlJMUkxSSArIGlJMTFJMUlJMUkxSQpkZWYgb08wbzBPbyAoIG5hbWUgLCBoZWFkbmFtZSApIDoKIGlmIDc2IC0gNzY6IE8wT09vIC8gb09vTzBvbzBPT09vICsgSWlpMWlpMUlJMTFpCiBpZiAyIC0gMjogSWkgLSBvb08wMG9Pb28gKyBpMTFpaTExaUlpMTFpICUgSTFpMWlJMWkgKiBvMDBvb28wCiBPb28wMDBPMDAgPSB4Ym1jIC4gS2V5Ym9hcmQgKCAnZGVmYXVsdCcgLCAnaGVhZGluZycgLCBUcnVlICkKIE9vbzAwME8wMCAuIHNldERlZmF1bHQgKCBuYW1lICkKIE9vbzAwME8wMCAuIHNldEhlYWRpbmcgKCBoZWFkbmFtZSApCiBPb28wMDBPMDAgLiBzZXRIaWRkZW5JbnB1dCAoIEZhbHNlICkKIHJldHVybiBPb28wMDBPMDAgLiBnZXRUZXh0ICggKQogaWYgMzYgLSAzNjogT28wb29PMG9vMG9PICUgSWkKIGlmIDQ3IC0gNDc6IGlpMUkgKyBvb08wT08wMDBvIC4gaTFpSWkxMWlJSWkxSSAqIG8wT08wIC4gSTFpMWlJMWkgLyBpaTFJCiBpZiA1MCAtIDUwOiBvb08wMG9Pb28gLyBpaTFJICUgaWkKIGlmIDgzIC0gODM6IElpaTFpaTFJSTExaSAqIElpaTFpaTFJSTExaSArIE9vMG9vTzBvbzBvTwpjbGFzcyBPb29vb28wTzAwbyAoIHhibWNndWkgLiBXaW5kb3dEaWFsb2cgKSA6CiBkZWYgX19pbml0X18gKCBzZWxmICwgKiBhcmdzICwgKioga3dhcmdzICkgOgogIHNlbGYgLiBjcHRsb2MgPSBrd2FyZ3MgLiBnZXQgKCAnY2FwdGNoYScgKQogIHNlbGYgLiBpbWcgPSB4Ym1jZ3VpIC4gQ29udHJvbEltYWdlICggMzM1ICwgMzAgLCA2MjQgLCA2MCAsIHNlbGYgLiBjcHRsb2MgKQogIHNlbGYgLiBhZGRDb250cm9sICggc2VsZiAuIGltZyApCiAgc2VsZiAuIGtiZCA9IHhibWMgLiBLZXlib2FyZCAoICkKICBpZiA1NyAtIDU3OiBvMG8wME9vME8gLSBvMG8wME9vME8gLiBJaWkxaWkxSUkxMWkgLyBJaWlJIC8gbzAwb29vMAogZGVmIGdldCAoIHNlbGYgKSA6CiAgc2VsZiAuIHNob3cgKCApCiAgdGltZSAuIHNsZWVwICggMiApCiAgc2VsZiAuIGtiZCAuIGRvTW9kYWwgKCApCiAgaWYgKCBzZWxmIC4ga2JkIC4gaXNDb25maXJtZWQgKCApICkgOgogICBJMUlpSUkxSTFpMUkxID0gc2VsZiAuIGtiZCAuIGdldFRleHQgKCApCiAgIHNlbGYgLiBjbG9zZSAoICkKICAgcmV0dXJuIEkxSWlJSTFJMWkxSTEKICBzZWxmIC4gY2xvc2UgKCApCiAgcmV0dXJuIEZhbHNlCiAgaWYgMjggLSAyODogaTFpSWkxMWlJSWkxSSArIE9vMG9PMG9vbyAlIG9vTzBPTzAwMG8gLyBpMTFpaTExaUlpMTFpICsgSWkKICBpZiAyMCAtIDIwOiBJaWkxaWkxSUkxMWkKZGVmIG9PICggKSA6CiBpbXBvcnQgdGltZQogcmV0dXJuIHN0ciAoIGludCAoIHRpbWUgLiB0aW1lICggKSAqIDEwMDAgKSApCiBpZiAzIC0gMzogaTExaWkxMWlJaTExaSAqIGlpMUkgLiBJMTFpMTFJaSAuIG8wbzAwT28wTyAtIG9Pb08wb28wT09PbwogaWYgODEgLSA4MTogSTExaTExSWkgLSBpSTExSTFJSTFJMUkgLyBJMTFpMTFJaSAvIG8wbzAwT28wTwpkZWYgSTFJaTExMTFpSWkgKCApIDoKIGltcG9ydCB0aW1lCiByZXR1cm4gc3RyICggaW50ICggdGltZSAuIHRpbWUgKCApICkgKQogaWYgMzQgLSAzNDogbzAwb29vMCAqIG8wMG9vbzAgLSBJaWkxaWkxSUkxMWkgLSBvMG8wME9vME8gLiBJaQogaWYgMzIgLSAzMjogaUkxMUkxSUkxSTFJIC4gaTExaWkxMWlJaTExaSAqIG8wT08wIC8gT28wb29PMG9vMG9PIC4gb29PME9PMDAwbyAtIGkxaUlpMTFpSUlpMUkKZGVmIElJSWkgKCApIDoKIElJSTExSWlpaUlpMSA9IFsgXQogSWlJMUlpMWlpID0gc3lzIC4gYXJndiBbIDIgXQogaWYgbGVuICggSWlJMUlpMWlpICkgPj0gMiA6CiAgSWkxMWlpSUlpSTEgPSBzeXMgLiBhcmd2IFsgMiBdCiAgSTFJaWkxMUkxMTFJID0gSWkxMWlpSUlpSTEgLiByZXBsYWNlICggJz8nICwgJycgKQogIGlmICggSWkxMWlpSUlpSTEgWyBsZW4gKCBJaTExaWlJSWlJMSApIC0gMSBdID09ICcvJyApIDoKICAgSWkxMWlpSUlpSTEgPSBJaTExaWlJSWlJMSBbIDAgOiBsZW4gKCBJaTExaWlJSWlJMSApIC0gMiBdCiAgSUlJaUkxaWlpaWlJaSA9IEkxSWlpMTFJMTExSSAuIHNwbGl0ICggJyYnICkKICBJSUkxMUlpaWlJaTEgPSB7IH0KICBmb3Igb29Pb29vMDAwb09PIGluIHJhbmdlICggbGVuICggSUlJaUkxaWlpaWlJaSApICkgOgogICBPMG9vMCA9IHsgfQogICBPMG9vMCA9IElJSWlJMWlpaWlpSWkgWyBvb09vb28wMDBvT08gXSAuIHNwbGl0ICggJz0nICkKICAgaWYgKCBsZW4gKCBPMG9vMCApICkgPT0gMiA6CiAgICBJSUkxMUlpaWlJaTEgWyBPMG9vMCBbIDAgXSBdID0gTzBvbzAgWyAxIF0KIHJldHVybiBJSUkxMUlpaWlJaTEKIGlmIDM3IC0gMzc6IElpCiBpZiAxMiAtIDEyOiBJaWkxaWkxSUkxMWkgLyBvMDBvb28wCmRlZiBpaTExICggKSA6CiBJSTFpSSA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBvMG9vMG8wTzAwT08gKSAuIHJlYWQgKCApICkKIElJMUkxaWlJSUkgPSBsZW4gKCBJSTFpSSApCiBmb3Igb29Pb29vMDAwb09PIGluIElJMWlJIDoKICBpaUlpSSA9IG9vT29vbzAwMG9PTyBbIDAgXQogIElpSUkgPSBvb09vb28wMDBvT08gWyAxIF0KICBJaTExID0gb29Pb29vMDAwb09PIFsgMiBdCiAgdHJ5IDoKICAgSWkxSTFpID0gb29Pb29vMDAwb09PIFsgMyBdCiAgIGlmIElpMUkxaSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaWYgTzAwIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgIElpMUkxaSA9IElpMTEKICAgZWxzZSA6CiAgICBJaTFJMWkgPSBPT08wME8KICB0cnkgOiBpMWkxaWkgPSBvb09vb28wMDBvT08gWyA1IF0KICBleGNlcHQgOiBpMWkxaWkgPSBOb25lCiAgdHJ5IDogaTFJID0gb29Pb29vMDAwb09PIFsgNiBdCiAgZXhjZXB0IDogaTFJID0gTm9uZQogIGlmIDMgLSAzOiBvMDBvb28wICsgb29PMDBvT29vIC4gaWkxSSAvIE9vMG9vTzBvbzBvTyAlIG9vTzAwb09vbwogIGlmIG9vT29vbzAwMG9PTyBbIDQgXSA9PSAwIDoKICAgaTFpSSAoIElpSUkgLCBpaUlpSSAsIElpMTEgLCBJaTFJMWkgLCAnJyAsICcnICwgJycgLCAnZmF2JyAsIGkxaTFpaSAsIGkxSSAsIElJMUkxaWlJSUkgKQogIGVsc2UgOgogICBpSTFJMTExSWkxMTFpICggaWlJaUkgLCBJaUlJICwgb29Pb29vMDAwb09PIFsgNCBdICwgSWkxMSAsIE9PTzAwTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2ZhdicgKQogICBpZiA5OCAtIDk4OiBPbzBvTzBvb28gKiBpSTExSTFJSTFJMUkgLiBvMDBvb28wICogaTFpSWkxMWlJSWkxSSAvIElpaTFpaTFJSTExaSArIE8wT09vCiAgIGlmIDI1IC0gMjU6IG8wT08wCmRlZiBJaWkxMTExMWlpSSAoIG5hbWUgLCB1cmwgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBtb2RlICwgcGxheWxpc3QgPSBOb25lICwgcmVnZXhzID0gTm9uZSApIDoKIG8wT09PT29PID0gWyBdCiB0cnkgOgogIGlmIDcwIC0gNzA6IG9vTzBPTzAwMG8gKyBvb08wMG9Pb28gKyBJaSAtIGlpMUkgLyBPbzBvTzBvb28KICBuYW1lID0gbmFtZSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApCiBleGNlcHQgOgogIHBhc3MKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG8wb28wbzBPMDBPTyApID09IEZhbHNlIDoKICBpMUlJMSAoICdNYWtpbmcgRmF2b3JpdGVzIEZpbGUnICkKICBvME9PT09vTyAuIGFwcGVuZCAoICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgLCBwbGF5bGlzdCAsIHJlZ2V4cyApICkKICBJSUkxaTFJaUkxaSA9IG9wZW4gKCBvMG9vMG8wTzAwT08gLCAidyIgKQogIElJSTFpMUlpSTFpIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBvME9PT09vTyApICkKICBJSUkxaTFJaUkxaSAuIGNsb3NlICggKQogZWxzZSA6CiAgaTFJSTEgKCAnQXBwZW5kaW5nIEZhdm9yaXRlcycgKQogIElJSTFpMUlpSTFpID0gb3BlbiAoIG8wb28wbzBPMDBPTyApIC4gcmVhZCAoICkKICBvTzBPbyA9IGpzb24gLiBsb2FkcyAoIElJSTFpMUlpSTFpICkKICBvTzBPbyAuIGFwcGVuZCAoICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgKSApCiAgT28wb08gPSBvcGVuICggbzBvbzBvME8wME9PICwgInciICkKICBPbzBvTyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggb08wT28gKSApCiAgT28wb08gLiBjbG9zZSAoICkKICBpZiA0MCAtIDQwOiBJaWkxaWkxSUkxMWkgKiBvb08wMG9Pb28KICBpZiAzOCAtIDM4OiBvMG8wME9vME8gLiBpMWlJaTExaUlJaTFJICsgb09vTzBvbzBPT09vIC0gbzBPTzAKZGVmIGkxaUlpaSAoIG5hbWUgKSA6CiBvTzBPbyA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBvMG9vMG8wTzAwT08gKSAuIHJlYWQgKCApICkKIGZvciBvb09Pb29vb29vIGluIHJhbmdlICggbGVuICggb08wT28gKSApIDoKICBpZiBvTzBPbyBbIG9vT09vb29vb28gXSBbIDAgXSA9PSBuYW1lIDoKICAgZGVsIG9PME9vIFsgb29PT29vb29vbyBdCiAgIE9vMG9PID0gb3BlbiAoIG8wb28wbzBPMDBPTyAsICJ3IiApCiAgIE9vMG9PIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBvTzBPbyApICkKICAgT28wb08gLiBjbG9zZSAoICkKICAgYnJlYWsKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5SZWZyZXNoIiApCiBpZiA2NSAtIDY1OiBvMDAgLiBvME9PMCAtIG8wMG9vbzAKIGlmIDkzIC0gOTM6IG8wbzAwT28wTwpkZWYgaWlpMSAoIHVybCApIDoKIGltcG9ydCB1cmxyZXNvbHZlcgogbzAwMDAwb28wMCA9IHVybHJlc29sdmVyIC4gSG9zdGVkTWVkaWFGaWxlICggdXJsICkKIGlmIG8wMDAwMG9vMDAgOgogIGlpMTExSSA9IHVybHJlc29sdmVyIC4gcmVzb2x2ZSAoIHVybCApCiAgaUlJSTFpSWkgPSBpaTExMUkKICBpZiBpc2luc3RhbmNlICggaUlJSTFpSWkgLCBsaXN0ICkgOgogICBmb3IgSWkxMWkxSTExaSBpbiBpSUlJMWlJaSA6CiAgICBvMDAwTzBvbyA9IE8wMCAuIGdldFNldHRpbmcgKCAncXVhbGl0eScgKQogICAgaWYgSWkxMWkxSTExaSBbICdxdWFsaXR5JyBdID09ICdIRCcgOgogICAgIGlpMTExSSA9IElpMTFpMUkxMWkgWyAndXJsJyBdCiAgICAgYnJlYWsKICAgIGVsaWYgSWkxMWkxSTExaSBbICdxdWFsaXR5JyBdID09ICdTRCcgOgogICAgIGlpMTExSSA9IElpMTFpMUkxMWkgWyAndXJsJyBdCiAgICBlbGlmIElpMTFpMUkxMWkgWyAncXVhbGl0eScgXSA9PSAnMTA4MHAnIGFuZCBPMDAgLiBnZXRTZXR0aW5nICggJzEwODBwcXVhbGl0eScgKSA9PSAndHJ1ZScgOgogICAgIGlpMTExSSA9IElpMTFpMUkxMWkgWyAndXJsJyBdCiAgICAgYnJlYWsKICBlbHNlIDoKICAgaWkxMTFJID0gaUlJSTFpSWkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihnb2xkZW50dixVcmxyZXNvbHZlciBkb25vdCBzdXBwb3J0IHRoaXMgZG9tYWluLiAtICw1MDAwKSIgKQogIGlpMTExSSA9IHVybAogcmV0dXJuIGlpMTExSQogaWYgNzggLSA3ODogaTExaWkxMWlJaTExaSAvIGkxaUlpMTFpSUlpMUkgLSBpSTExSTFJSTFJMUkgLSBJaSAqIG8wMAogaWYgODQgLSA4NDogT28wb29PMG9vMG9PICsgbzAwb29vMCArIElpaUkKZGVmIGkxaTFpSUlJMTFpICggbmFtZSAsIG11X3BsYXlsaXN0ICwgcXVldWVWaWRlbyA9IE5vbmUgKSA6CiBpMWkxaWkgPSB4Ym1jIC4gUGxheUxpc3QgKCB4Ym1jIC4gUExBWUxJU1RfVklERU8gKQogaWYgNDAgLSA0MDogaUkxMUkxSUkxSTFJIC8gb09vTzBvbzBPT09vIC0gbzBvMDBPbzBPICogaUkxMUkxSUkxSTFJCiBpZiBPMDAgLiBnZXRTZXR0aW5nICggJ2Fza19wbGF5bGlzdF9pdGVtcycgKSA9PSAndHJ1ZScgYW5kIG5vdCBxdWV1ZVZpZGVvIDoKICBpbXBvcnQgdXJscGFyc2UKICBvT29vMG9vT29vID0gWyBdCiAgZm9yIG9vT29vbzAwMG9PTyBpbiBtdV9wbGF5bGlzdCA6CiAgIG9Pb29PT28wMG9vTyA9IHVybHBhcnNlIC4gdXJscGFyc2UgKCBvb09vb28wMDBvT08gKSAuIG5ldGxvYwogICBpZiBvT29vT09vMDBvb08gPT0gJycgOgogICAgb09vbzBvb09vbyAuIGFwcGVuZCAoIG5hbWUgKQogICBlbHNlIDoKICAgIG9Pb28wb29Pb28gLiBhcHBlbmQgKCBvT29vT09vMDBvb08gKQogIG8wT08wb29vbyA9IHhibWNndWkgLiBEaWFsb2cgKCApCiAgb29PT29vb29vbyA9IG8wT08wb29vbyAuIHNlbGVjdCAoICdDaG9vc2UgYSB2aWRlbyBzb3VyY2UnICwgb09vbzBvb09vbyApCiAgaWYgb29PT29vb29vbyA+PSAwIDoKICAgaWYgIiZtb2RlPTE5IiBpbiBtdV9wbGF5bGlzdCBbIG9vT09vb29vb28gXSA6CiAgICBpZiA0MCAtIDQwOiBvb08wMG9Pb28gLSBvT29PMG9vME9PT28gKiBJMWkxaUkxaSAtIE9vMG9PMG9vbyAvIG9Pb08wb28wT09PbwogICAgeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggaWlpMSAoIG11X3BsYXlsaXN0IFsgb29PT29vb29vbyBdIC4gcmVwbGFjZSAoICcmbW9kZT0xOScgLCAnJyApIC4gcmVwbGFjZSAoICc7JyAsICcnICkgKSApCiAgIGVsaWYgIiRkb3JlZ2V4IiBpbiBtdV9wbGF5bGlzdCBbIG9vT09vb29vb28gXSA6CiAgICBpZiA3MSAtIDcxOiBvME9PMCAvIGlpICUgT28wb08wb29vIC8gb09vTzBvbzBPT09vICUgb29PMDBvT29vCiAgICBJMWkxaUkgPSBtdV9wbGF5bGlzdCBbIG9vT09vb29vb28gXSAuIHNwbGl0ICggJyZyZWdleHM9JyApCiAgICBpZiAzMCAtIDMwOiBJMWkxaUkxaSAlIG9Pb08wb28wT09PbyAvIElpaTFpaTFJSTExaSAqIG8wbzAwT28wTyAqIG8wMG9vbzAgLiBJMTFpMTFJaQogICAgSWlJSSAsIE9vMDAwb29PT08gPSBpSUkxMTFpICggSTFpMWlJIFsgMSBdICwgSTFpMWlJIFsgMCBdICkKICAgIGlJaTExSTExID0gSWlJSSAuIHJlcGxhY2UgKCAnOycgLCAnJyApCiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBpSWkxMUkxMSApCiAgICBpZiA0MCAtIDQwOiBpSTExSTFJSTFJMUkKICAgZWxzZSA6CiAgICBJaUlJID0gbXVfcGxheWxpc3QgWyBvb09Pb29vb29vIF0KICAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIElpSUkgKQogZWxpZiBub3QgcXVldWVWaWRlbyA6CiAgaWYgOTIgLSA5Mjogb09vTzBvbzBPT09vICUgbzBvMDBPbzBPCiAgaTFpMWlpIC4gY2xlYXIgKCApCiAgSTFJSTFJMTFJMUkgPSAwCiAgZm9yIG9vT29vbzAwMG9PTyBpbiBtdV9wbGF5bGlzdCA6CiAgIEkxSUkxSTExSTFJICs9IDEKICAgb28wMG9vb29PT28wMCA9IHhibWNndWkgLiBMaXN0SXRlbSAoICclcykgJXMnICUgKCBzdHIgKCBJMUlJMUkxMUkxSSApICwgbmFtZSApICkKICAgaWYgMTYgLSAxNjogSWkgLyBpaTFJICUgT28wb29PMG9vMG9PCiAgIHRyeSA6CiAgICBpZiAiJGRvcmVnZXgiIGluIG9vT29vbzAwMG9PTyA6CiAgICAgSTFpMWlJID0gb29Pb29vMDAwb09PIC4gc3BsaXQgKCAnJnJlZ2V4cz0nICkKICAgICBpZiA4NCAtIDg0OiBJMWkxaUkxaSAtIGkxaUlpMTFpSUlpMUkgKiBvMG8wME9vME8gLyBvMDBvb28wIC4gbzAwb29vMAogICAgIElpSUkgLCBPbzAwMG9vT09PID0gaUlJMTExaSAoIEkxaTFpSSBbIDEgXSAsIEkxaTFpSSBbIDAgXSApCiAgICBlbGlmICImbW9kZT0xOSIgaW4gb29Pb29vMDAwb09PIDoKICAgICBJaUlJID0gaWlpMSAoIG9vT29vbzAwMG9PTyAuIHJlcGxhY2UgKCAnJm1vZGU9MTknICwgJycgKSAuIHJlcGxhY2UgKCAnOycgLCAnJyApICkKICAgIGlmIElpSUkgOgogICAgIGkxaTFpaSAuIGFkZCAoIElpSUkgLCBvbzAwb29vb09PbzAwICkKICAgIGVsc2UgOgogICAgIHJhaXNlCiAgIGV4Y2VwdCBFeGNlcHRpb24gOgogICAgaTFpMWlpIC4gYWRkICggb29Pb29vMDAwb09PICwgb28wMG9vb29PT28wMCApCiAgICBwYXNzCiAgICBpZiA5MyAtIDkzOiBvMG8wME9vME8gLyBPME9PbyArIEkxMWkxMUlpCiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ3BsYXlsaXN0LnBsYXlvZmZzZXQodmlkZW8sMCknICkKIGVsc2UgOgogIGlmIDIwIC0gMjA6IE9vMG9PMG9vbyAvIG8wMCAlIGlpIC8gaUkxMUkxSUkxSTFJICsgSTExaTExSWkKICBpMTFJMUkxaWlJID0geGJtY2d1aSAuIExpc3RJdGVtICggbmFtZSApCiAgaTFpMWlpIC4gYWRkICggbXVfcGxheWxpc3QgLCBpMTFJMUkxaWlJICkKICBpZiA1NyAtIDU3OiBJaWlJIC8gb29PMDBvT29vCiAgaWYgMTMgLSAxMzogaWkgKyBpMTFpaTExaUlpMTFpCmRlZiBpaTFJSWlpICggbmFtZSAsIHVybCApIDoKIGlmIE8wMCAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSA9PSAiIiA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKCdnb2xkZW50dicsJ0Nob29zZSBhIGxvY2F0aW9uIHRvIHNhdmUgZmlsZXMuJywxNTAwMCwiICsgaTFpaUkxMUkgKyAiKSIgKQogIE8wMCAuIG9wZW5TZXR0aW5ncyAoICkKIElpMTFpaUlJaUkxID0geyAndXJsJyA6IHVybCAsICdkb3dubG9hZF9wYXRoJyA6IE8wMCAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSB9CiBkb3dubG9hZGVyIC4gZG93bmxvYWQgKCBuYW1lICwgSWkxMWlpSUlpSTEgKQogbzBPTzBvb29vID0geGJtY2d1aSAuIERpYWxvZyAoICkKIElJSUlJaWkxaWkxMSA9IG8wT08wb29vbyAuIHllc25vICggJ0Fkcnlhbkxpc3QnICwgJ0RvIHlvdSB3YW50IHRvIGFkZCB0aGlzIGZpbGUgYXMgYSBzb3VyY2U/JyApCiBpZiBJSUlJSWlpMWlpMTEgOgogIE9PMG9Pb09PMG9PTzAgKCBvcyAuIHBhdGggLiBqb2luICggTzAwIC4gZ2V0U2V0dGluZyAoICdzYXZlX2xvY2F0aW9uJyApICwgbmFtZSApICkKICBpZiAzMSAtIDMxOiBpSTExSTFJSTFJMUkgKiBPME9PbyAtIGlpICogTzBPT28KICBpZiA2MCAtIDYwOiBPbzBvb08wb28wb08gJSBPbzBvb08wb28wb08gKiBvME9PMCAvIEkxMWkxMUlpICogb09vTzBvbzBPT09vICogSTExaTExSWkKZGVmIE9Pb08wbyAoIHVybCAsIG5hbWUgKSA6CiBpZiA2MiAtIDYyOiBJMWkxaUkxaSAvIG8wT08wICUgaTFpSWkxMWlJSWkxSSAuIGlpIC8gSWkgLyBvb08wMG9Pb28KIE9vb08wTzBPb28gPSBbICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZ2VuZXNpcy8/YWN0aW9uPXNob3dzX3NlYXJjaCcgLCAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLmdlbmVzaXMvP2FjdGlvbj1tb3ZpZXNfc2VhcmNoJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uc2FsdHMvP21vZGU9c2VhcmNoJmFtcDtzZWN0aW9uPU1vdmllcycgLCAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnNhbHRzLz9tb2RlPXNlYXJjaCZhbXA7c2VjdGlvbj1UVicgLCAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLm11Y2htb3ZpZXMuaGQvP2FjdGlvbj1tb3ZpZXNfc2VhcmNoJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8udmlvb3ouY28vP2FjdGlvbj1yb290X3NlYXJjaCcgLCAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLm9yb3JvdHYvP2FjdGlvbj1zaG93c19zZWFyY2gnICwgJ3BsdWdpbjovL3BsdWdpbi52aWRlby55aWZ5bW92aWVzLmhkLz9hY3Rpb249bW92aWVzX3NlYXJjaCcgLCAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLmNhcnRvb25oZHR3by8/ZGVzY3JpcHRpb24mYW1wO2ZhbmFydCZhbXA7aWNvbmltYWdlJmFtcDttb2RlPTMmYW1wO25hbWU9U2VhcmNoJmFtcDt1cmw9dXJsJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9rb2Rpb24vc2VhcmNoL2xpc3QvJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZGFpbHltb3Rpb25fY29tLz9tb2RlPXNlYXJjaCZhbXA7dXJsJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8udmltZW8va29kaW9uL3NlYXJjaC9saXN0LycgXQogaWYgODUgLSA4NTogSWlpSSAvIG9vTzAwb09vbwogaWYgNjcgLSA2NzogSTFpMWlJMWkgJSBvME9PMAogaWYgMzkgLSAzOTogSWkgKyBPbzBvTzBvb28KIGlmIDcgLSA3OiBpSTExSTFJSTFJMUkgLSBpaTFJCiBpZiAxMCAtIDEwOiBvb08wMG9Pb28gJSBvMG8wME9vME8gLyBJMTFpMTFJaSAlIEkxaTFpSTFpCiBpZiAyNSAtIDI1OiBvb08wT08wMDBvIC8gaTExaWkxMWlJaTExaQogaWYgNjQgLSA2NDogbzBvMDBPbzBPICUgTzBPT28KIGlmIDQwIC0gNDA6IElpaUkgKyBJMWkxaUkxaQogaWYgNzcgLSA3NzogSWkgJSBPbzBvTzBvb28gKyBvb08wMG9Pb28gJSBpaSAtIEkxaTFpSTFpCiBpZiAyNiAtIDI2OiBpMWlJaTExaUlJaTFJICsgbzBvMDBPbzBPIC0gaUkxMUkxSUkxSTFJCiBpZiA0NyAtIDQ3OiBpaQogaWYgMiAtIDI6IG9Pb08wb28wT09PbyAlIG9vTzAwb09vbyAqIGkxaUlpMTFpSUlpMUkgKiBvT29PMG9vME9PT28KIG9Pb28wb29Pb28gPSBbICdHZW5zaXMgVFYnICwgJ0dlbmVzaXMgTW92aWUnICwgJ1NhbHQgbW92aWUnICwgJ3NhbHQgVFYnICwgJ011Y2htb3ZpZXMnICwgJ3Zpb296JyAsICdPUm9yb1RWJyAsICdZaWZ5bW92aWVzJyAsICdjYXJ0b29uSEQnICwgJ1lvdXR1YmUnICwgJ0RhaWx5TW90aW9uJyAsICdWaW1lbycgXQogaWYgNjUgLSA2NTogSWkgKyBpMWlJaTExaUlJaTFJICogaWkgLSBpMTFpaTExaUlpMTFpCiBvME9PMG9vb28gPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQogb29PT29vb29vbyA9IG8wT08wb29vbyAuIHNlbGVjdCAoICdDaG9vc2UgYSB2aWRlbyBzb3VyY2UnICwgb09vbzBvb09vbyApCiBpZiAyNiAtIDI2OiBJaWlJICUgT28wb29PMG9vMG9PICsgT28wb29PMG9vMG9PICUgSTFpMWlJMWkgKiBJaSAvIG8wMAogaWYgb29PT29vb29vbyA+PSAwIDoKICB1cmwgPSBPb29PME8wT29vIFsgb29PT29vb29vbyBdCiAgaWYgNjQgLSA2NDogbzBPTzAgJSBvT29PMG9vME9PT28gLyBvb08wT08wMDBvICUgTzBPT28gLSBvMDAKICBJMUlJMUlpSTEgKCB1cmwgKQogIGlmIDI2IC0gMjY6IE9vMG9vTzBvbzBvTyAqIGkxaUlpMTFpSUlpMUkKICBpZiAzMSAtIDMxOiBJMWkxaUkxaSAqIG8wT08wIC4gbzAwb29vMApkZWYgaUkxSTExMUlpMTExaSAoIG5hbWUgLCB1cmwgLCBtb2RlICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgZGVzY3JpcHRpb24gLCBnZW5yZSAsIGRhdGUgLCBjcmVkaXRzICwgc2hvd2NvbnRleHQgPSBGYWxzZSAsIHJlZ2V4cyA9IE5vbmUgLCByZWdfdXJsID0gTm9uZSAsIGFsbGluZm8gPSB7IH0gKSA6CiBpZiAzNSAtIDM1OiBJMWkxaUkxaQogbzAwb28gPSBzeXMgLiBhcmd2IFsgMCBdICsgIj91cmw9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSArICImbW9kZT0iICsgc3RyICggbW9kZSApICsgIiZuYW1lPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICsgIiZmYW5hcnQ9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKQogTzBvTzBvbzBPID0gVHJ1ZQogaWYgZGF0ZSA9PSAnJyA6CiAgZGF0ZSA9IE5vbmUKIGVsc2UgOgogIGRlc2NyaXB0aW9uICs9ICdcblxuRGF0ZTogJXMnICUgZGF0ZQogb29vT09PMG9vT29PT08gPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gIkRlZmF1bHRGb2xkZXIucG5nIiAsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlICkKIGlmIGxlbiAoIGFsbGluZm8gKSA8IDEgOgogIG9vb09PTzBvb09vT09PIC4gc2V0SW5mbyAoIHR5cGUgPSAiVmlkZW8iICwgaW5mb0xhYmVscyA9IHsgIlRpdGxlIiA6IG5hbWUgLCAiUGxvdCIgOiBkZXNjcmlwdGlvbiAsICJHZW5yZSIgOiBnZW5yZSAsICJkYXRlYWRkZWQiIDogZGF0ZSAsICJjcmVkaXRzIiA6IGNyZWRpdHMgfSApCiBlbHNlIDoKICBvb29PT08wb29Pb09PTyAuIHNldEluZm8gKCB0eXBlID0gIlZpZGVvIiAsIGluZm9MYWJlbHMgPSBhbGxpbmZvICkKIG9vb09PTzBvb09vT09PIC4gc2V0UHJvcGVydHkgKCAiRmFuYXJ0X0ltYWdlIiAsIGZhbmFydCApCiBpZiBzaG93Y29udGV4dCA6CiAgbzBJaUlpSTExMUlJSUkxID0gWyBdCiAgbzBPb09vMDBvMG8gPSBPMDAgLiBnZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZCcgKQogIG8wT29PbzAwbzBvID0gbzBPb09vMDBvMG8gPT0gInRydWUiCiAgT09Pb09vb08wMDBvTyA9IE8wMCAuIGdldFNldHRpbmcgKCAncGFyZW50YWxibG9ja2VkcGluJyApCiAgaWYgODcgLSA4NzogbzAwICUgaTFpSWkxMWlJSWkxSQogIGlmIGxlbiAoIE9PT29Pb29PMDAwb08gKSA+IDAgOgogICBpZiBvME9vT28wMG8wbyA6CiAgICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICdEaXNhYmxlIFBhcmVudGFsIEJsb2NrJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTU1Jm5hbWU9JXMpJyAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICAgZWxzZSA6CiAgICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICdFbmFibGUgUGFyZW50YWwgQmxvY2snICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NTYmbmFtZT0lcyknICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogICAgaWYgNjIgLSA2MjogaTExaWkxMWlJaTExaSArIE8wT09vIC8gbzAwICogSWkKICBpZiBzaG93Y29udGV4dCA9PSAnc291cmNlJyA6CiAgIGlmIDM3IC0gMzc6IG8wMAogICBpZiBuYW1lIGluIHN0ciAoIG8wME9vb09vb28gKSA6CiAgICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICdSZW1vdmUgZnJvbSBTb3VyY2VzJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTgmbmFtZT0lcyknICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogICAgaWYgMzMgLSAzMzogaTExaWkxMWlJaTExaSAtIG8wbzAwT28wTyAtIGkxMWlpMTFpSWkxMWkKICAgIGlmIDk0IC0gOTQ6IE9vMG9PMG9vbyAqIEkxaTFpSTFpICogaWkgLyBJaWlJIC4gT28wb08wb29vIC0gSWlpSQogIGVsaWYgc2hvd2NvbnRleHQgPT0gJ2Rvd25sb2FkJyA6CiAgIG8wSWlJaUkxMTFJSUlJMSAuIGFwcGVuZCAoICggJ0Rvd25sb2FkJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT05Jm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgZWxpZiBzaG93Y29udGV4dCA9PSAnZmF2JyA6CiAgIG8wSWlJaUkxMTFJSUlJMSAuIGFwcGVuZCAoICggJ1JlbW92ZSBmcm9tIEFkcnlhbkxpc3QgRmF2b3JpdGVzJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTYmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICBpZiBzaG93Y29udGV4dCA9PSAnISF1cGRhdGUnIDoKICAgSTFJMWkgPSAoCiAnJXM/dXJsPSVzJm1vZGU9MTcmcmVnZXhzPSVzJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggcmVnX3VybCApICwgcmVnZXhzICkKICkKICAgbzBJaUlpSTExMUlJSUkxIC4gYXBwZW5kICggKCAnW0NPTE9SIHllbGxvd10hIXVwZGF0ZVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcyknICUgSTFJMWkgKSApCiAgaWYgbm90IG5hbWUgaW4gTzAwME9PMCA6CiAgIG8wSWlJaUkxMTFJSUlJMSAuIGFwcGVuZCAoICggJ0FkZCB0byBnb2xkZW50diBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NSZuYW1lPSVzJnVybD0lcyZpY29uaW1hZ2U9JXMmZmFuYXJ0PSVzJmZhdl9tb2RlPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKSAsIG1vZGUgKSApICkKICBvb29PT08wb29Pb09PTyAuIGFkZENvbnRleHRNZW51SXRlbXMgKCBvMElpSWlJMTExSUlJSTEgKQogTzBvTzBvbzBPID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBvMDBvbyAsIGxpc3RpdGVtID0gb29vT09PMG9vT29PT08gLCBpc0ZvbGRlciA9IFRydWUgKQogcmV0dXJuIE8wb08wb28wTwogaWYgNDUgLSA0NTogT28wb29PMG9vMG9PCiBpZiAyNSAtIDI1OiBPbzBvb08wb28wb08gJSBvMG8wME9vME8KZGVmIEkxMW9PMG9vICggdXJsICwgdGl0bGUgLCBtZWRpYV90eXBlID0gJ3ZpZGVvJyApIDoKIGlmIDU0IC0gNTQ6IE9vMG9vTzBvbzBvTyAuIG9vTzAwb09vbyAqIG8wT08wICUgaTFpSWkxMWlJSWkxSSAtIEkxaTFpSTFpCiBpZiA3NCAtIDc0OiBJaWkxaWkxSUkxMWkgLSBvMDAgKiBpaTFJCiBpbXBvcnQgeW91dHViZWRsCiBpZiBub3QgdXJsID09ICcnIDoKICBpZiBtZWRpYV90eXBlID09ICdhdWRpbycgOgogICB5b3V0dWJlZGwgLiBzaW5nbGVfWUQgKCB1cmwgLCBkb3dubG9hZCA9IFRydWUgLCBhdWRpbyA9IFRydWUgKQogIGVsc2UgOgogICB5b3V0dWJlZGwgLiBzaW5nbGVfWUQgKCB1cmwgLCBkb3dubG9hZCA9IFRydWUgKQogZWxpZiB4Ym1jIC4gUGxheWVyICggKSAuIGlzUGxheWluZyAoICkgPT0gVHJ1ZSA6CiAgaW1wb3J0IFlEU3RyZWFtRXh0cmFjdG9yCiAgaWYgWURTdHJlYW1FeHRyYWN0b3IgLiBpc0Rvd25sb2FkaW5nICggKSA9PSBUcnVlIDoKICAgaWYgMTIgLSAxMjogbzBvMDBPbzBPCiAgIFlEU3RyZWFtRXh0cmFjdG9yIC4gbWFuYWdlRG93bmxvYWRzICggKQogIGVsc2UgOgogICBPb08wME9vb08wID0geGJtYyAuIFBsYXllciAoICkgLiBnZXRQbGF5aW5nRmlsZSAoICkKICAgaWYgOTggLSA5ODogT28wb29PMG9vMG9PICsgbzAwb29vMAogICBPb08wME9vb08wID0gT29PMDBPb29PMCAuIHNwbGl0ICggJ3xVc2VyLUFnZW50PScgKSBbIDAgXQogICBvbzAwb29vb09PbzAwID0geyAndXJsJyA6IE9vTzAwT29vTzAgLCAndGl0bGUnIDogdGl0bGUgLCAnbWVkaWFfdHlwZScgOiBtZWRpYV90eXBlIH0KICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggJycgLCBkb3dubG9hZCA9IFRydWUgLCBkbF9pbmZvID0gb28wMG9vb29PT28wMCApCiBlbHNlIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oRE9XTkxPQUQsRmlyc3QgUGxheSBbQ09MT1IgeWVsbG93XVdISUxFIHBsYXlpbmcgZG93bmxvYWRbL0NPTE9SXSAsMTAwMDApIiApCiAgaWYgNTIgLSA1MjogaTFpSWkxMWlJSWkxSSAvIG9Pb08wb28wT09PbyAtIG9vTzAwb09vbyAuIG8wMAogIGlmIDUwIC0gNTA6IGlJMTFJMUlJMUkxSSAtIG8wMCAtIEkxaTFpSTFpCmRlZiBvbzAwTzBPME8wbzBvICggc3RyaW5nICkgOgogaWYgaXNpbnN0YW5jZSAoIHN0cmluZyAsIGJhc2VzdHJpbmcgKSA6CiAgaWYgaXNpbnN0YW5jZSAoIHN0cmluZyAsIHVuaWNvZGUgKSA6CiAgIHN0cmluZyA9IHN0cmluZyAuIGVuY29kZSAoICdhc2NpaScgLCAnaWdub3JlJyApCiByZXR1cm4gc3RyaW5nCiBpZiA3NCAtIDc0OiBvMG8wME9vME8gJSBpaSAqIGkxaUlpMTFpSUlpMUkgKyBPbzBvb08wb28wb08gKiBvMDAKIGlmIDEwMCAtIDEwMDogT28wb29PMG9vMG9PICsgbzAwb29vMCAqIElpaUkgKyBvb08wT08wMDBvCmRlZiBvT28wTzAwME9vbzAgKCBzdHJpbmcgLCBlbmNvZGluZyA9ICd1dGYtOCcgKSA6CiBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgYmFzZXN0cmluZyApIDoKICBpZiBub3QgaXNpbnN0YW5jZSAoIHN0cmluZyAsIHVuaWNvZGUgKSA6CiAgIHN0cmluZyA9IHVuaWNvZGUgKCBzdHJpbmcgLCBlbmNvZGluZyAsICdpZ25vcmUnICkKIHJldHVybiBzdHJpbmcKIGlmIDMwIC0gMzA6IGlpMUkKIGlmIDc1IC0gNzU6IEkxaTFpSTFpIC4gT28wb29PMG9vMG9PIC0gaUkxMUkxSUkxSTFJICogaTExaWkxMWlJaTExaSAqIG8wMApkZWYgb29vME9PME9Pb29PMCAoIHMgKSA6IHJldHVybiAiIiAuIGpvaW4gKCBmaWx0ZXIgKCBsYW1iZGEgTzAwTzAwIDogb3JkICggTzAwTzAwICkgPCAxMjggLCBzICkgKQppZiA2NiAtIDY2OiBpMWlJaTExaUlJaTFJIC0gaUkxMUkxSUkxSTFJCmlmIDkgLSA5OiBJaWlJICUgSWlpMWlpMUlJMTFpIC4gSWlpMWlpMUlJMTFpCmRlZiBJaUlJSUlpaTExaSAoIGNvbW1hbmQgKSA6CiBvTzBPbyA9ICcnCiB0cnkgOgogIG9PME9vID0geGJtYyAuIGV4ZWN1dGVKU09OUlBDICggb09vME8wMDBPb28wICggY29tbWFuZCApICkKIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3IgOgogIG9PME9vID0geGJtYyAuIGV4ZWN1dGVKU09OUlBDICggb28wME8wTzBPMG8wbyAoIGNvbW1hbmQgKSApCiAgaWYgODIgLSA4MjogSWlpMWlpMUlJMTFpCiByZXR1cm4gb09vME8wMDBPb28wICggb08wT28gKQogaWYgNTQgLSA1NDogSWlpSSArIEkxaTFpSTFpIC0gaUkxMUkxSUkxSTFJICUgTzBPT28gJSBPbzBvTzBvb28KIGlmIDE5IC0gMTk6IElpaTFpaTFJSTExaSAvIGlJMTFJMUlJMUkxSSAlIGlpMUkgLiBpaQpkZWYgSTFJSTFJaUkxICggdXJsICwgZ2l2ZV9tZV9yZXN1bHQgPSBOb25lICwgcGxheWxpc3QgPSBGYWxzZSApIDoKIGlmICdhdWRpbycgaW4gdXJsIDoKICBPMCA9IG9PbzBPMDAwT29vMCAoICd7Impzb25ycGMiOiIyLjAiLCJtZXRob2QiOiJGaWxlcy5HZXREaXJlY3RvcnkiLCJwYXJhbXMiOiB7ImRpcmVjdG9yeSI6IiVzIiwibWVkaWEiOiJ2aWRlbyIsICJwcm9wZXJ0aWVzIjogWyJ0aXRsZSIsICJhbGJ1bSIsICJhcnRpc3QiLCAiZHVyYXRpb24iLCJ0aHVtYm5haWwiLCAieWVhciJdfSwgImlkIjogMX0nICkgJSB1cmwKIGVsc2UgOgogIE8wID0gb09vME8wMDBPb28wICggJ3sianNvbnJwYyI6IjIuMCIsIm1ldGhvZCI6IkZpbGVzLkdldERpcmVjdG9yeSIsInBhcmFtcyI6eyJkaXJlY3RvcnkiOiIlcyIsIm1lZGlhIjoidmlkZW8iLCJwcm9wZXJ0aWVzIjpbICJwbG90IiwicGxheWNvdW50IiwiZGlyZWN0b3IiLCAiZ2VucmUiLCJ2b3RlcyIsImR1cmF0aW9uIiwidHJhaWxlciIsInByZW1pZXJlZCIsInRodW1ibmFpbCIsInRpdGxlIiwieWVhciIsImRhdGVhZGRlZCIsImZhbmFydCIsInJhdGluZyIsInNlYXNvbiIsImVwaXNvZGUiLCJzdHVkaW8iLCJtcGFhIl19LCJpZCI6MX0nICkgJSB1cmwKIG9PMG9vME8wID0ganNvbiAuIGxvYWRzICggSWlJSUlJaWkxMWkgKCBPMCApICkKIGlmIDY2IC0gNjY6IE9vMG9vTzBvbzBvTyAtIE8wT09vIC0gaTFpSWkxMWlJSWkxSQogaWYgZ2l2ZV9tZV9yZXN1bHQgOgogIHJldHVybiBvTzBvbzBPMAogaWYgb08wb28wTzAgLiBoYXNfa2V5ICggJ2Vycm9yJyApIDoKICByZXR1cm4KIGVsc2UgOgogIGlmIDU0IC0gNTQ6IG8wMCAuIGlpMUkKICBmb3Igb29Pb29vMDAwb09PIGluIG9PMG9vME8wIFsgJ3Jlc3VsdCcgXSBbICdmaWxlcycgXSA6CiAgIGkxSWlJaUlpaUkxID0geyB9CiAgIHVybCA9IG9vT29vbzAwMG9PTyBbICdmaWxlJyBdCiAgIGlpSWlJID0gb29vME9PME9Pb29PMCAoIG9vT29vbzAwMG9PTyBbICdsYWJlbCcgXSApCiAgIE8wT08wTyA9IG9vbzBPTzBPT29vTzAgKCBvb09vb28wMDBvT08gWyAndGh1bWJuYWlsJyBdICkKICAgT09PMDBPID0gb29vME9PME9Pb29PMCAoIG9vT29vbzAwMG9PTyBbICdmYW5hcnQnIF0gKQogICBpMUlpSWlJaWlJMSA9IGRpY3QgKCAoIGsgLCB2ICkgZm9yIGsgLCB2IGluIG9vT29vbzAwMG9PTyAuIGl0ZXJpdGVtcyAoICkgaWYgbm90IHYgPT0gJzAnIG9yIG5vdCB2ID09IC0gMSBvciB2ID09ICcnICkKICAgaTFJaUlpSWlpSTEgLiBwb3AgKCAiZmlsZSIgLCBOb25lICkKICAgaWYgb29Pb29vMDAwb09PIFsgJ2ZpbGV0eXBlJyBdID09ICdmaWxlJyA6CiAgICBpZiBwbGF5bGlzdCA6CiAgICAgaTFpMWlJSUkxMWkgKCBpaUlpSSAsIHVybCAsIHF1ZXVlVmlkZW8gPSAnMScgKQogICAgIGNvbnRpbnVlCiAgICBlbHNlIDoKICAgICBpMWlJICggdXJsICwgaWlJaUkgLCBPME9PME8gLCBPT08wME8gLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIHRvdGFsID0gbGVuICggb08wb28wTzAgWyAncmVzdWx0JyBdIFsgJ2ZpbGVzJyBdICkgLCBhbGxpbmZvID0gaTFJaUlpSWlpSTEgKQogICAgIGlmIDQxIC0gNDE6IG9vTzBPTzAwMG8KICAgICBpZiBvb09vb28wMDBvT08gWyAndHlwZScgXSBhbmQgb29Pb29vMDAwb09PIFsgJ3R5cGUnIF0gPT0gJ3R2c2hvdycgOgogICAgICB4Ym1jcGx1Z2luIC4gc2V0Q29udGVudCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsICd0dnNob3dzJyApCiAgICAgZWxpZiBvb09vb28wMDBvT08gWyAnZXBpc29kZScgXSA+IDAgOgogICAgICB4Ym1jcGx1Z2luIC4gc2V0Q29udGVudCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsICdlcGlzb2RlcycgKQogICAgICBpZiA0MyAtIDQzOiBvMG8wME9vME8gLSBPME9PbyAlIGlpICUgT28wb29PMG9vMG9PICsgbzAwCiAgIGVsc2UgOgogICAgaUkxSTExMUlpMTExaSAoIGlpSWlJICwgdXJsICwgNTMgLCBPME9PME8gLCBPT08wME8gLCAnJyAsICcnICwgJycgLCAnJyAsIGFsbGluZm8gPSBpMUlpSWlJaWlJMSApCiAgeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKICBpZiA2MSAtIDYxOiBPME9PbyAuIElpICsgbzBPTzAKICBpZiA4IC0gODogaUkxMUkxSUkxSTFJCmRlZiBpMWlJICggdXJsICwgbmFtZSAsIGljb25pbWFnZSAsIGZhbmFydCAsIGRlc2NyaXB0aW9uICwgZ2VucmUgLCBkYXRlICwgc2hvd2NvbnRleHQgLCBwbGF5bGlzdCAsIHJlZ2V4cyAsIHRvdGFsICwgc2V0Q29va2llID0gIiIgLCBhbGxpbmZvID0geyB9ICkgOgogaWYgNTUgLSA1NTogbzBPTzAKIG8wSWlJaUkxMTFJSUlJMSA9IFsgXQogbzBPb09vMDBvMG8gPSBPMDAgLiBnZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZCcgKQogbzBPb09vMDBvMG8gPSBvME9vT28wMG8wbyA9PSAidHJ1ZSIKIE9PT29Pb29PMDAwb08gPSBPMDAgLiBnZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZHBpbicgKQogaWYgMzcgLSAzNzogT28wb08wb29vIC8gSWkgLyBpMWlJaTExaUlJaTFJCiBpZiBsZW4gKCBPT09vT29vTzAwMG9PICkgPiAwIDoKICBpZiBvME9vT28wMG8wbyA6CiAgIG8wSWlJaUkxMTFJSUlJMSAuIGFwcGVuZCAoICggJ0Rpc2FibGUgUGFyZW50YWwgQmxvY2snICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NTUmbmFtZT0lcyknICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogIGVsc2UgOgogICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICdFbmFibGUgUGFyZW50YWwgQmxvY2snICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NTYmbmFtZT0lcyknICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogICBpZiA5NyAtIDk3OiBvb08wMG9Pb28gLiBJMWkxaUkxaSAvIEkxMWkxMUlpCiB0cnkgOgogIG5hbWUgPSBuYW1lIC4gZW5jb2RlICggJ3V0Zi04JyApCiBleGNlcHQgOiBwYXNzCiBPMG9PMG9vME8gPSBUcnVlCiBvMDBPTzBvMCA9IEZhbHNlCiBpZiByZWdleHMgOgogIGkxSUkxSWlpSWkgPSAnMTcnCiAgaWYgJ2xpc3RyZXBlYXQnIGluIHJlZ2V4cyA6CiAgIG8wME9PMG8wID0gVHJ1ZQogICBpZiAxMyAtIDEzOiBvMG8wME9vME8gJSBPME9PbyAlIEkxaTFpSTFpCiAgbzBJaUlpSTExMUlJSUkxIC4gYXBwZW5kICggKCAnW0NPTE9SIHdoaXRlXSEhRG93bmxvYWQgQ3VycmVudGx5IFBsYXlpbmchIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yMSZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogZWxpZiAoIGFueSAoIHggaW4gdXJsIGZvciB4IGluIGlpSTFJaUkgKSBhbmQgdXJsIC4gc3RhcnRzd2l0aCAoICdodHRwJyApICkgb3IgdXJsIC4gZW5kc3dpdGggKCAnJm1vZGU9MTknICkgOgogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJm1vZGU9MTknICwgJycgKQogIGkxSUkxSWlpSWkgPSAnMTknCiAgbzBJaUlpSTExMUlJSUkxIC4gYXBwZW5kICggKCAnW0NPTE9SIHdoaXRlXSEhRG93bmxvYWQgQ3VycmVudGx5IFBsYXlpbmchIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yMSZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogZWxpZiB1cmwgLiBlbmRzd2l0aCAoICcmbW9kZT0xOCcgKSA6CiAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICcmbW9kZT0xOCcgLCAnJyApCiAgaTFJSTFJaWlJaSA9ICcxOCcKICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIzJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgaWYgTzAwIC4gZ2V0U2V0dGluZyAoICdkbGF1ZGlvb25seScgKSA9PSAndHJ1ZScgOgogICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICchIURvd25sb2FkIFtDT0xPUiBzZWFibHVlXUF1ZGlvISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjQmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKIGVsaWYgdXJsIC4gc3RhcnRzd2l0aCAoICdtYWduZXQ6P3h0PScgKSA6CiAgaWYgJyYnIGluIHVybCBhbmQgbm90ICcmYW1wOycgaW4gdXJsIDoKICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICcmJyAsICcmYW1wOycgKQogIHVybCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucHVsc2FyL3BsYXk/dXJpPScgKyB1cmwKICBpMUlJMUlpaUlpID0gJzEyJwogZWxzZSA6CiAgaTFJSTFJaWlJaSA9ICcxMicKICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCBDdXJyZW50bHkgUGxheWluZyEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIxJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiBpZiAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/dmlkZW9faWQ9JyBpbiB1cmwgOgogIElpMTFJaUkxMTEgPSB1cmwgLiByZXBsYWNlICggJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPScgLCAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0nICkKICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICchIURvd25sb2FkIFtDT0xPUiBibHVlXUF1ZGlvISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjQmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBJaTExSWlJMTExICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiBvMDBvbyA9IHN5cyAuIGFyZ3YgWyAwIF0gKyAiPyIKIElJaWlpMTFpaTFJSTEgPSBGYWxzZQogaWYgcGxheWxpc3QgOgogIGlmIE8wMCAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgOgogICBvMDBvbyArPSAidXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIGkxSUkxSWlpSWkKICBlbHNlIDoKICAgbzAwb28gKz0gIm1vZGU9MTMmbmFtZT0lcyZwbGF5bGlzdD0lcyIgJSAoIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggc3RyICggcGxheWxpc3QgKSAuIHJlcGxhY2UgKCAnLCcgLCAnfHwnICkgKSApCiAgIG5hbWUgPSBuYW1lICsgJ1tDT0xPUiBtYWdlbnRhXSAoJyArIHN0ciAoIGxlbiAoIHBsYXlsaXN0ICkgKSArICcgaXRlbXMgKVsvQ09MT1JdJwogICBJSWlpaTExaWkxSUkxID0gVHJ1ZQogZWxzZSA6CiAgbzAwb28gKz0gInVybD0iICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICsgIiZtb2RlPSIgKyBpMUlJMUlpaUlpCiBpZiByZWdleHMgOgogIG8wMG9vICs9ICImcmVnZXhzPSIgKyByZWdleHMKIGlmIG5vdCBzZXRDb29raWUgPT0gJycgOgogIG8wMG9vICs9ICImc2V0Q29va2llPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggc2V0Q29va2llICkKICBpZiA5NyAtIDk3OiBJMWkxaUkxaSAtIElpaUkgKyBPME9PbwogaWYgZGF0ZSA9PSAnJyA6CiAgZGF0ZSA9IE5vbmUKIGVsc2UgOgogIGRlc2NyaXB0aW9uICs9ICdcblxuRGF0ZTogJXMnICUgZGF0ZQogb29vT09PMG9vT29PT08gPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gIkRlZmF1bHRWaWRlby5wbmciICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKQogaWYgbGVuICggYWxsaW5mbyApIDwgMSA6CiAgb29vT09PMG9vT29PT08gLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbmFtZSAsICJQbG90IiA6IGRlc2NyaXB0aW9uICwgIkdlbnJlIiA6IGdlbnJlICwgImRhdGVhZGRlZCIgOiBkYXRlIH0gKQogIGlmIDg5IC0gODk6IG8wT08wICsgSTFpMWlJMWkgKiBJMWkxaUkxaSAlIGlpMUkgJSBJMWkxaUkxaQogZWxzZSA6CiAgb29vT09PMG9vT29PT08gLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0gYWxsaW5mbyApCiBvb29PT08wb29Pb09PTyAuIHNldFByb3BlcnR5ICggIkZhbmFydF9JbWFnZSIgLCBmYW5hcnQgKQogaWYgOTYgLSA5NjogSWlpSSAqIG8wT08wIC0gT28wb29PMG9vMG9PICogSWlpSSAqIGlpMUkKIGlmICggbm90IElJaWlpMTFpaTFJSTEgKSBhbmQgbm90IGFueSAoIHggaW4gdXJsIGZvciB4IGluIElJICkgYW5kIG5vdCAnJFBMQVlFUlBST1hZJD0nIGluIHVybCA6CiAgaWYgcmVnZXhzIDoKICAgaWYgOCAtIDg6IE8wT09vIC0gaTFpSWkxMWlJSWkxSSArIGlJMTFJMUlJMUkxSSArIGlpMUkgKiBvMDBvb28wIC0gaUkxMUkxSUkxSTFJCiAgIGlmICckcHlGdW5jdGlvbjpwbGF5bWVkaWEoJyBub3QgaW4gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggcmVnZXhzICkgYW5kICdub3RwbGF5YWJsZScgbm90IGluIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIHJlZ2V4cyApIGFuZCAnbGlzdHJlcGVhdCcgbm90IGluIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIHJlZ2V4cyApIDoKICAgIGlmIDMwIC0gMzA6IEkxaTFpSTFpIC8gSWlpMWlpMUlJMTFpCiAgICBvb29PT08wb29Pb09PTyAuIHNldFByb3BlcnR5ICggJ0lzUGxheWFibGUnICwgJ3RydWUnICkKICBlbHNlIDoKICAgb29vT09PMG9vT29PT08gLiBzZXRQcm9wZXJ0eSAoICdJc1BsYXlhYmxlJyAsICd0cnVlJyApCiBlbHNlIDoKICBpMUlJMSAoICdOT1Qgc2V0dGluZyBpc3BsYXlhYmxlJyArIHVybCApCiBpZiBzaG93Y29udGV4dCA6CiAgaWYgMjIgLSAyMjogbzBPTzAgKiBvMDAKICBpZiBzaG93Y29udGV4dCA9PSAnZmF2JyA6CiAgIG8wSWlJaUkxMTFJSUlJMSAuIGFwcGVuZCAoCiAoICdSZW1vdmUgZnJvbSBBZHJ5YW5MaXN0IEZhdm9yaXRlcycgLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT02Jm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKQogKQogIGVsaWYgbm90IG5hbWUgaW4gTzAwME9PMCA6CiAgIHRyeSA6CiAgICBpSUlJaUlpMWkgPSAoCiAnJXM/bW9kZT01Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZmYW5hcnQ9JXMmZmF2X21vZGU9MCcKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKSApCiApCiAgIGV4Y2VwdCA6CiAgICBpSUlJaUlpMWkgPSAoCiAnJXM/bW9kZT01Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZmYW5hcnQ9JXMmZmF2X21vZGU9MCcKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgLiBlbmNvZGUgKCAidXRmLTgiICkgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgLiBlbmNvZGUgKCAidXRmLTgiICkgKSApCiApCiAgIGlmIHBsYXlsaXN0IDoKICAgIGlJSUlpSWkxaSArPSAncGxheWxpc3Q9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzdHIgKCBwbGF5bGlzdCApIC4gcmVwbGFjZSAoICcsJyAsICd8fCcgKSApCiAgIGlmIHJlZ2V4cyA6CiAgICBpSUlJaUlpMWkgKz0gIiZyZWdleHM9IiArIHJlZ2V4cwogICBvMElpSWlJMTExSUlJSTEgLiBhcHBlbmQgKCAoICdBZGQgdG8gZ29sZGVudHYgRmF2b3JpdGVzJyAsICdYQk1DLlJ1blBsdWdpbiglcyknICUgaUlJSWlJaTFpICkgKQogIG9vb09PTzBvb09vT09PIC4gYWRkQ29udGV4dE1lbnVJdGVtcyAoIG8wSWlJaUkxMTFJSUlJMSApCiBpZiBub3QgcGxheWxpc3QgaXMgTm9uZSA6CiAgaWYgTzAwIC4gZ2V0U2V0dGluZyAoICdhZGRfcGxheWxpc3QnICkgPT0gImZhbHNlIiA6CiAgIGlpSWlpSWkgPSBuYW1lIC4gc3BsaXQgKCAnKSAnICkgWyAxIF0KICAgb29PbzBvID0gWwogKCAnUGxheSAnICsgaWlJaWlJaSArICcgUGxheUxpc3QnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9MTMmbmFtZT0lcyZwbGF5bGlzdD0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpaUlpaUlpICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggc3RyICggcGxheWxpc3QgKSAuIHJlcGxhY2UgKCAnLCcgLCAnfHwnICkgKSApICkKIF0KICAgb29vT09PMG9vT29PT08gLiBhZGRDb250ZXh0TWVudUl0ZW1zICggb29PbzBvICkKICAgaWYgNDQgLSA0NDogaTFpSWkxMWlJSWkxSSAuIGkxaUlpMTFpSUlpMUkgKyBpaSAqIElpIC8gSTFpMWlJMWkgKyBvb08wMG9Pb28KIE8wb08wb28wTyA9IHhibWNwbHVnaW4gLiBhZGREaXJlY3RvcnlJdGVtICggaGFuZGxlID0gaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgdXJsID0gbzAwb28gLCBsaXN0aXRlbSA9IG9vb09PTzBvb09vT09PICwgdG90YWxJdGVtcyA9IHRvdGFsICwgaXNGb2xkZXIgPSBvMDBPTzBvMCApCiBpZiAxNyAtIDE3OiBPbzBvb08wb28wb08gKyBvb08wT08wMDBvCiBpZiA0MyAtIDQzOiBJMWkxaUkxaSAlIG8wMG9vbzAgLyBJaWlJICogb29PMDBvT29vCiByZXR1cm4gTzBvTzBvbzBPCiBpZiA4NSAtIDg1OiBpSTExSTFJSTFJMUkgLiBpaSAuIElpaUkKIGlmIDc3IC0gNzc6IEkxMWkxMUlpICUgTzBPT28KZGVmIG9PMG9vICggdXJsICwgbmFtZSAsIGljb25pbWFnZSAsIHNldHJlc29sdmVkID0gVHJ1ZSApIDoKIGlmIHNldHJlc29sdmVkIDoKICBvMDBvMG8wMDBPbyA9IFRydWUKICBpZiAnJCRMU0RpcmVjdCQkJyBpbiB1cmwgOgogICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyQkTFNEaXJlY3QkJCcgLCAnJyApCiAgIG8wMG8wbzAwME9vID0gRmFsc2UKICAgaWYgMTAwIC0gMTAwOiBpaTFJIC0gSWkgLiBvb08wMG9Pb28gKiBpMTFpaTExaUlpMTFpCiAgb29vT09PMG9vT29PT08gPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gaWNvbmltYWdlICkKICBvb29PT08wb29Pb09PTyAuIHNldEluZm8gKCB0eXBlID0gJ1ZpZGVvJyAsIGluZm9MYWJlbHMgPSB7ICdUaXRsZScgOiBuYW1lIH0gKQogIG9vb09PTzBvb09vT09PIC4gc2V0UHJvcGVydHkgKCAiSXNQbGF5YWJsZSIgLCAidHJ1ZSIgKQogIG9vb09PTzBvb09vT09PIC4gc2V0UGF0aCAoIHVybCApCiAgaWYgbm90IG8wMG8wbzAwME9vIDoKICAgeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggdXJsICkKICBlbHNlIDoKICAgeGJtY3BsdWdpbiAuIHNldFJlc29sdmVkVXJsICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgVHJ1ZSAsIG9vb09PTzBvb09vT09PICkKICAgaWYgNjIgLSA2MjogbzBvMDBPbzBPCiBlbHNlIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAnWEJNQy5SdW5QbHVnaW4oJyArIHVybCArICcpJyApCiAgaWYgNDEgLSA0MTogaWkxSSAtIEkxMWkxMUlpCiAgaWYgNDggLSA0ODogSTExaTExSWkgLSBvb08wT08wMDBvIC8gaTExaWkxMWlJaTExaSArIEkxMWkxMUlpCmRlZiBvb08gKCBsaW5rICkgOgogSWlJSSA9IHVybGxpYiAuIHVybG9wZW4gKCBsaW5rICkKIGkxaWlpMUlpaWlJMWkxID0gSWlJSSAuIHJlYWQgKCApCiBJaUlJIC4gY2xvc2UgKCApCiBJSUlpSTFpMSA9IGkxaWlpMUlpaWlJMWkxIC4gc3BsaXQgKCAiSmV0enQiICkKIElJaTExaUlJMTFpMSA9IElJSWlJMWkxIFsgMSBdIC4gc3BsaXQgKCAncHJvZ3JhbW0vZGV0YWlsLnBocD9jb25zdF9pZD0nICkKIGlpMTExMTFJID0gSUlpMTFpSUkxMWkxIFsgMSBdIC4gc3BsaXQgKCAnPGJyIC8+PGEgaHJlZj0iLycgKQogT09PTyA9IGlpMTExMTFJIFsgMCBdIFsgNDAgOiBsZW4gKCBpaTExMTExSSBbIDAgXSApIF0KIG9PT08wMDBvME8wTyA9IElJaTExaUlJMTFpMSBbIDIgXSAuIHNwbGl0ICggIjwvYT48L3A+PC9kaXY+IiApCiBpaTFPME9vbzBPID0gb09PTzAwMG8wTzBPIFsgMCBdIFsgMTcgOiBsZW4gKCBvT09PMDAwbzBPME8gWyAwIF0gKSBdCiBpaTFPME9vbzBPID0gaWkxTzBPb28wTyAuIGVuY29kZSAoICd1dGYtOCcgKQogcmV0dXJuICIgIC0gIiArIGlpMU8wT29vME8gKyAiIC0gIiArIE9PT08KIGlmIDE4IC0gMTg6IGlpMUkKIGlmIDQgLSA0OiBPbzBvTzBvb28KZGVmIElpaTEgKCB1cmwgLCByZWdleCApIDoKIG9PME9vID0gbzBPICggdXJsICkKIHRyeSA6CiAgSTFJSTFJMTFJMUkgPSByZSAuIGZpbmRhbGwgKCByZWdleCAsIG9PME9vICkgWyAwIF0KICByZXR1cm4gSTFJSTFJMTFJMUkKIGV4Y2VwdCA6CiAgaTFJSTEgKCAncmVnZXggZmFpbGVkJyApCiAgaTFJSTEgKCByZWdleCApCiAgcmV0dXJuCiAgaWYgOTMgLSA5MzogbzBPTzAgJSBpaTFJCiAgaWYgODMgLSA4MzogSTExaTExSWkgLiBpMWlJaTExaUlJaTFJIC0gSTFpMWlJMWkgLiBJaWlJCmRlZiBvb28wMG8wbzAgKCBkICwgcm9vdCA9ICJyb290IiAsIG5lc3RlZCA9IDAgKSA6CiBpZiA1NCAtIDU0OiBvMDBvb28wICUgSTFpMWlJMWkgLiBPbzBvb08wb28wb08gKyBvME9PMCAqIG8wMCAtIGlpMUkKIEkxaWkxSTFpaWkxID0gbGFtYmRhIGlJaWlpSUlpaWkgOiAnPCcgKyBpSWlpaUlJaWlpICsgJz4nCiBPTzBPbzAwT28gPSBsYW1iZGEgaUlpaWlJSWlpaSA6ICc8LycgKyBpSWlpaUlJaWlpICsgJz5cbicKIGlmIDI1IC0gMjU6IGlJMTFJMUlJMUkxSQogbzBvME8wb09PT29vbyA9IGxhbWJkYSBJMWlpaSAsIElpMWlpSTFpMSA6IElpMWlpSTFpMSArIEkxaWkxSTFpaWkxICggaUlpbzBvb29vME9PbzAwICkgKyBzdHIgKCBJMWlpaSApICsgT08wT28wME9vICggaUlpbzBvb29vME9PbzAwICkKIElpMWlpSTFpMSA9IEkxaWkxSTFpaWkxICggcm9vdCApICsgJ1xuJyBpZiByb290IGVsc2UgIiIKIGlmIDkwIC0gOTA6IElpaUkgLyBPbzBvb08wb28wb08gLSBPbzBvb08wb28wb08gLiBJMTFpMTFJaQogZm9yIGlJaW8wb29vbzBPT28wMCAsIG8wT09vbzBvT29PMDAgaW4gZCAuIGl0ZXJpdGVtcyAoICkgOgogIGkxaWkxaUlpID0gdHlwZSAoIG8wT09vbzBvT29PMDAgKQogIGlmIG5lc3RlZCA9PSAwIDogaUlpbzBvb29vME9PbzAwID0gJ3JlZ2V4JwogIGlmIGkxaWkxaUlpIGlzIGxpc3QgOgogICBmb3IgSTFpaWkgaW4gbzBPT29vMG9Pb08wMCA6CiAgICBJMWlpaSA9IGVzY2FwZSAoIEkxaWlpICkKICAgIElpMWlpSTFpMSA9IG8wbzBPMG9PT09vb28gKCBJMWlpaSAsIElpMWlpSTFpMSApCiAgICBpZiA0MyAtIDQzOiBvMDBvb28wICsgbzAwICsgaWkxSSAtIG9Pb08wb28wT09PbyArIElpaUkKICBpZiBpMWlpMWlJaSBpcyBkaWN0IDoKICAgSWkxaWlJMWkxID0gbzBvME8wb09PT29vbyAoICdcbicgKyBvb28wMG8wbzAgKCBvME9Pb28wb09vTzAwICwgTm9uZSAsIG5lc3RlZCArIDEgKSAsIElpMWlpSTFpMSApCiAgaWYgaTFpaTFpSWkgaXMgbm90IGxpc3QgYW5kIGkxaWkxaUlpIGlzIG5vdCBkaWN0IDoKICAgaWYgbm90IG8wT09vbzBvT29PMDAgaXMgTm9uZSA6IG8wT09vbzBvT29PMDAgPSBlc2NhcGUgKCBvME9Pb28wb09vTzAwICkKICAgaWYgNTQgLSA1NDogSWlpMWlpMUlJMTFpICsgSWlpMWlpMUlJMTFpICsgSTFpMWlJMWkgJSBpaTFJICUgSWkKICAgaWYgbzBPT29vMG9Pb08wMCBpcyBOb25lIDoKICAgIElpMWlpSTFpMSA9IG8wbzBPMG9PT09vb28gKCBvME9Pb28wb09vTzAwICwgSWkxaWlJMWkxICkKICAgZWxzZSA6CiAgICBpZiAxMDAgLSAxMDA6IElpaTFpaTFJSTExaQogICAgSWkxaWlJMWkxID0gbzBvME8wb09PT29vbyAoIG8wT09vbzBvT29PMDAgLiBlbmNvZGUgKCAidXRmLTgiICkgLCBJaTFpaUkxaTEgKQogICAgaWYgOTYgLSA5NjogSTExaTExSWkgLiBPbzBvTzBvb28gKiBvb08wT08wMDBvICUgT28wb08wb29vIC4gb29PMDBvT29vICogaWkxSQogSWkxaWlJMWkxICs9IE9PME9vMDBPbyAoIHJvb3QgKSBpZiByb290IGVsc2UgIiIKIGlmIDgzIC0gODM6IGlJMTFJMUlJMUkxSQogcmV0dXJuIElpMWlpSTFpMQp4Ym1jcGx1Z2luIC4gc2V0Q29udGVudCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsICdtb3ZpZXMnICkKaWYgOTcgLSA5NzogSWkgKyBpMWlJaTExaUlJaTFJICogT28wb29PMG9vMG9PICUgbzAwIC4gT28wb08wb29vCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9VTlNPUlRFRCApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9MQUJFTCApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9EQVRFICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIHhibWNwbHVnaW4gLiBhZGRTb3J0TWV0aG9kICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgeGJtY3BsdWdpbiAuIFNPUlRfTUVUSE9EX0dFTlJFICkKZXhjZXB0IDoKIHBhc3MKIGlmIDQgLSA0OiBvMG8wME9vME8gLiBvMDAgLSBpSTExSTFJSTFJMUkKSWkxMWlpSUlpSTEgPSBJSUlpICggKQppZiAxOSAtIDE5OiBPbzBvb08wb28wb08gJSBpMTFpaTExaUlpMTFpIC8gbzAwb29vMCArIG9vTzBPTzAwMG8gJSBpaQpJaUlJID0gTm9uZQppaUlpSSA9IE5vbmUKaTFJSTFJaWlJaSA9IE5vbmUKaTFpMWlpID0gTm9uZQpJaTExID0gTm9uZQpPT08wME8gPSBpaWlpCmkxaTFpaSA9IE5vbmUKb09vMDAwTzAwTzAgPSBOb25lCmkxSSA9IE5vbmUKaWYgNDMgLSA0MzogTzBPT28KdHJ5IDoKIElpSUkgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJaTExaWlJSWlJMSBbICJ1cmwiIF0gKSAuIGRlY29kZSAoICd1dGYtOCcgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogaWlJaUkgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJaTExaWlJSWlJMSBbICJuYW1lIiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIElpMTEgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJaTExaWlJSWlJMSBbICJpY29uaW1hZ2UiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogT09PMDBPID0gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggSWkxMWlpSUlpSTEgWyAiZmFuYXJ0IiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIGkxSUkxSWlpSWkgPSBpbnQgKCBJaTExaWlJSWlJMSBbICJtb2RlIiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIGkxaTFpaSA9IGV2YWwgKCB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJaTExaWlJSWlJMSBbICJwbGF5bGlzdCIgXSApIC4gcmVwbGFjZSAoICd8fCcgLCAnLCcgKSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBvT28wMDBPMDBPMCA9IGludCAoIElpMTFpaUlJaUkxIFsgImZhdl9tb2RlIiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIGkxSSA9IElpMTFpaUlJaUkxIFsgInJlZ2V4cyIgXQpleGNlcHQgOgogcGFzcwpPb09pSTExSWlJMWkxID0gJycKdHJ5IDoKIE9vT2lJMTFJaUkxaTEgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJaTExaWlJSWlJMSBbICJwbGF5aXRlbSIgXSApCmV4Y2VwdCA6CiBwYXNzCiBpZiA2NSAtIDY1OiBvMG8wME9vME8gLiBvME9PMAppMUlJMSAoICJNb2RlOiAiICsgc3RyICggaTFJSTFJaWlJaSApICkKaWYgODUgLSA4NTogb29PME9PMDAwbwppZiA1NSAtIDU1OiBJaWkxaWkxSUkxMWkKaWYgbm90IElpSUkgaXMgTm9uZSA6CiBpMUlJMSAoICJVUkw6ICIgKyBzdHIgKCBJaUlJIC4gZW5jb2RlICggJ3V0Zi04JyApICkgKQppMUlJMSAoICJOYW1lOiAiICsgc3RyICggaWlJaUkgKSApCmlmIDc2IC0gNzY6IG8wT08wIC0gSWkKaWYgbm90IE9vT2lJMTFJaUkxaTEgPT0gJycgOgogb09vTzBvID0gbzBvMDBPTzAgKCAnJyAsIGRhdGEgPSBPb09pSTExSWlJMWkxICkKIGlpSWlJICwgSWlJSSAsIGkxSSA9IGkxaSAoIG9Pb08wbyAsIE5vbmUgLCBkb250TGluayA9IFRydWUgKQogaTFJSTFJaWlJaSA9IDExNwogaWYgMjcgLSAyNzogSWlpMWlpMUlJMTFpIC0gSWkgJSBvb08wMG9Pb28gLyBpMWlJaTExaUlJaTFJIC4gaTFpSWkxMWlJSWkxSSAvIGlpCmlmIGkxSUkxSWlpSWkgPT0gTm9uZSA6CiBpMUlJMSAoICJnZXRTb3VyY2VzIiApCiBPT29PTzAwT09PME9PICggKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDc2IC0gNzY6IEkxaTFpSTFpICogaTExaWkxMWlJaTExaSAuIGlJMTFJMUlJMUkxSSAlIGlpICUgSWlpMWlpMUlJMTFpCmVsaWYgaTFJSTFJaWlJaSA9PSAxIDoKIGkxSUkxICggImdldERhdGEiICkKIG9PME9vID0gTm9uZQogaWYgaTFJIDoKICBvTzBPbyA9IGlJSTExMWkgKCBpMUkgLCBJaUlJICkKICBJaUlJID0gJycKICBpZiAzOSAtIDM5OiBvb08wT08wMDBvICogb09vTzBvbzBPT09vIC4gbzBvMDBPbzBPICogSTFpMWlJMWkKIGkxICggSWlJSSAsIE9PTzAwTyAsIG9PME9vICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA4OSAtIDg5OiBvMDBvb28wIC0gTzBPT28gLiBJMWkxaUkxaSAtIG9vTzAwb09vbyAtIEkxMWkxMUlpCmVsaWYgaTFJSTFJaWlJaSA9PSAyIDoKIGkxSUkxICggImdldENoYW5uZWxJdGVtcyIgKQogTzBPTyAoIGlpSWlJICwgSWlJSSAsIE9PTzAwTyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNzkgLSA3OTogT28wb08wb29vICsgT28wb08wb29vICsgbzAwb29vMAplbGlmIGkxSUkxSWlpSWkgPT0gMyA6CiBpMUlJMSAoICJnZXRTdWJDaGFubmVsSXRlbXMiICkKIG8wb29vT08wMCAoIGlpSWlJICwgSWlJSSAsIE9PTzAwTyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgMzkgLSAzOTogbzBvMDBPbzBPIC0gaWkKZWxpZiBpMUlJMUlpaUlpID09IDQgOgogaTFJSTEgKCAiZ2V0RmF2b3JpdGVzIiApCiBpaTExICggKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDYzIC0gNjM6IGlJMTFJMUlJMUkxSSAlIElpaUkgKiBPME9PbwplbGlmIGkxSUkxSWlpSWkgPT0gNSA6CiBpMUlJMSAoICJhZGRGYXZvcml0ZSIgKQogdHJ5IDoKICBpaUlpSSA9IGlpSWlJIC4gc3BsaXQgKCAnXFwgJyApIFsgMSBdCiBleGNlcHQgOgogIHBhc3MKIHRyeSA6CiAgaWlJaUkgPSBpaUlpSSAuIHNwbGl0ICggJyAgLSAnICkgWyAwIF0KIGV4Y2VwdCA6CiAgcGFzcwogSWlpMTExMTFpaUkgKCBpaUlpSSAsIElpSUkgLCBJaTExICwgT09PMDBPICwgb09vMDAwTzAwTzAgKQogaWYgNzkgLSA3OTogbzBvMDBPbzBPCmVsaWYgaTFJSTFJaWlJaSA9PSA2IDoKIGkxSUkxICggInJtRmF2b3JpdGUiICkKIHRyeSA6CiAgaWlJaUkgPSBpaUlpSSAuIHNwbGl0ICggJ1xcICcgKSBbIDEgXQogZXhjZXB0IDoKICBwYXNzCiB0cnkgOgogIGlpSWlJID0gaWlJaUkgLiBzcGxpdCAoICcgIC0gJyApIFsgMCBdCiBleGNlcHQgOgogIHBhc3MKIGkxaUlpaSAoIGlpSWlJICkKIGlmIDMyIC0gMzI6IG9vTzBPTzAwMG8gLiBvMG8wME9vME8gKyBvMDBvb28wIC8gb09vTzBvbzBPT09vIC8gT28wb08wb29vIC8gT28wb29PMG9vMG9PCmVsaWYgaTFJSTFJaWlJaSA9PSA3IDoKIGlJMTExaUkgKCApCiBvMDAwbzBvMDBvME9vICggKQogaWYgMTUgLSAxNTogSWlpMWlpMUlJMTFpCmVsaWYgaTFJSTFJaWlJaSA9PSA4IDoKIGkxSUkxICggInJtU291cmNlIiApCiBpMWlJaSAoIGlpSWlJICkKIGlmIDQgLSA0OiBPbzBvTzBvb28gKyBpSTExSTFJSTFJMUkgKiBvMDAgKyBpMWlJaTExaUlJaTFJICogSWlpSSAlIG9vTzBPTzAwMG8KZWxpZiBpMUlJMUlpaUlpID09IDkgOgogaTFJSTEgKCAiZG93bmxvYWRfZmlsZSIgKQogaWkxSUlpaSAoIGlpSWlJICwgSWlJSSApCiBpZiA4OCAtIDg4OiBvME9PMCAtIGlpMUkgJSBJaSAlIG9vTzBPTzAwMG8gKiBpaQplbGlmIGkxSUkxSWlpSWkgPT0gMTAgOgogaTFJSTEgKCAiZ2V0Q29tbXVuaXR5U291cmNlcyIgKQogb09PTyAoICkKIGlmIDQwIC0gNDA6IGkxaUlpMTFpSUlpMUkKZWxpZiBpMUlJMUlpaUlpID09IDExIDoKIGkxSUkxICggImFkZFNvdXJjZSIgKQogT08wb09vT08wb09PMCAoIElpSUkgKQogaWYgNDcgLSA0Nzogb09vTzBvbzBPT09vCmVsaWYgaTFJSTFJaWlJaSA9PSAxMiA6CiBpMUlJMSAoICJzZXRSZXNvbHZlZFVybCIgKQogaWYgbm90IElpSUkgLiBzdGFydHN3aXRoICggInBsdWdpbjovL3BsdWdpbiIgKSBvciBub3QgYW55ICggeCBpbiBJaUlJIGZvciB4IGluIElJICkgOgogIG8wMG8wbzAwME9vID0gVHJ1ZQogIGlmICckJExTRGlyZWN0JCQnIGluIElpSUkgOgogICBJaUlJID0gSWlJSSAuIHJlcGxhY2UgKCAnJCRMU0RpcmVjdCQkJyAsICcnICkKICAgbzAwbzBvMDAwT28gPSBGYWxzZQogIEkxSUkxSTExSTFJID0geGJtY2d1aSAuIExpc3RJdGVtICggcGF0aCA9IElpSUkgKQogIGlmIG5vdCBvMDBvMG8wMDBPbyA6CiAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIElpSUkgKQogIGVsc2UgOgogICB4Ym1jcGx1Z2luIC4gc2V0UmVzb2x2ZWRVcmwgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCBUcnVlICwgSTFJSTFJMTFJMUkgKQogZWxzZSA6CiAgaWYgNjUgLSA2NTogbzBvMDBPbzBPICsgb29PMDBvT29vICUgbzAwb29vMCAqIEkxMWkxMUlpIC8gTzBPT28gLyBvT29PMG9vME9PT28KICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAnWEJNQy5SdW5QbHVnaW4oJyArIElpSUkgKyAnKScgKQogIGlmIDcxIC0gNzE6IElpIC8gb09vTzBvbzBPT09vIC4gbzBPTzAKZWxpZiBpMUlJMUlpaUlpID09IDEzIDoKIGkxSUkxICggInBsYXlfcGxheWxpc3QiICkKIGkxaTFpSUlJMTFpICggaWlJaUkgLCBpMWkxaWkgKQogaWYgMzMgLSAzMzogbzBPTzAKZWxpZiBpMUlJMUlpaUlpID09IDE0IDoKIGkxSUkxICggImdldF94bWxfZGF0YWJhc2UiICkKIG9vT09Pb09vb09vTyAoIElpSUkgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDM5IC0gMzk6IGkxMWlpMTFpSWkxMWkgKyBvMG8wME9vME8gKyBPME9PbyAqIG9vTzBPTzAwMG8gJSBvMG8wME9vME8gLSBvMG8wME9vME8KZWxpZiBpMUlJMUlpaUlpID09IDE1IDoKIGkxSUkxICggImJyb3dzZV94bWxfZGF0YWJhc2UiICkKIG9vT09Pb09vb09vTyAoIElpSUkgLCBUcnVlICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA0MSAtIDQxOiBPbzBvTzBvb28gJSBJaWlJCmVsaWYgaTFJSTFJaWlJaSA9PSAxNiA6CiBpMUlJMSAoICJicm93c2VfY29tbXVuaXR5IiApCiBvT09PICggSWlJSSAsIGJyb3dzZSA9IFRydWUgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDY3IC0gNjc6IG8wbzAwT28wTyAlIG9vTzAwb09vbwplbGlmIGkxSUkxSWlpSWkgPT0gMTcgb3IgaTFJSTFJaWlJaSA9PSAxMTcgOgogaTFJSTEgKCAiZ2V0UmVnZXhQYXJzZWQiICkKIGlmIDM1IC0gMzU6IEkxMWkxMUlpIC4gb09vTzBvbzBPT09vICsgaWkgJSBpMWlJaTExaUlJaTFJICUgT28wb29PMG9vMG9PCiBvTzBPbyA9IE5vbmUKIGlmIGkxSSBhbmQgJ2xpc3RyZXBlYXQnIGluIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIGkxSSApIDoKICBJMTFJMUlJaWlJSTEgLCBJSUlJSWlpMWlpMTEgLCBpSUlJaWkgLCBpMUkgPSBpSUkxMTFpICggaTFJICwgSWlJSSApCiAgaWYgMzkgLSAzOTogbzAwb29vMAogIGlJSSA9ICcnCiAgaWYgNjAgLSA2MDogT28wb29PMG9vMG9PCiAgaWYgNjIgLSA2Mjogb29PMDBvT29vICogSTFpMWlJMWkKICBvT28gPSBpSUlJaWkgWyAnbmFtZScgXQogIG9PT29PMG9PMG9vME8gPSBpMUkgLiBwb3AgKCBvT28gKQogIGlmIDU1IC0gNTU6IGkxaUlpMTFpSUlpMUkKICBJaUlJID0gJycKICBpbXBvcnQgY29weQogIElJaTFpMUkxMUlJSUkgPSAnJwogIE9vb09vT09PMDBPID0gMAogIGZvciBJMTExaUlJSUkxMWlJIGluIElJSUlJaWkxaWkxMSA6CiAgIHRyeSA6CiAgICBPb29Pb09PTzAwTyArPSAxCiAgICBvT29PTyA9IGNvcHkgLiBkZWVwY29weSAoIGkxSSApCiAgICBpZiAyMCAtIDIwOiBPME9PbyAuIGkxMWlpMTFpSWkxMWkgKiBvMDAKICAgIE9PaWkxMUlpMUlpaUkxID0gSTExSTFJSWlpSUkxCiAgICBvb09vb28wMDBvT08gPSAwCiAgICBmb3Igb29Pb29vMDAwb09PIGluIHJhbmdlICggbGVuICggSTExMWlJSUlJMTFpSSApICkgOgogICAgIGlmIDgzIC0gODM6IE8wT09vICsgaWkxSSAqIGlpICogbzBPTzAKICAgICBpZiBsZW4gKCBvT29PTyApID4gMCA6CiAgICAgIGZvciBPb08wbzBPTyAsIElJMTFJaUkxIGluIG9Pb09PIC4gaXRlcml0ZW1zICggKSA6CiAgICAgICBpZiBJSTExSWlJMSBpcyBub3QgTm9uZSA6CiAgICAgICAgZm9yIGlJSWkxMWkgLCBJSUkgaW4gSUkxMUlpSTEgLiBpdGVyaXRlbXMgKCApIDoKICAgICAgICAgaWYgSUlJIGlzIG5vdCBOb25lIDoKICAgICAgICAgIGlmIDM2IC0gMzY6IG9vTzBPTzAwMG8gKiBJaWlJCiAgICAgICAgICBpZiAyNSAtIDI1OiBvMDBvb28wICUgb29PME9PMDAwbyAtIG8wT08wICogSWlpMWlpMUlJMTFpIC0gaUkxMUkxSUkxSTFJCiAgICAgICAgICBpZiA0NiAtIDQ2OiBvb08wT08wMDBvIC4gbzBvMDBPbzBPICogaTFpSWkxMWlJSWkxSSArIG8wMAogICAgICAgICAgaWYgNDAgLSA0MDogbzBvMDBPbzBPIC4gbzBvMDBPbzBPICogT28wb29PMG9vMG9PCiAgICAgICAgICBpZiB0eXBlICggSUlJICkgaXMgZGljdCA6CiAgICAgICAgICAgZm9yIGkxaWlpSUlpMTFJSSAsIG8wb29vT28wb28gaW4gSUlJIC4gaXRlcml0ZW1zICggKSA6CiAgICAgICAgICAgIGlmIG8wb29vT28wb28gaXMgbm90IE5vbmUgOgogICAgICAgICAgICAgSUlpaWlpID0gTm9uZQogICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSAoIEkxMTFpSUlJSTExaUkgLCB0dXBsZSApIDoKICAgICAgICAgICAgICB0cnkgOgogICAgICAgICAgICAgICBJSWlpaWkgPSBJMTExaUlJSUkxMWlJIFsgb29Pb29vMDAwb09PIF0gLiBkZWNvZGUgKCAndXRmLTgnICkKICAgICAgICAgICAgICBleGNlcHQgOgogICAgICAgICAgICAgICBJSWlpaWkgPSBJMTExaUlJSUkxMWlJIFsgb29Pb29vMDAwb09PIF0KICAgICAgICAgICAgIGVsc2UgOgogICAgICAgICAgICAgIHRyeSA6CiAgICAgICAgICAgICAgIElJaWlpaSA9IEkxMTFpSUlJSTExaUkgLiBkZWNvZGUgKCAndXRmLTgnICkKICAgICAgICAgICAgICBleGNlcHQgOgogICAgICAgICAgICAgICBJSWlpaWkgPSBJMTExaUlJSUkxMWlJCiAgICAgICAgICAgICAgIGlmIDMzIC0gMzM6IG9vTzAwb09vbyAlIG9vTzBPTzAwMG8KICAgICAgICAgICAgIGlmICdbJyArIG9PbyArICcucGFyYW0nICsgc3RyICggb29Pb29vMDAwb09PICsgMSApICsgJ11bREVdJyBpbiBvMG9vb09vMG9vIDoKICAgICAgICAgICAgICBvMG9vb09vMG9vID0gbzBvb29PbzBvbyAuIHJlcGxhY2UgKCAnWycgKyBvT28gKyAnLnBhcmFtJyArIHN0ciAoIG9vT29vbzAwMG9PTyArIDEgKSArICddW0RFXScgLCB1bmVzY2FwZSAoIElJaWlpaSApICkKICAgICAgICAgICAgIElJSSBbIGkxaWlpSUlpMTFJSSBdID0gbzBvb29PbzBvbyAuIHJlcGxhY2UgKCAnWycgKyBvT28gKyAnLnBhcmFtJyArIHN0ciAoIG9vT29vbzAwMG9PTyArIDEgKSArICddJyAsIElJaWlpaSApCiAgICAgICAgICAgICBpZiA0OSAtIDQ5OiBJaWkxaWkxSUkxMWkgKyBJMWkxaUkxaSAvIElpaUkgKyBpaSArIE9vMG9vTzBvbzBvTyAvIE9vMG9PMG9vbwogICAgICAgICAgICAgaWYgMjkgLSAyOTogbzAwb29vMCAtIG8wMG9vbzAgLyBPME9PbwogICAgICAgICAgZWxzZSA6CiAgICAgICAgICAgSUlpaWlpID0gTm9uZQogICAgICAgICAgIGlmIGlzaW5zdGFuY2UgKCBJMTExaUlJSUkxMWlJICwgdHVwbGUgKSA6CiAgICAgICAgICAgIHRyeSA6CiAgICAgICAgICAgICBJSWlpaWkgPSBJMTExaUlJSUkxMWlJIFsgb29Pb29vMDAwb09PIF0gLiBkZWNvZGUgKCAndXRmLTgnICkKICAgICAgICAgICAgZXhjZXB0IDoKICAgICAgICAgICAgIElJaWlpaSA9IEkxMTFpSUlJSTExaUkgWyBvb09vb28wMDBvT08gXQogICAgICAgICAgIGVsc2UgOgogICAgICAgICAgICB0cnkgOgogICAgICAgICAgICAgSUlpaWlpID0gSTExMWlJSUlJMTFpSSAuIGRlY29kZSAoICd1dGYtOCcgKQogICAgICAgICAgICBleGNlcHQgOgogICAgICAgICAgICAgSUlpaWlpID0gSTExMWlJSUlJMTFpSQogICAgICAgICAgIGlmICdbJyArIG9PbyArICcucGFyYW0nICsgc3RyICggb29Pb29vMDAwb09PICsgMSApICsgJ11bREVdJyBpbiBJSUkgOgogICAgICAgICAgICBpZiA0OSAtIDQ5OiBJMWkxaUkxaSArIG8wT08wICUgaTExaWkxMWlJaTExaSAtIGkxaUlpMTFpSUlpMUkgLSBvMG8wME9vME8gLSBpaQogICAgICAgICAgICBJSUkgPSBJSUkgLiByZXBsYWNlICggJ1snICsgb09vICsgJy5wYXJhbScgKyBzdHIgKCBvb09vb28wMDBvT08gKyAxICkgKyAnXVtERV0nICwgdW5lc2NhcGUgKCBJSWlpaWkgKSApCiAgICAgICAgICAgIGlmIDQgLSA0OiBvb08wT08wMDBvIC0gbzBPTzAgJSBpMWlJaTExaUlJaTFJICogSWkKICAgICAgICAgICBJSTExSWlJMSBbIGlJSWkxMWkgXSA9IElJSSAuIHJlcGxhY2UgKCAnWycgKyBvT28gKyAnLnBhcmFtJyArIHN0ciAoIG9vT29vbzAwMG9PTyArIDEgKSArICddJyAsIElJaWlpaSApCiAgICAgICAgICAgaWYgMTggLSAxODogaTFpSWkxMWlJSWkxSSAlIG8wbzAwT28wTwogICAgICAgICAgIGlmIDY2IC0gNjY6IGlJMTFJMUlJMUkxSSAlIElpIC8gSTExaTExSWkKICAgICBJSWlpaWkgPSBOb25lCiAgICAgaWYgaXNpbnN0YW5jZSAoIEkxMTFpSUlJSTExaUkgLCB0dXBsZSApIDoKICAgICAgdHJ5IDoKICAgICAgIElJaWlpaSA9IEkxMTFpSUlJSTExaUkgWyBvb09vb28wMDBvT08gXSAuIGRlY29kZSAoICd1dGYtOCcgKQogICAgICBleGNlcHQgOgogICAgICAgSUlpaWlpID0gSTExMWlJSUlJMTFpSSBbIG9vT29vbzAwMG9PTyBdCiAgICAgZWxzZSA6CiAgICAgIHRyeSA6CiAgICAgICBJSWlpaWkgPSBJMTExaUlJSUkxMWlJIC4gZGVjb2RlICggJ3V0Zi04JyApCiAgICAgIGV4Y2VwdCA6CiAgICAgICBJSWlpaWkgPSBJMTExaUlJSUkxMWlJCiAgICAgaWYgJ1snICsgb09vICsgJy5wYXJhbScgKyBzdHIgKCBvb09vb28wMDBvT08gKyAxICkgKyAnXVtERV0nIGluIE9PaWkxMUlpMUlpaUkxIDoKICAgICAgT09paTExSWkxSWlpSTEgPSBPT2lpMTFJaTFJaWlJMSAuIHJlcGxhY2UgKCAnWycgKyBvT28gKyAnLnBhcmFtJyArIHN0ciAoIG9vT29vbzAwMG9PTyArIDEgKSArICddW0RFXScgLCBJSWlpaWkgKQogICAgIE9PaWkxMUlpMUlpaUkxID0gT09paTExSWkxSWlpSTEgLiByZXBsYWNlICggJ1snICsgb09vICsgJy5wYXJhbScgKyBzdHIgKCBvb09vb28wMDBvT08gKyAxICkgKyAnXScgLCBlc2NhcGUgKCBJSWlpaWkgKSApCiAgICAgaWYgNDcgLSA0NzogSWlpMWlpMUlJMTFpICogbzBPTzAgKyBpSTExSTFJSTFJMUkgLSBvME9PMCAvIE9vMG9PMG9vbwogICAgT09paTExSWkxSWlpSTEgPSBPT2lpMTFJaTFJaWlJMSAuIHJlcGxhY2UgKCAnWycgKyBvT28gKyAnLnBhcmFtJyArIHN0ciAoIDAgKSArICddJyAsIHN0ciAoIE9vb09vT09PMDBPICkgKQogICAgaWYgODYgLSA4NjogT28wb08wb29vCiAgICBpZiA0MyAtIDQzOiBJMTFpMTFJaSAvIG8wMCAvIE8wT09vICsgaUkxMUkxSUkxSTFJICsgaWkKICAgIGlmIDMzIC0gMzM6IG9vTzBPTzAwMG8gLSBPbzBvTzBvb28gLSBPME9PbwogICAgaWYgOTIgLSA5MjogaTExaWkxMWlJaTExaSAqIE9vMG9PMG9vbwogICAgb29vMDBvME9PID0gJycKICAgIGlmIDMyIC0gMzI6IE9vMG9vTzBvbzBvTyArIG8wMCArIGlJMTFJMUlJMUkxSSAqIGkxaUlpMTFpSUlpMUkKICAgIGlmIGxlbiAoIG9Pb09PICkgPiAwIDoKICAgICBvb28wMG8wT08gPSBvb28wMG8wbzAgKCBvT29PTyAsICdsc3Byb3Jvb3QnICkKICAgICBvb28wMG8wT08gPSBvb28wMG8wT08gLiBzcGxpdCAoICc8bHNwcm9yb290PicgKSBbIDEgXSAuIHNwbGl0ICggJzwvbHNwcm9yb290JyApIFsgMCBdCiAgICAgaWYgNjIgLSA2MjogSWkKICAgICBpZiAyIC0gMjogSTExaTExSWkKICAgIHRyeSA6CiAgICAgSUlpMWkxSTExSUlJSSArPSAnXG48aXRlbT4lc1xuJXM8L2l0ZW0+JyAlICggT09paTExSWkxSWlpSTEgLCBvb28wMG8wT08gKQogICAgZXhjZXB0IDogSUlpMWkxSTExSUlJSSArPSAnXG48aXRlbT4lc1xuJXM8L2l0ZW0+JyAlICggT09paTExSWkxSWlpSTEgLiBlbmNvZGUgKCAidXRmLTgiICkgLCBvb28wMG8wT08gKQogICBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCBmaWxlID0gc3lzIC4gc3Rkb3V0ICkKICAgaWYgNjkgLSA2OTogaWkgLyBpMWlJaTExaUlJaTFJICogb29PMDBvT29vCiAgIGlmIDk5IC0gOTk6IG9vTzBPTzAwMG8gKiBpSTExSTFJSTFJMUkgJSBvMG8wME9vME8gKiBvME9PMCAvIG9vTzBPTzAwMG8gJSBpaQogICBpZiAxNCAtIDE0OiBPbzBvTzBvb28gLiBPbzBvTzBvb28gJSBPME9PbwogICBpZiA0MiAtIDQyOiBJaWlJIC4gT28wb29PMG9vMG9PIC0gTzBPT28KICAgaWYgMzMgLSAzMzogb29PME9PMDAwbyAvIG8wbzAwT28wTyAvIE9vMG9PMG9vbyAtIEkxaTFpSTFpIC0gaWkxSQogIGkxSUkxICggcmVwciAoIElJaTFpMUkxMUlJSUkgKSApCiAgaTEgKCAnJyAsICcnICwgSUlpMWkxSTExSUlJSSApCiAgeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGVsc2UgOgogIElpSUkgLCBPbzAwMG9vT09PID0gaUlJMTExaSAoIGkxSSAsIElpSUkgKQogIGlmIDggLSA4OiBJaSAuIG8wMCAvIGlJMTFJMUlJMUkxSSAvIElpaTFpaTFJSTExaSAvIE9vMG9PMG9vbyAtIG8wMG9vbzAKICBpZiBJaUlJIDoKICAgaWYgJyRQTEFZRVJQUk9YWSQ9JyBpbiBJaUlJIDoKICAgIElpSUkgLCBPTzAwID0gSWlJSSAuIHNwbGl0ICggJyRQTEFZRVJQUk9YWSQ9JyApCiAgICBwcmludCAncHJveHknICwgT08wMAogICAgaWYgMzIgLSAzMjogSWlpSSAuIGlpMUkgKiBpMWlJaTExaUlJaTFJCiAgICBPMG9vb28wTyA9IE5vbmUKICAgIElpMWlpSUlpMWkgPSBOb25lCiAgICBpZiBsZW4gKCBPTzAwICkgPiAwIGFuZCAnQCcgaW4gT08wMCA6CiAgICAgT08wMCA9IE9PMDAgLiBzcGxpdCAoICc6JyApCiAgICAgTzBvb29vME8gPSBPTzAwIFsgMCBdCiAgICAgSWkxaWlJSWkxaSA9IE9PMDAgWyAxIF0gLiBzcGxpdCAoICdAJyApIFsgMCBdCiAgICAgaUlpaWlJMUkgPSBPTzAwIFsgMSBdIC4gc3BsaXQgKCAnQCcgKSBbIDEgXQogICAgIGlJSUkxSTFpaSA9IE9PMDAgWyAyIF0KICAgIGVsc2UgOgogICAgIGlJaWlpSTFJICwgaUlJSTFJMWlpID0gT08wMCAuIHNwbGl0ICggJzonICkKICAgICBpZiA0IC0gNDogaUkxMUkxSUkxSTFJIC4gaWkxSQogICAgSUlJSUlpSUkxICggSWlJSSAsIGlpSWlJICwgSWkxMSAsIGlJaWlpSTFJICwgaUlJSTFJMWlpICwgTzBvb29vME8gLCBJaTFpaUlJaTFpICkKICAgZWxzZSA6CiAgICBvTzBvbyAoIElpSUkgLCBpaUlpSSAsIElpMTEgLCBPbzAwMG9vT09PICkKICBlbHNlIDoKICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKGdvbGRlbnR2LEZhaWxlZCB0byBleHRyYWN0IHJlZ2V4LiAtICIgKyAidGhpcyIgKyAiLDQwMDAsIiArIGkxaWlJMTFJICsgIikiICkKICAgaWYgNjMgLSA2MzogaUkxMUkxSUkxSTFJICsgT28wb08wb29vICUgaWkxSSAvIEkxMWkxMUlpICUgb29PME9PMDAwbwplbGlmIGkxSUkxSWlpSWkgPT0gMTggOgogaTFJSTEgKCAieW91dHViZWRsIiApCiB0cnkgOgogIGltcG9ydCB5b3V0dWJlZGwKIGV4Y2VwdCBFeGNlcHRpb24gOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihnb2xkZW50dixQbGVhc2UgW0NPTE9SIHllbGxvd11pbnN0YWxsIFlvdXR1YmUtZGxbL0NPTE9SXSBtb2R1bGUgLDEwMDAwLCIgIikiICkKIG9PbzBPID0geW91dHViZWRsIC4gc2luZ2xlX1lEICggSWlJSSApCiBvTzBvbyAoIG9PbzBPICwgaWlJaUkgLCBJaTExICkKIGlmIDYwIC0gNjA6IElpaUkgLiBvT29PMG9vME9PT28gJSBvb08wMG9Pb28gLyBJMTFpMTFJaSAvIG8wbzAwT28wTwplbGlmIGkxSUkxSWlpSWkgPT0gMTkgOgogaTFJSTEgKCAiR2VuZXNpc2NvbW1vbnJlc29sdmVycyIgKQogb08wb28gKCBpaWkxICggSWlJSSApICwgaWlJaUkgLCBJaTExICwgVHJ1ZSApCiBpZiAxOSAtIDE5OiBJaSAuIEkxMWkxMUlpICsgb29PME9PMDAwbyAvIE9vMG9vTzBvbzBvTyAuIElpaTFpaTFJSTExaSAqIE8wT09vCmVsaWYgaTFJSTFJaWlJaSA9PSAyMSA6CiBpMUlJMSAoICJkb3dubG9hZCBjdXJyZW50IGZpbGUgdXNpbmcgeW91dHViZS1kbCBzZXJ2aWNlIiApCiBJMTFvTzBvbyAoICcnICwgaWlJaUkgLCAndmlkZW8nICkKIGlmIDU5IC0gNTk6IGlJMTFJMUlJMUkxSSAvIElpaTFpaTFJSTExaSAlIE8wT09vCmVsaWYgaTFJSTFJaWlJaSA9PSAyMyA6CiBpMUlJMSAoICJnZXQgaW5mbyB0aGVuIGRvd25sb2FkIiApCiBJMTFvTzBvbyAoIElpSUkgLCBpaUlpSSAsICd2aWRlbycgKQogaWYgODQgLSA4NDogaUkxMUkxSUkxSTFJIC8gSTExaTExSWkgLiBvT29PMG9vME9PT28gJSBJMWkxaUkxaQplbGlmIGkxSUkxSWlpSWkgPT0gMjQgOgogaTFJSTEgKCAiQXVkaW8gb25seSB5b3V0dWJlIGRvd25sb2FkIiApCiBJMTFvTzBvbyAoIElpSUkgLCBpaUlpSSAsICdhdWRpbycgKQogaWYgOTkgLSA5OTogaTFpSWkxMWlJSWkxSSArIElpCmVsaWYgaTFJSTFJaWlJaSA9PSAyNSA6CiBpMUlJMSAoICJTZWFyY2hpbiBPdGhlciBwbHVnaW5zIiApCiBPT29PMG8gKCBJaUlJICwgaWlJaUkgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDM2IC0gMzY6IG8wMG9vbzAgKiBvb08wMG9Pb28gKiBpSTExSTFJSTFJMUkgLSBJMWkxaUkxaSAlIElpCmVsaWYgaTFJSTFJaWlJaSA9PSA1NSA6CiBpMUlJMSAoICJlbmFibGVkIGxvY2siICkKIE9PT29Pb29PMDAwb08gPSBPMDAgLiBnZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZHBpbicgKQogbzBvID0geGJtYyAuIEtleWJvYXJkICggJycgLCAnRW50ZXIgUGluJyApCiBvMG8gLiBkb01vZGFsICggKQogaWYgbm90ICggbzBvIC4gaXNDb25maXJtZWQgKCApID09IEZhbHNlICkgOgogIG8wME9vb09PMDAwID0gbzBvIC4gZ2V0VGV4dCAoICkKICBpZiBvMDBPb29PTzAwMCA9PSBPT09vT29vTzAwMG9PIDoKICAgTzAwIC4gc2V0U2V0dGluZyAoICdwYXJlbnRhbGJsb2NrZWQnICwgImZhbHNlIiApCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihnb2xkZW50dixQYXJlbnRhbCBCbG9jayBEaXNhYmxlZCw1MDAwLCIgKyBpMWlpSTExSSArICIpIiApCiAgZWxzZSA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihnb2xkZW50dixXcm9uZyBQaW4/Pyw1MDAwLCIgKyBpMWlpSTExSSArICIpIiApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgOTggLSA5ODogaUkxMUkxSUkxSTFJIC0gaWkxSSArIE8wT09vICUgSTFpMWlJMWkgKyBPME9PbyAvIG8wT08wCmVsaWYgaTFJSTFJaWlJaSA9PSA1NiA6CiBpMUlJMSAoICJkaXNhYmxlIGxvY2siICkKIE8wMCAuIHNldFNldHRpbmcgKCAncGFyZW50YWxibG9ja2VkJyAsICJ0cnVlIiApCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oZ29sZGVudHYsUGFyZW50YWwgYmxvY2sgZW5hYmxlZCw1MDAwLCIgKyBpMWlpSTExSSArICIpIiApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgOTcgLSA5NzogT28wb08wb29vICUgTzBPT28gKyBvb08wT08wMDBvIC0gT28wb08wb29vICUgaTExaWkxMWlJaTExaSArIE8wT09vCmVsaWYgaTFJSTFJaWlJaSA9PSA1MyA6CiBpMUlJMSAoICJSZXF1ZXN0aW5nIEpTT04tUlBDIEl0ZW1zIiApCiBJMUlJMUlpSTEgKCBJaUlJICkKIGlmIDMxIC0gMzE6IElpaUkKIGlmIDM1IC0gMzU6IG9Pb08wb28wT09PbyArIG8wMG9vbzAgKiBPME9PbyAvIG9Pb08wb28wT09PbwppZiBub3Qgb28wMDAgPT0gTm9uZSA6CiBwcmludCAnc2V0dGluZyB2aWV3IG1vZGUnCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiQ29udGFpbmVyLlNldFZpZXdNb2RlKCVzKSIgJSBvbzAwMCApCiBpZiA2OSAtIDY5OiBPME9PbyAuIE9vMG9vTzBvbzBvTyAtIEkxMWkxMUlpCiMgZGQ2NzhmYWFlOWFjMTY3YmM4M2FiZjc4ZTVjYjJmM2YwNjg4ZDNhMwo=')